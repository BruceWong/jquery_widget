(function(){var k=this,Q=k._,S={},G=Array.prototype,K=Object.prototype,x=G.slice,I=G.unshift,w=K.toString,i=K.hasOwnProperty,r=G.forEach,m=G.map,y=G.reduce,F=G.reduceRight,g=G.filter,u=G.every,H=G.some,J=G.indexOf,W=G.lastIndexOf;K=Array.isArray;var aa=Object.keys,z=function(h){return new v(h)};if(typeof module!=="undefined"&&module.exports){module.exports=z;z._=z}else k._=z;z.VERSION="1.1.4";var fa=z.each=z.forEach=function(h,n,s){if(h!=null)if(r&&h.forEach===r)h.forEach(n,s);else if(z.isNumber(h.length))for(var A=
0,N=h.length;A<N;A++){if(n.call(s,h[A],A,h)===S)break}else for(A in h)if(i.call(h,A))if(n.call(s,h[A],A,h)===S)break};z.map=function(h,n,s){var A=[];if(h==null)return A;if(m&&h.map===m)return h.map(n,s);fa(h,function(N,P,X){A[A.length]=n.call(s,N,P,X)});return A};z.reduce=z.foldl=z.inject=function(h,n,s,A){var N=s!==void 0;if(h==null)h=[];if(y&&h.reduce===y){if(A)n=z.bind(n,A);return N?h.reduce(n,s):h.reduce(n)}fa(h,function(P,X,ja){if(!N&&X===0){s=P;N=true}else s=n.call(A,s,P,X,ja)});if(!N)throw new TypeError("Reduce of empty array with no initial value");
return s};z.reduceRight=z.foldr=function(h,n,s,A){if(h==null)h=[];if(F&&h.reduceRight===F){if(A)n=z.bind(n,A);return s!==void 0?h.reduceRight(n,s):h.reduceRight(n)}h=(z.isArray(h)?h.slice():z.toArray(h)).reverse();return z.reduce(h,n,s,A)};z.find=z.detect=function(h,n,s){var A;ha(h,function(N,P,X){if(n.call(s,N,P,X)){A=N;return true}});return A};z.filter=z.select=function(h,n,s){var A=[];if(h==null)return A;if(g&&h.filter===g)return h.filter(n,s);fa(h,function(N,P,X){if(n.call(s,N,P,X))A[A.length]=
N});return A};z.reject=function(h,n,s){var A=[];if(h==null)return A;fa(h,function(N,P,X){n.call(s,N,P,X)||(A[A.length]=N)});return A};z.every=z.all=function(h,n,s){n=n||z.identity;var A=true;if(h==null)return A;if(u&&h.every===u)return h.every(n,s);fa(h,function(N,P,X){if(!(A=A&&n.call(s,N,P,X)))return S});return A};var ha=z.some=z.any=function(h,n,s){n=n||z.identity;var A=false;if(h==null)return A;if(H&&h.some===H)return h.some(n,s);fa(h,function(N,P,X){if(A=n.call(s,N,P,X))return S});return A};
z.include=z.contains=function(h,n){var s=false;if(h==null)return s;if(J&&h.indexOf===J)return h.indexOf(n)!=-1;ha(h,function(A){if(s=A===n)return true});return s};z.invoke=function(h,n){var s=x.call(arguments,2);return z.map(h,function(A){return(n?A[n]:A).apply(A,s)})};z.pluck=function(h,n){return z.map(h,function(s){return s[n]})};z.max=function(h,n,s){if(!n&&z.isArray(h))return Math.max.apply(Math,h);var A={computed:-Infinity};fa(h,function(N,P,X){P=n?n.call(s,N,P,X):N;P>=A.computed&&(A={value:N,
computed:P})});return A.value};z.min=function(h,n,s){if(!n&&z.isArray(h))return Math.min.apply(Math,h);var A={computed:Infinity};fa(h,function(N,P,X){P=n?n.call(s,N,P,X):N;P<A.computed&&(A={value:N,computed:P})});return A.value};z.sortBy=function(h,n,s){return z.pluck(z.map(h,function(A,N,P){return{value:A,criteria:n.call(s,A,N,P)}}).sort(function(A,N){var P=A.criteria,X=N.criteria;return P<X?-1:P>X?1:0}),"value")};z.sortedIndex=function(h,n,s){s=s||z.identity;for(var A=0,N=h.length;A<N;){var P=A+
N>>1;s(h[P])<s(n)?A=P+1:N=P}return A};z.toArray=function(h){if(!h)return[];if(h.toArray)return h.toArray();if(z.isArray(h))return h;if(z.isArguments(h))return x.call(h);return z.values(h)};z.size=function(h){return z.toArray(h).length};z.first=z.head=function(h,n,s){return n&&!s?x.call(h,0,n):h[0]};z.rest=z.tail=function(h,n,s){return x.call(h,z.isUndefined(n)||s?1:n)};z.last=function(h){return h[h.length-1]};z.compact=function(h){return z.filter(h,function(n){return!!n})};z.flatten=function(h){return z.reduce(h,
function(n,s){if(z.isArray(s))return n.concat(z.flatten(s));n[n.length]=s;return n},[])};z.without=function(h){var n=x.call(arguments,1);return z.filter(h,function(s){return!z.include(n,s)})};z.uniq=z.unique=function(h,n){return z.reduce(h,function(s,A,N){if(0==N||(n===true?z.last(s)!=A:!z.include(s,A)))s[s.length]=A;return s},[])};z.intersect=function(h){var n=x.call(arguments,1);return z.filter(z.uniq(h),function(s){return z.every(n,function(A){return z.indexOf(A,s)>=0})})};z.zip=function(){for(var h=
x.call(arguments),n=z.max(z.pluck(h,"length")),s=Array(n),A=0;A<n;A++)s[A]=z.pluck(h,""+A);return s};z.indexOf=function(h,n,s){if(h==null)return-1;if(s){s=z.sortedIndex(h,n);return h[s]===n?s:-1}if(J&&h.indexOf===J)return h.indexOf(n);s=0;for(var A=h.length;s<A;s++)if(h[s]===n)return s;return-1};z.lastIndexOf=function(h,n){if(h==null)return-1;if(W&&h.lastIndexOf===W)return h.lastIndexOf(n);for(var s=h.length;s--;)if(h[s]===n)return s;return-1};z.range=function(h,n,s){var A=x.call(arguments),N=A.length<=
1;h=N?0:A[0];n=N?A[0]:A[1];s=A[2]||1;A=Math.max(Math.ceil((n-h)/s),0);N=0;for(var P=Array(A);N<A;){P[N++]=h;h+=s}return P};z.bind=function(h,n){var s=x.call(arguments,2);return function(){return h.apply(n||{},s.concat(x.call(arguments)))}};z.bindAll=function(h){var n=x.call(arguments,1);if(n.length==0)n=z.functions(h);fa(n,function(s){h[s]=z.bind(h[s],h)});return h};z.memoize=function(h,n){var s={};n=n||z.identity;return function(){var A=n.apply(this,arguments);return A in s?s[A]:s[A]=h.apply(this,
arguments)}};z.delay=function(h,n){var s=x.call(arguments,2);return setTimeout(function(){return h.apply(h,s)},n)};z.defer=function(h){return z.delay.apply(z,[h,1].concat(x.call(arguments,1)))};var B=function(h,n,s){var A;return function(){var N=this,P=arguments,X=function(){A=null;h.apply(N,P)};s&&clearTimeout(A);if(s||!A)A=setTimeout(X,n)}};z.throttle=function(h,n){return B(h,n,false)};z.debounce=function(h,n){return B(h,n,true)};z.wrap=function(h,n){return function(){var s=[h].concat(x.call(arguments));
return n.apply(this,s)}};z.compose=function(){var h=x.call(arguments);return function(){for(var n=x.call(arguments),s=h.length-1;s>=0;s--)n=[h[s].apply(this,n)];return n[0]}};z.keys=aa||function(h){if(z.isArray(h))return z.range(0,h.length);var n=[],s;for(s in h)if(i.call(h,s))n[n.length]=s;return n};z.values=function(h){return z.map(h,z.identity)};z.functions=z.methods=function(h){return z.filter(z.keys(h),function(n){return z.isFunction(h[n])}).sort()};z.extend=function(h){fa(x.call(arguments,1),
function(n){for(var s in n)h[s]=n[s]});return h};z.clone=function(h){return z.isArray(h)?h.slice():z.extend({},h)};z.tap=function(h,n){n(h);return h};z.isEqual=function(h,n){if(h===n)return true;var s=typeof h;if(s!=typeof n)return false;if(h==n)return true;if(!h&&n||h&&!n)return false;if(h._chain)h=h._wrapped;if(n._chain)n=n._wrapped;if(h.isEqual)return h.isEqual(n);if(z.isDate(h)&&z.isDate(n))return h.getTime()===n.getTime();if(z.isNaN(h)&&z.isNaN(n))return false;if(z.isRegExp(h)&&z.isRegExp(n))return h.source===
n.source&&h.global===n.global&&h.ignoreCase===n.ignoreCase&&h.multiline===n.multiline;if(s!=="object")return false;if(h.length&&h.length!==n.length)return false;s=z.keys(h);var A=z.keys(n);if(s.length!=A.length)return false;for(var N in h)if(!(N in n)||!z.isEqual(h[N],n[N]))return false;return true};z.isEmpty=function(h){if(z.isArray(h)||z.isString(h))return h.length===0;for(var n in h)if(i.call(h,n))return false;return true};z.isElement=function(h){return!!(h&&h.nodeType==1)};z.isArray=K||function(h){return w.call(h)===
"[object Array]"};z.isArguments=function(h){return!!(h&&i.call(h,"callee"))};z.isFunction=function(h){return!!(h&&h.constructor&&h.call&&h.apply)};z.isString=function(h){return!!(h===""||h&&h.charCodeAt&&h.substr)};z.isNumber=function(h){return!!(h===0||h&&h.toExponential&&h.toFixed)};z.isNaN=function(h){return h!==h};z.isBoolean=function(h){return h===true||h===false};z.isDate=function(h){return!!(h&&h.getTimezoneOffset&&h.setUTCFullYear)};z.isRegExp=function(h){return!!(h&&h.test&&h.exec&&(h.ignoreCase||
h.ignoreCase===false))};z.isNull=function(h){return h===null};z.isUndefined=function(h){return h===void 0};z.noConflict=function(){k._=Q;return this};z.identity=function(h){return h};z.times=function(h,n,s){for(var A=0;A<h;A++)n.call(s,A)};z.mixin=function(h){fa(z.functions(h),function(n){D(n,z[n]=h[n])})};var l=0;z.uniqueId=function(h){var n=l++;return h?h+n:n};z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};z.template=function(h,n){var s=z.templateSettings;s="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+
h.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(s.interpolate,function(A,N){return"',"+N.replace(/\\'/g,"'")+",'"}).replace(s.evaluate||null,function(A,N){return"');"+N.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";s=new Function("obj",s);return n?s(n):s};var v=function(h){this._wrapped=h};z.prototype=v.prototype;var C=function(h,n){return n?z(h).chain():h},D=function(h,n){v.prototype[h]=function(){var s=
x.call(arguments);I.call(s,this._wrapped);return C(n.apply(z,s),this._chain)}};z.mixin(z);fa(["pop","push","reverse","shift","sort","splice","unshift"],function(h){var n=G[h];v.prototype[h]=function(){n.apply(this._wrapped,arguments);return C(this._wrapped,this._chain)}});fa(["concat","join","slice"],function(h){var n=G[h];v.prototype[h]=function(){return C(n.apply(this._wrapped,arguments),this._chain)}});v.prototype.chain=function(){this._chain=true;return this};v.prototype.value=function(){return this._wrapped}})();(function(){var k;k=typeof exports!=="undefined"?exports:this.Backbone={};k.VERSION="0.3.3";var Q=this._;if(!Q&&typeof require!=="undefined")Q=require("underscore")._;var S=this.jQuery||this.Zepto;k.emulateHTTP=false;k.emulateJSON=false;k.Events={bind:function(g,u){this._callbacks||(this._callbacks={});(this._callbacks[g]||(this._callbacks[g]=[])).push(u);return this},unbind:function(g,u){var H;if(g){if(H=this._callbacks)if(u){H=H[g];if(!H)return this;for(var J=0,W=H.length;J<W;J++)if(u===H[J]){H.splice(J,
1);break}}else H[g]=[]}else this._callbacks={};return this},trigger:function(g){var u,H,J,W;if(!(H=this._callbacks))return this;if(u=H[g]){J=0;for(W=u.length;J<W;J++)u[J].apply(this,Array.prototype.slice.call(arguments,1))}if(u=H.all){J=0;for(W=u.length;J<W;J++)u[J].apply(this,arguments)}return this}};k.Model=function(g,u){g||(g={});if(this.defaults)g=Q.extend({},this.defaults,g);this.attributes={};this._escapedAttributes={};this.cid=Q.uniqueId("c");this.set(g,{silent:true});this._previousAttributes=
Q.clone(this.attributes);if(u&&u.collection)this.collection=u.collection;this.initialize(g,u)};Q.extend(k.Model.prototype,k.Events,{_previousAttributes:null,_changed:false,initialize:function(){},toJSON:function(){return Q.clone(this.attributes)},get:function(g){return this.attributes[g]},escape:function(g){var u;if(u=this._escapedAttributes[g])return u;u=this.attributes[g];return this._escapedAttributes[g]=(u==null?"":u).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,
"&quot;")},set:function(g,u){u||(u={});if(!g)return this;if(g.attributes)g=g.attributes;var H=this.attributes,J=this._escapedAttributes;if(!u.silent&&this.validate&&!this._performValidation(g,u))return false;if("id"in g)this.id=g.id;for(var W in g){var aa=g[W];if(!Q.isEqual(H[W],aa)){H[W]=aa;delete J[W];if(!u.silent){this._changed=true;this.trigger("change:"+W,this,aa,u)}}}!u.silent&&this._changed&&this.change(u);return this},unset:function(g,u){u||(u={});var H={};H[g]=void 0;if(!u.silent&&this.validate&&
!this._performValidation(H,u))return false;delete this.attributes[g];delete this._escapedAttributes[g];if(!u.silent){this._changed=true;this.trigger("change:"+g,this,void 0,u);this.change(u)}return this},clear:function(g){g||(g={});var u=this.attributes,H={};for(attr in u)H[attr]=void 0;if(!g.silent&&this.validate&&!this._performValidation(H,g))return false;this.attributes={};this._escapedAttributes={};if(!g.silent){this._changed=true;for(attr in u)this.trigger("change:"+attr,this,void 0,g);this.change(g)}return this},
fetch:function(g){g||(g={});var u=this,H=F(g.error,u,g);(this.sync||k.sync)("read",this,function(J){if(!u.set(u.parse(J),g))return false;g.success&&g.success(u,J)},H);return this},save:function(g,u){u||(u={});if(g&&!this.set(g,u))return false;var H=this,J=F(u.error,H,u),W=this.isNew()?"create":"update";(this.sync||k.sync)(W,this,function(aa){if(!H.set(H.parse(aa),u))return false;u.success&&u.success(H,aa)},J);return this},destroy:function(g){g||(g={});var u=this,H=F(g.error,u,g);(this.sync||k.sync)("delete",
this,function(J){u.collection&&u.collection.remove(u);g.success&&g.success(u,J)},H);return this},url:function(){var g=y(this.collection);if(this.isNew())return g;return g+(g.charAt(g.length-1)=="/"?"":"/")+this.id},parse:function(g){return g},clone:function(){return new this.constructor(this)},isNew:function(){return!this.id},change:function(g){this.trigger("change",this,g);this._previousAttributes=Q.clone(this.attributes);this._changed=false},hasChanged:function(g){if(g)return this._previousAttributes[g]!=
this.attributes[g];return this._changed},changedAttributes:function(g){g||(g=this.attributes);var u=this._previousAttributes,H=false,J;for(J in g)if(!Q.isEqual(u[J],g[J])){H=H||{};H[J]=g[J]}return H},previous:function(g){if(!g||!this._previousAttributes)return null;return this._previousAttributes[g]},previousAttributes:function(){return Q.clone(this._previousAttributes)},_performValidation:function(g,u){var H=this.validate(g);if(H){u.error?u.error(this,H):this.trigger("error",this,H,u);return false}return true}});
k.Collection=function(g,u){u||(u={});if(u.comparator){this.comparator=u.comparator;delete u.comparator}this._boundOnModelEvent=Q.bind(this._onModelEvent,this);this._reset();g&&this.refresh(g,{silent:true});this.initialize(g,u)};Q.extend(k.Collection.prototype,k.Events,{model:k.Model,initialize:function(){},toJSON:function(){return this.map(function(g){return g.toJSON()})},add:function(g,u){if(Q.isArray(g))for(var H=0,J=g.length;H<J;H++)this._add(g[H],u);else this._add(g,u);return this},remove:function(g,
u){if(Q.isArray(g))for(var H=0,J=g.length;H<J;H++)this._remove(g[H],u);else this._remove(g,u);return this},get:function(g){if(g==null)return null;return this._byId[g.id!=null?g.id:g]},getByCid:function(g){return g&&this._byCid[g.cid||g]},at:function(g){return this.models[g]},sort:function(g){g||(g={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");this.models=this.sortBy(this.comparator);g.silent||this.trigger("refresh",this,g);return this},pluck:function(g){return Q.map(this.models,
function(u){return u.get(g)})},refresh:function(g,u){g||(g=[]);u||(u={});this._reset();this.add(g,{silent:true});u.silent||this.trigger("refresh",this,u);return this},fetch:function(g){g||(g={});var u=this,H=F(g.error,u,g);(this.sync||k.sync)("read",this,function(J){u.refresh(u.parse(J));g.success&&g.success(u,J)},H);return this},create:function(g,u){var H=this;u||(u={});if(g instanceof k.Model)g.collection=H;else g=new this.model(g,{collection:H});return g.save(null,{success:function(J,W){H.add(J);
u.success&&u.success(J,W)},error:u.error})},parse:function(g){return g},chain:function(){return Q(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_add:function(g,u){u||(u={});g instanceof k.Model||(g=new this.model(g,{collection:this}));var H=this.getByCid(g);if(H)throw Error(["Can't add the same model to a set twice",H.id]);this._byId[g.id]=g;this._byCid[g.cid]=g;g.collection=this;this.models.splice(this.comparator?this.sortedIndex(g,this.comparator):
this.length,0,g);g.bind("all",this._boundOnModelEvent);this.length++;u.silent||g.trigger("add",g,this,u);return g},_remove:function(g,u){u||(u={});g=this.getByCid(g)||this.get(g);if(!g)return null;delete this._byId[g.id];delete this._byCid[g.cid];delete g.collection;this.models.splice(this.indexOf(g),1);this.length--;u.silent||g.trigger("remove",g,this,u);g.unbind("all",this._boundOnModelEvent);return g},_onModelEvent:function(g,u){if(g==="change:id"){delete this._byId[u.previous("id")];this._byId[u.id]=
u}this.trigger.apply(this,arguments)}});Q.each(["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty"],function(g){k.Collection.prototype[g]=function(){return Q[g].apply(Q,[this.models].concat(Q.toArray(arguments)))}});k.Controller=function(g){g||(g={});if(g.routes)this.routes=g.routes;this._bindRoutes();
this.initialize(g)};var G=/:([\w\d]+)/g,K=/\*([\w\d]+)/g;Q.extend(k.Controller.prototype,k.Events,{initialize:function(){},route:function(g,u,H){k.history||(k.history=new k.History);Q.isRegExp(g)||(g=this._routeToRegExp(g));k.history.route(g,Q.bind(function(J){J=this._extractParameters(g,J);H.apply(this,J);this.trigger.apply(this,["route:"+u].concat(J))},this))},saveLocation:function(g){k.history.saveLocation(g)},_bindRoutes:function(){if(this.routes)for(var g in this.routes){var u=this.routes[g];
this.route(g,u,this[u])}},_routeToRegExp:function(g){g=g.replace(G,"([^/]*)").replace(K,"(.*?)");return RegExp("^"+g+"$")},_extractParameters:function(g,u){return g.exec(u).slice(1)}});k.History=function(){this.handlers=[];this.fragment=this.getFragment();Q.bindAll(this,"checkUrl")};var x=/^#*/;Q.extend(k.History.prototype,{interval:50,getFragment:function(g){return(g||window.location).hash.replace(x,"")},start:function(){var g=document.documentMode;if(g=S.browser.msie&&(!g||g<=7))this.iframe=S('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;
"onhashchange"in window&&!g?S(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval);return this.loadUrl()},route:function(g,u){this.handlers.push({route:g,callback:u})},checkUrl:function(){var g=this.getFragment();if(g==this.fragment&&this.iframe)g=this.getFragment(this.iframe.location);if(g==this.fragment||g==decodeURIComponent(this.fragment))return false;if(this.iframe)window.location.hash=this.iframe.location.hash=g;this.loadUrl()},loadUrl:function(){var g=this.fragment=
this.getFragment();return Q.any(this.handlers,function(u){if(u.route.test(g)){u.callback(g);return true}})},saveLocation:function(g){g=(g||"").replace(x,"");if(this.fragment!=g){window.location.hash=this.fragment=g;if(this.iframe&&g!=this.getFragment(this.iframe.location)){this.iframe.document.open().close();this.iframe.location.hash=g}}}});k.View=function(g){this._configure(g||{});this._ensureElement();this.delegateEvents();this.initialize(g)};var I=/^(\w+)\s*(.*)$/;Q.extend(k.View.prototype,k.Events,
{tagName:"div",$:function(g){return S(g,this.el)},initialize:function(){},render:function(){return this},remove:function(){S(this.el).remove();return this},make:function(g,u,H){g=document.createElement(g);u&&S(g).attr(u);H&&S(g).html(H);return g},delegateEvents:function(g){if(g||(g=this.events)){S(this.el).unbind();for(var u in g){var H=g[u],J=u.match(I),W=J[1];J=J[2];H=Q.bind(this[H],this);J===""?S(this.el).bind(W,H):S(this.el).delegate(J,W,H)}}},_configure:function(g){if(this.options)g=Q.extend({},
this.options,g);if(g.model)this.model=g.model;if(g.collection)this.collection=g.collection;if(g.el)this.el=g.el;if(g.id)this.id=g.id;if(g.className)this.className=g.className;if(g.tagName)this.tagName=g.tagName;this.options=g},_ensureElement:function(){if(!this.el){var g={};if(this.id)g.id=this.id;if(this.className)g["class"]=this.className;this.el=this.make(this.tagName,g)}}});var w=function(g,u){var H=m(this,g,u);H.extend=w;return H};k.Model.extend=k.Collection.extend=k.Controller.extend=k.View.extend=
w;var i={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};k.sync=function(g,u,H,J){var W=i[g];g=g==="create"||g==="update"?JSON.stringify(u.toJSON()):null;u={url:y(u),type:W,contentType:"application/json",data:g,dataType:"json",processData:false,success:H,error:J};if(k.emulateJSON){u.contentType="application/x-www-form-urlencoded";u.processData=true;u.data=g?{model:g}:{}}if(k.emulateHTTP)if(W==="PUT"||W==="DELETE"){if(k.emulateJSON)u.data._method=W;u.type="POST";u.beforeSend=function(aa){aa.setRequestHeader("X-HTTP-Method-Override",
W)}}S.ajax(u)};var r=function(){},m=function(g,u,H){var J;J=u&&u.hasOwnProperty("constructor")?u.constructor:function(){return g.apply(this,arguments)};r.prototype=g.prototype;J.prototype=new r;u&&Q.extend(J.prototype,u);H&&Q.extend(J,H);J.prototype.constructor=J;J.__super__=g.prototype;return J},y=function(g){if(!(g&&g.url))throw Error("A 'url' property or function must be specified");return Q.isFunction(g.url)?g.url():g.url},F=function(g,u,H){return function(J){g?g(u,J):u.trigger("error",u,J,H)}}})();window.debug=function(){function k(F){if(x&&(I||!G||!G.log))x.apply(Q,F)}for(var Q=this,S=Array.prototype.slice,G=Q.console,K={},x,I,w=9,i=["error","warn","info","debug","log"],r="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),m=r.length,y=[];--m>=0;)(function(F){K[F]=function(){w!==0&&G&&G[F]&&G[F].apply(G,arguments)}})(r[m]);for(m=i.length;--m>=0;)(function(F,g){K[g]=function(){var u=S.call(arguments),H=[g].concat(u);
y.push(H);k(H);if(G&&(w>0?w>F:i.length+w<=F))G.firebug?G[g].apply(Q,u):G[g]?G[g](u):G.log(u)}})(m,i[m]);K.setLevel=function(F){w=typeof F==="number"?F:9};K.setCallback=function(){var F=S.call(arguments),g=y.length,u=g;x=F.shift()||null;I=typeof F[0]==="boolean"?F.shift():false;for(u-=typeof F[0]==="number"?F.shift():g;u<g;)k(y[u++])};return K}();(function(k){function Q(l,v,C,D){D={data:D||D===0||D===false?D:v?v.data:{},_wrap:v?v._wrap:null,tmpl:null,parent:v||null,nodes:[],calls:i,nest:r,wrap:m,html:y,update:F};l&&k.extend(D,l,{nodes:[],parent:v});if(C){D.tmpl=C;D._ctnt=D._ctnt||D.tmpl(k,D);D.key=++fa;(B.length?W:J)[fa]=D}return D}function S(l,v,C){var D;C=C?k.map(C,function(h){return typeof h==="string"?l.key?h.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+u+'="'+l.key+'" $2'):h:S(h,l,h._ctnt)}):l;if(v)return C;C=C.join("");
C.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(h,n,s,A){D=k(s).get();w(D);if(n)D=G(n).concat(D);if(A)D=D.concat(G(A))});return D?D:G(C)}function G(l){var v=document.createElement("div");v.innerHTML=l;return k.makeArray(v.childNodes)}function K(l){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+k.trim(l).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,
function(v,C,D,h,n,s,A){v=k.tmpl.tag[D];if(!v)throw"Unknown template tag: "+D;D=v._default||[];if(s&&!/\w$/.test(n)){n+=s;s=""}if(n){n=I(n);A=A?","+I(A)+")":s?")":"";A=s?n.indexOf(".")>-1?n+I(s):"("+n+").call($item"+A:n;s=s?A:"(typeof("+n+")==='function'?("+n+").call($item):("+n+"))"}else s=A=D.$1||"null";h=I(h);return"');"+v[C?"close":"open"].split("$notnull_1").join(n?"typeof("+n+")!=='undefined' && ("+n+")!=null":"true").split("$1a").join(s).split("$1").join(A).split("$2").join(h||D.$2||"")+"__.push('"})+
"');}return __;")}function x(l,v){l._wrap=S(l,true,k.isArray(v)?v:[H.test(v)?v:k(v).html()]).join("")}function I(l){return l?l.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function w(l){function v(P){function X(da){da+=C;ca=n[da]=n[da]||Q(ca,J[ca.parent.key+C]||ca.parent)}var ja,Y=P,ca,ka;if(ka=P.getAttribute(u)){for(;Y.parentNode&&(Y=Y.parentNode).nodeType===1&&!(ja=Y.getAttribute(u)););if(ja!==ka){Y=Y.parentNode?Y.nodeType===11?0:Y.getAttribute(u)||0:0;if(!(ca=J[ka])){ca=W[ka];ca=Q(ca,J[Y]||W[Y]);
ca.key=++fa;J[fa]=ca}ha&&X(ka)}P.removeAttribute(u)}else if(ha&&(ca=k.data(P,"tmplItem"))){X(ca.key);J[ca.key]=ca;Y=(Y=k.data(P.parentNode,"tmplItem"))?Y.key:0}if(ca){for(ja=ca;ja&&ja.key!=Y;){ja.nodes.push(P);ja=ja.parent}delete ca._ctnt;delete ca._wrap;k.data(P,"tmplItem",ca)}}var C="_"+ha,D,h,n={},s,A,N;s=0;for(A=l.length;s<A;s++)if((D=l[s]).nodeType===1){h=D.getElementsByTagName("*");for(N=h.length-1;N>=0;N--)v(h[N]);v(D)}}function i(l,v,C,D){if(!l)return B.pop();B.push({_:l,tmpl:v,item:this,
data:C,options:D})}function r(l,v,C){return k.tmpl(k.template(l),v,C,this)}function m(l,v){var C=l.options||{};C.wrapped=v;return k.tmpl(k.template(l.tmpl),l.data,C,l.item)}function y(l,v){var C=this._wrap;return k.map(k(k.isArray(C)?C.join(""):C).filter(l||"*"),function(D){if(v)D=D.innerText||D.textContent;else{var h;if(!(h=D.outerHTML)){h=document.createElement("div");h.appendChild(D.cloneNode(true));h=h.innerHTML}D=h}return D})}function F(){var l=this.nodes;k.tmpl(null,null,null,this).insertBefore(l[0]);
k(l).remove()}var g=k.fn.domManip,u="_tmplitem",H=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,J={},W={},aa,z={key:0,data:{}},fa=0,ha=0,B=[];k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,v){k.fn[l]=function(C){var D=[];C=k(C);var h,n,s;h=this.length===1&&this[0].parentNode;aa=J||{};if(h&&h.nodeType===11&&h.childNodes.length===1&&C.length===1){C[v](this[0]);D=this}else{n=0;for(s=C.length;n<s;n++){ha=n;h=(n>0?this.clone(true):this).get();
k(C[n])[v](h);D=D.concat(h)}ha=0;D=this.pushStack(D,l,C.selector)}C=aa;aa=null;k.tmpl.complete(C);return D}});k.fn.extend({tmpl:function(l,v,C){return k.tmpl(this[0],l,v,C)},tmplItem:function(){return k.tmplItem(this[0])},template:function(l){return k.template(l,this[0])},domManip:function(l,v,C){if(l[0]&&k.isArray(l[0])){for(var D=k.makeArray(arguments),h=l[0],n=h.length,s=0,A;s<n&&!(A=k.data(h[s++],"tmplItem")););if(A&&ha)D[2]=function(N){k.tmpl.afterManip(this,N,C)};g.apply(this,D)}else g.apply(this,
arguments);ha=0;aa||k.tmpl.complete(J);return this}});k.extend({tmpl:function(l,v,C,D){var h=!D;if(h){D=z;l=k.template[l]||k.template(null,l);W={}}else if(!l){l=D.tmpl;J[D.key]=D;D.nodes=[];D.wrapped&&x(D,D.wrapped);return k(S(D,null,D.tmpl(k,D)))}if(!l)return[];if(typeof v==="function")v=v.call(D||{});C&&C.wrapped&&x(C,C.wrapped);v=k.isArray(v)?k.map(v,function(n){return n?Q(C,D,l,n):null}):[Q(C,D,l,v)];return h?k(S(D,null,v)):v},tmplItem:function(l){var v;if(l instanceof k)l=l[0];for(;l&&l.nodeType===
1&&!(v=k.data(l,"tmplItem"))&&(l=l.parentNode););return v||z},template:function(l,v){if(v){if(typeof v==="string")v=K(v);else if(v instanceof k)v=v[0]||{};if(v.nodeType)v=k.data(v,"tmpl")||k.data(v,"tmpl",K(v.innerHTML));return typeof l==="string"?k.template[l]=v:v}return l?typeof l!=="string"?k.template(null,l):k.template[l]||k.template(null,H.test(l)?l:k(l)):null},encode:function(l){return(""+l).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});
k.extend(k.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},
"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){J={}},afterManip:function(l,v,C){var D=v.nodeType===11?k.makeArray(v.childNodes):v.nodeType===1?[v]:[];C.call(l,v);w(D);ha++}})})(jQuery);(function(k){function Q(G){var K=G||window.event,x=[].slice.call(arguments,1),I=0,w=0,i=0;G=k.event.fix(K);G.type="mousewheel";if(G.wheelDelta)I=G.wheelDelta/120;if(G.detail)I=-G.detail/3;i=I;if(K.axis!==undefined&&K.axis===K.HORIZONTAL_AXIS){i=0;w=-1*I}if(K.wheelDeltaY!==undefined)i=K.wheelDeltaY/120;if(K.wheelDeltaX!==undefined)w=-1*K.wheelDeltaX/120;x.unshift(G,I,w,i);return k.event.handle.apply(this,x)}var S=["DOMMouseScroll","mousewheel"];k.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var G=
S.length;G;)this.addEventListener(S[--G],Q,false);else this.onmousewheel=Q},teardown:function(){if(this.removeEventListener)for(var G=S.length;G;)this.removeEventListener(S[--G],Q,false);else this.onmousewheel=null}};k.fn.extend({mousewheel:function(G){return G?this.bind("mousewheel",G):this.trigger("mousewheel")},unmousewheel:function(G){return this.unbind("mousewheel",G)}})})(jQuery);(function(k){function Q(){if(w){window.clearTimeout(i);w=false}}function S(){if(!w){w=true;i=window.setTimeout("doRightClick();",800)}}function G(m){var y="";if(!(m.touches.length>1)){switch(m.type){case "gesturestart":alert("gesturestart");m.preventDefault();break;case "touchstart":if(k(m.changedTouches[0].target).is("select"))return;y=m.changedTouches[0];var F="mouseover",g=document.createEvent("MouseEvent");g.initMouseEvent(F,true,true,window,1,y.screenX,y.screenY,y.clientX,y.clientY,false,false,
false,false,0,null);y.target.dispatchEvent(g);F="mousedown";g=document.createEvent("MouseEvent");g.initMouseEvent(F,true,true,window,1,y.screenX,y.screenY,y.clientX,y.clientY,false,false,false,false,0,null);y.target.dispatchEvent(g);if(x){window.clearTimeout(I);if(y.target==K){K=null;x=false;F="click";g=document.createEvent("MouseEvent");g.initMouseEvent(F,true,true,window,1,y.screenX,y.screenY,y.clientX,y.clientY,false,false,false,false,0,null);y.target.dispatchEvent(g);F="dblclick";g=document.createEvent("MouseEvent");
g.initMouseEvent(F,true,true,window,1,y.screenX,y.screenY,y.clientX,y.clientY,false,false,false,false,0,null);y.target.dispatchEvent(g)}else{K=y.target;x=true;I=window.setTimeout("cancelTap();",600);S(m)}}else{K=y.target;x=true;I=window.setTimeout("cancelTap();",600);S(m)}m.preventDefault();return false;case "touchmove":Q();y="mousemove";m.preventDefault();break;case "touchend":if(r){r=false;m.preventDefault();return false}Q();y="mouseup";break;default:return}m=m.changedTouches[0];F=document.createEvent("MouseEvent");
F.initMouseEvent(y,true,true,window,1,m.screenX,m.screenY,m.clientX,m.clientY,false,false,false,false,0,null);m.target.dispatchEvent(F);if(y=="mouseup"&&x&&m.target==K){F=document.createEvent("MouseEvent");F.initMouseEvent("click",true,true,window,1,m.screenX,m.screenY,m.clientX,m.clientY,false,false,false,false,0,null);m.target.dispatchEvent(F)}}}k.extend(k.support,{touch:typeof Touch=="object"});k.fn.addTouch=function(){k.support.touch&&this.each(function(m,y){y.addEventListener("touchstart",G,
false);y.addEventListener("touchmove",G,false);y.addEventListener("touchend",G,false);y.addEventListener("touchcancel",G,false)})};var K=null,x=false,I=null,w=false,i=null,r=false})(jQuery);(function(){function k(){if(k.is(arguments[0],P)){for(var a=arguments[0],b=Ma[J](k,a.splice(0,3+k.is(a[0],N))),c=b.set(),e=0,f=a[l];e<f;e++){var d=a[e]||{};w[m](d.type)&&c[Y](b[d.type]().attr(d))}return c}return Ma[J](k,arguments)}function Q(){for(var a=[],b=0;b<32;b++)a[b]=(~~(C.random()*16))[X](16);a[12]=4;a[16]=(a[16]&3|8)[X](16);return"r-"+a[B]("")}function S(a,b,c){function e(){var f=Array[r].slice.call(arguments,0),d=f[B]("\u25ba"),j=e.cache=e.cache||{},o=e.count=e.count||[];if(j[m](d))return c?
c(j[d]):j[d];o[l]>=1E3&&delete j[o.shift()];o[Y](d);j[d]=a[J](b,f);return c?c(j[d]):j[d]}return e}function G(){return this.x+aa+this.y}function K(a){return function(b,c,e,f){var d={back:a};k.is(e,"function")?f=e:d.rot=e;b&&b.constructor==ga&&(b=b.attrs.path);b&&(d.along=b);return this.animate(d,c,f)}}function x(a,b,c,e,f,d){function j(R,ba){var T,O,V,ia;V=R;for(O=0;O<8;O++){ia=((q*V+p)*V+o)*V-R;if(n(ia)<ba)return V;T=(3*q*V+2*p)*V+o;if(n(T)<1.0E-6)break;V-=ia/T}T=0;O=1;V=R;if(V<T)return T;if(V>O)return O;
for(;T<O;){ia=((q*V+p)*V+o)*V;if(n(ia-R)<ba)break;R>ia?T=V:O=V;V=(O-T)/2+T}return V}var o=3*b,p=3*(e-b)-o,q=1-o-p,E=3*c,L=3*(f-c)-E,M=1-E-L;return function(R,ba){var T=j(R,ba);return((M*T+L)*T+E)*T}(a,1/(200*d))}k.version="1.5.2";var I=/[, ]+/,w={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},i=/\{(\d+)\}/g,r="prototype",m="hasOwnProperty",y=document,F=window,g={was:Object[r][m].call(F,"Raphael"),is:F.Raphael},u=function(){this.customAttributes={}},H,J="apply",W="createTouch"in y,aa=" ",z=String,
fa="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend".split(aa),ha={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},B="join",l="length",v=z[r].toLowerCase,C=Math,D=C.max,h=C.min,n=C.abs,s=C.pow,A=C.PI,N="number",P="array",X="toString",ja=Object[r][X],Y="push",ca=/^url\(['"]?([^\)]+?)['"]?\)$/i,ka=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
da={NaN:1,Infinity:1,"-Infinity":1},qa=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Z=C.round,U=parseFloat,ma=parseInt,va=z[r].toUpperCase,Da={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt",
"stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},Na={along:"along",blur:N,"clip-rect":"csv",cx:N,cy:N,fill:"colour","fill-opacity":N,"font-size":N,height:N,opacity:N,path:"path",r:N,rotation:"csv",rx:N,ry:N,scale:"csv",stroke:"colour","stroke-opacity":N,"stroke-width":N,translation:"csv",width:N,x:N,y:N},tb=/^(from|to|\d+%?)$/,Oa=/\s*,\s*/,ub={hs:1,rg:1},vb=/,?([achlmqrstvxz]),?/gi,
wb=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,xb=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,Ya=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,yb=function(a,b){return a.key-b.key};k.type=F.SVGAngle||y.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(k.type=="VML"){var sa=y.createElement("div");sa.innerHTML='<v:shape adj="1"/>';sa=sa.firstChild;sa.style.behavior="url(#default#VML)";if(!(sa&&typeof sa.adj=="object"))return k.type=null;sa=null}k.svg=
!(k.vml=k.type=="VML");u[r]=k[r];H=u[r];k._id=0;k._oid=0;k.fn={};k.is=function(a,b){b=v.call(b);if(b=="finite")return!da[m](+a);return b=="null"&&a===null||b==typeof a||b=="object"&&a===Object(a)||b=="array"&&Array.isArray&&Array.isArray(a)||ja.call(a).slice(8,-1).toLowerCase()==b};k.angle=function(a,b,c,e,f,d){if(f==null){a-=c;b-=e;if(!a&&!b)return 0;return((a<0)*180+C.atan(-b/-a)*180/A+360)%360}return k.angle(a,b,f,d)-k.angle(c,e,f,d)};k.rad=function(a){return a%360*A/180};k.deg=function(a){return a*
180/A%360};k.snapTo=function(a,b,c){c=k.is(c,"finite")?c:10;if(k.is(a,P))for(var e=a.length;e--;){if(n(a[e]-b)<=c)return a[e]}else{a=+a;e=b%a;if(e<c)return b-e;if(e>a-c)return b-e+a}return b};k.setWindow=function(a){F=a;y=F.document};var Ea=function(a){if(k.vml){var b=/^\s+|\s+$/g,c;try{var e=new ActiveXObject("htmlfile");e.write("<body>");e.close();c=e.body}catch(f){c=createPopup().document.body}var d=c.createTextRange();Ea=S(function(o){try{c.style.color=z(o).replace(b,"");var p=d.queryCommandValue("ForeColor");
return"#"+("000000"+((p&255)<<16|p&65280|(p&16711680)>>>16)[X](16)).slice(-6)}catch(q){return"none"}})}else{var j=y.createElement("i");j.title="Rapha\u00ebl Colour Picker";j.style.display="none";y.body.appendChild(j);Ea=S(function(o){j.style.color=o;return y.defaultView.getComputedStyle(j,"").getPropertyValue("color")})}return Ea(a)},Za=function(){return"hsb("+[this.h,this.s,this.b]+")"},zb=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ab=function(){return this.hex};k.hsb2rgb=function(a,b,c,
e){if(k.is(a,"object")&&"h"in a&&"s"in a&&"b"in a){c=a.b;b=a.s;a=a.h;e=a.o}return k.hsl2rgb(a,b,c/2,e)};k.hsl2rgb=function(a,b,c,e){if(k.is(a,"object")&&"h"in a&&"s"in a&&"l"in a){c=a.l;b=a.s;a=a.h}if(a>1||b>1||c>1){a/=360;b/=100;c/=100}var f={},d=["r","g","b"],j;if(b){c<0.5?j=c*(1+b):j=c+b-c*b;b=2*c-j;for(var o=0;o<3;o++){c=a+1/3*-(o-1);c<0&&c++;c>1&&c--;c*6<1?f[d[o]]=b+(j-b)*6*c:c*2<1?f[d[o]]=j:c*3<2?f[d[o]]=b+(j-b)*(2/3-c)*6:f[d[o]]=b}}else f={r:c,g:c,b:c};f.r*=255;f.g*=255;f.b*=255;f.hex="#"+
(16777216|f.b|f.g<<8|f.r<<16).toString(16).slice(1);k.is(e,"finite")&&(f.opacity=e);f.toString=Ab;return f};k.rgb2hsb=function(a,b,c){if(b==null&&k.is(a,"object")&&"r"in a&&"g"in a&&"b"in a){c=a.b;b=a.g;a=a.r}if(b==null&&k.is(a,"string")){c=k.getRGB(a);a=c.r;b=c.g;c=c.b}if(a>1||b>1||c>1){a/=255;b/=255;c/=255}var e=D(a,b,c),f=h(a,b,c),d;if(f==e)return{h:0,s:0,b:e,toString:Za};f=e-f;a==e?d=(b-c)/f:b==e?d=2+(c-a)/f:d=4+(a-b)/f;d/=6;d<0&&d++;d>1&&d--;return{h:d,s:f/e,b:e,toString:Za}};k.rgb2hsl=function(a,
b,c){if(b==null&&k.is(a,"object")&&"r"in a&&"g"in a&&"b"in a){c=a.b;b=a.g;a=a.r}if(b==null&&k.is(a,"string")){c=k.getRGB(a);a=c.r;b=c.g;c=c.b}if(a>1||b>1||c>1){a/=255;b/=255;c/=255}var e=D(a,b,c),f=h(a,b,c),d,j=(e+f)/2;if(f==e)a={h:0,s:0,l:j};else{var o=e-f;a==e?d=(b-c)/o:b==e?d=2+(c-a)/o:d=4+(a-b)/o;d/=6;d<0&&d++;d>1&&d--;a={h:d,s:j<0.5?o/(e+f):o/(2-e-f),l:j}}a.toString=zb;return a};k._path2string=function(){return this.join(",").replace(vb,"$1")};k.getRGB=S(function(a){if(!a||(a=z(a)).indexOf("-")+
1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if(a=="none")return{r:-1,g:-1,b:-1,hex:"none"};!(ub[m](a.toLowerCase().substring(0,2))||a.charAt()=="#")&&(a=Ea(a));var b,c,e,f,d;if(a=a.match(ka)){if(a[2]){e=ma(a[2].substring(5),16);c=ma(a[2].substring(3,5),16);b=ma(a[2].substring(1,3),16)}if(a[3]){e=ma((d=a[3].charAt(3))+d,16);c=ma((d=a[3].charAt(2))+d,16);b=ma((d=a[3].charAt(1))+d,16)}if(a[4]){d=a[4].split(Oa);b=U(d[0]);d[0].slice(-1)=="%"&&(b*=2.55);c=U(d[1]);d[1].slice(-1)=="%"&&(c*=2.55);e=U(d[2]);
d[2].slice(-1)=="%"&&(e*=2.55);a[1].toLowerCase().slice(0,4)=="rgba"&&(f=U(d[3]));d[3]&&d[3].slice(-1)=="%"&&(f/=100)}if(a[5]){d=a[5].split(Oa);b=U(d[0]);d[0].slice(-1)=="%"&&(b*=2.55);c=U(d[1]);d[1].slice(-1)=="%"&&(c*=2.55);e=U(d[2]);d[2].slice(-1)=="%"&&(e*=2.55);(d[0].slice(-3)=="deg"||d[0].slice(-1)=="\u00b0")&&(b/=360);a[1].toLowerCase().slice(0,4)=="hsba"&&(f=U(d[3]));d[3]&&d[3].slice(-1)=="%"&&(f/=100);return k.hsb2rgb(b,c,e,f)}if(a[6]){d=a[6].split(Oa);b=U(d[0]);d[0].slice(-1)=="%"&&(b*=
2.55);c=U(d[1]);d[1].slice(-1)=="%"&&(c*=2.55);e=U(d[2]);d[2].slice(-1)=="%"&&(e*=2.55);(d[0].slice(-3)=="deg"||d[0].slice(-1)=="\u00b0")&&(b/=360);a[1].toLowerCase().slice(0,4)=="hsla"&&(f=U(d[3]));d[3]&&d[3].slice(-1)=="%"&&(f/=100);return k.hsl2rgb(b,c,e,f)}a={r:b,g:c,b:e};a.hex="#"+(16777216|e|c<<8|b<<16).toString(16).slice(1);k.is(f,"finite")&&(a.opacity=f);return a}return{r:-1,g:-1,b:-1,hex:"none",error:1}},k);k.getColor=function(a){a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75};
var b=this.hsb2rgb(a.h,a.s,a.b);a.h+=0.075;if(a.h>1){a.h=0;a.s-=0.2;a.s<=0&&(this.getColor.start={h:0,s:1,b:a.b})}return b.hex};k.getColor.reset=function(){delete this.start};k.parsePathString=S(function(a){if(!a)return null;var b={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=[];k.is(a,P)&&k.is(a[0],P)&&(c=Fa(a));c[l]||z(a).replace(wb,function(e,f,d){var j=[];e=v.call(f);d.replace(xb,function(o,p){p&&j[Y](+p)});if(e=="m"&&j[l]>2){c[Y]([f].concat(j.splice(0,2)));e="l";f=f=="m"?"l":"L"}for(;j[l]>=b[e];){c[Y]([f].concat(j.splice(0,
b[e])));if(!b[e])break}});c[X]=k._path2string;return c});k.findDotsAtSegment=function(a,b,c,e,f,d,j,o,p){var q=1-p,E=s(q,3)*a+s(q,2)*3*p*c+q*3*p*p*f+s(p,3)*j;q=s(q,3)*b+s(q,2)*3*p*e+q*3*p*p*d+s(p,3)*o;var L=a+2*p*(c-a)+p*p*(f-2*c+a),M=b+2*p*(e-b)+p*p*(d-2*e+b),R=c+2*p*(f-c)+p*p*(j-2*f+c),ba=e+2*p*(d-e)+p*p*(o-2*d+e);a=(1-p)*a+p*c;b=(1-p)*b+p*e;f=(1-p)*f+p*j;d=(1-p)*d+p*o;o=90-C.atan((L-R)/(M-ba))*180/A;(L>R||M<ba)&&(o+=180);return{x:E,y:q,m:{x:L,y:M},n:{x:R,y:ba},start:{x:a,y:b},end:{x:f,y:d},alpha:o}};
var Ha=S(function(a){if(!a)return{x:0,y:0,width:0,height:0};a=Ga(a);for(var b=0,c=0,e=[],f=[],d,j=0,o=a[l];j<o;j++){d=a[j];if(d[0]=="M"){b=d[1];c=d[2];e[Y](b);f[Y](c)}else{b=Bb(b,c,d[1],d[2],d[3],d[4],d[5],d[6]);e=e.concat(b.min.x,b.max.x);f=f.concat(b.min.y,b.max.y);b=d[5];c=d[6]}}a=h[J](0,e);d=h[J](0,f);return{x:a,y:d,width:D[J](0,e)-a,height:D[J](0,f)-d}}),Fa=function(a){var b=[];if(!k.is(a,P)||!k.is(a&&a[0],P))a=k.parsePathString(a);for(var c=0,e=a[l];c<e;c++){b[c]=[];for(var f=0,d=a[c][l];f<
d;f++)b[c][f]=a[c][f]}b[X]=k._path2string;return b},Pa=S(function(a){if(!k.is(a,P)||!k.is(a&&a[0],P))a=k.parsePathString(a);var b=[],c=0,e=0,f=0,d=0,j=0;if(a[0][0]=="M"){c=a[0][1];e=a[0][2];f=c;d=e;j++;b[Y](["M",c,e])}for(var o=a[l];j<o;j++){var p=b[j]=[],q=a[j];if(q[0]!=v.call(q[0])){p[0]=v.call(q[0]);switch(p[0]){case "a":p[1]=q[1];p[2]=q[2];p[3]=q[3];p[4]=q[4];p[5]=q[5];p[6]=+(q[6]-c).toFixed(3);p[7]=+(q[7]-e).toFixed(3);break;case "v":p[1]=+(q[1]-e).toFixed(3);break;case "m":f=q[1];d=q[2];default:for(var E=
1,L=q[l];E<L;E++)p[E]=+(q[E]-(E%2?c:e)).toFixed(3)}}else{b[j]=[];if(q[0]=="m"){f=q[1]+c;d=q[2]+e}p=0;for(E=q[l];p<E;p++)b[j][p]=q[p]}q=b[j][l];switch(b[j][0]){case "z":c=f;e=d;break;case "h":c+=+b[j][q-1];break;case "v":e+=+b[j][q-1];break;default:c+=+b[j][q-2];e+=+b[j][q-1]}}b[X]=k._path2string;return b},0,Fa),za=S(function(a){if(!k.is(a,P)||!k.is(a&&a[0],P))a=k.parsePathString(a);var b=[],c=0,e=0,f=0,d=0,j=0;if(a[0][0]=="M"){c=+a[0][1];e=+a[0][2];f=c;d=e;j++;b[0]=["M",c,e]}for(var o=a[l];j<o;j++){var p=
b[j]=[],q=a[j];if(q[0]!=va.call(q[0])){p[0]=va.call(q[0]);switch(p[0]){case "A":p[1]=q[1];p[2]=q[2];p[3]=q[3];p[4]=q[4];p[5]=q[5];p[6]=+(q[6]+c);p[7]=+(q[7]+e);break;case "V":p[1]=+q[1]+e;break;case "H":p[1]=+q[1]+c;break;case "M":f=+q[1]+c;d=+q[2]+e;default:for(var E=1,L=q[l];E<L;E++)p[E]=+q[E]+(E%2?c:e)}}else{E=0;for(L=q[l];E<L;E++)b[j][E]=q[E]}switch(p[0]){case "Z":c=f;e=d;break;case "H":c=p[1];break;case "V":e=p[1];break;case "M":f=b[j][b[j][l]-2];d=b[j][b[j][l]-1];default:c=b[j][b[j][l]-2];e=
b[j][b[j][l]-1]}}b[X]=k._path2string;return b},null,Fa),$a=function(a,b,c,e,f,d){var j=1/3,o=2/3;return[j*a+o*c,j*b+o*e,j*f+o*c,j*d+o*e,f,d]},ab=function(a,b,c,e,f,d,j,o,p,q){var E=A*120/180,L=A/180*(+f||0),M=[],R,ba=S(function(na,oa,la){var xa=na*C.cos(la)-oa*C.sin(la);na=na*C.sin(la)+oa*C.cos(la);return{x:xa,y:na}});if(q){V=q[0];R=q[1];d=q[2];O=q[3]}else{R=ba(a,b,-L);a=R.x;b=R.y;R=ba(o,p,-L);o=R.x;p=R.y;C.cos(A/180*f);C.sin(A/180*f);R=(a-o)/2;V=(b-p)/2;O=R*R/(c*c)+V*V/(e*e);if(O>1){O=C.sqrt(O);
c*=O;e*=O}O=c*c;var T=e*e;O=(d==j?-1:1)*C.sqrt(n((O*T-O*V*V-T*R*R)/(O*V*V+T*R*R)));d=O*c*V/e+(a+o)/2;var O=O*-e*R/c+(b+p)/2,V=C.asin(((b-O)/e).toFixed(9));R=C.asin(((p-O)/e).toFixed(9));V=a<d?A-V:V;R=o<d?A-R:R;V<0&&(V=A*2+V);R<0&&(R=A*2+R);j&&V>R&&(V-=A*2);!j&&R>V&&(R-=A*2)}if(n(R-V)>E){M=R;T=o;var ia=p;R=V+E*(j&&R>V?1:-1);o=d+c*C.cos(R);p=O+e*C.sin(R);M=ab(o,p,c,e,f,0,j,T,ia,[R,M,d,O])}d=R-V;f=C.cos(V);E=C.sin(V);j=C.cos(R);R=C.sin(R);d=C.tan(d/4);c=4/3*c*d;d*=4/3*e;e=[a,b];a=[a+c*E,b-d*f];b=[o+
c*R,p-d*j];o=[o,p];a[0]=2*e[0]-a[0];a[1]=2*e[1]-a[1];if(q)return[a,b,o].concat(M);M=[a,b,o].concat(M)[B]().split(",");q=[];o=0;for(p=M[l];o<p;o++)q[o]=o%2?ba(M[o-1],M[o],L).y:ba(M[o],M[o+1],L).x;return q},Ia=function(a,b,c,e,f,d,j,o,p){var q=1-p;return{x:s(q,3)*a+s(q,2)*3*p*c+q*3*p*p*f+s(p,3)*j,y:s(q,3)*b+s(q,2)*3*p*e+q*3*p*p*d+s(p,3)*o}},Bb=S(function(a,b,c,e,f,d,j,o){var p=f-2*c+a-(j-2*f+c),q=2*(c-a)-2*(f-c),E=a-c,L=(-q+C.sqrt(q*q-4*p*E))/2/p;p=(-q-C.sqrt(q*q-4*p*E))/2/p;var M=[b,o],R=[a,j];n(L)>
"1e12"&&(L=0.5);n(p)>"1e12"&&(p=0.5);if(L>0&&L<1){L=Ia(a,b,c,e,f,d,j,o,L);R[Y](L.x);M[Y](L.y)}if(p>0&&p<1){L=Ia(a,b,c,e,f,d,j,o,p);R[Y](L.x);M[Y](L.y)}p=d-2*e+b-(o-2*d+e);q=2*(e-b)-2*(d-e);E=b-e;L=(-q+C.sqrt(q*q-4*p*E))/2/p;p=(-q-C.sqrt(q*q-4*p*E))/2/p;n(L)>"1e12"&&(L=0.5);n(p)>"1e12"&&(p=0.5);if(L>0&&L<1){L=Ia(a,b,c,e,f,d,j,o,L);R[Y](L.x);M[Y](L.y)}if(p>0&&p<1){L=Ia(a,b,c,e,f,d,j,o,p);R[Y](L.x);M[Y](L.y)}return{min:{x:h[J](0,R),y:h[J](0,M)},max:{x:D[J](0,R),y:D[J](0,M)}}}),Ga=S(function(a,b){var c=
za(a),e=b&&za(b),f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},d={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},j=function(T,O){var V,ia;if(!T)return["C",O.x,O.y,O.x,O.y,O.x,O.y];!(T[0]in{T:1,Q:1})&&(O.qx=O.qy=null);switch(T[0]){case "M":O.X=T[1];O.Y=T[2];break;case "A":T=["C"].concat(ab[J](0,[O.x,O.y].concat(T.slice(1))));break;case "S":V=O.x+(O.x-(O.bx||O.x));ia=O.y+(O.y-(O.by||O.y));T=["C",V,ia].concat(T.slice(1));break;case "T":O.qx=O.x+(O.x-(O.qx||O.x));O.qy=O.y+(O.y-(O.qy||O.y));T=["C"].concat($a(O.x,
O.y,O.qx,O.qy,T[1],T[2]));break;case "Q":O.qx=T[1];O.qy=T[2];T=["C"].concat($a(O.x,O.y,T[1],T[2],T[3],T[4]));break;case "L":T=["C"].concat([O.x,O.y,T[1],T[2],T[1],T[2]]);break;case "H":T=["C"].concat([O.x,O.y,T[1],O.y,T[1],O.y]);break;case "V":T=["C"].concat([O.x,O.y,O.x,T[1],O.x,T[1]]);break;case "Z":T=["C"].concat([O.x,O.y,O.X,O.Y,O.X,O.Y])}return T},o=function(T,O){if(T[O][l]>7){T[O].shift();for(var V=T[O];V[l];)T.splice(O++,0,["C"].concat(V.splice(0,6)));T.splice(O,1);E=D(c[l],e&&e[l]||0)}},p=
function(T,O,V,ia,na){if(T&&O&&T[na][0]=="M"&&O[na][0]!="M"){O.splice(na,0,["M",ia.x,ia.y]);V.bx=0;V.by=0;V.x=T[na][1];V.y=T[na][2];E=D(c[l],e&&e[l]||0)}},q=0,E=D(c[l],e&&e[l]||0);for(;q<E;q++){c[q]=j(c[q],f);o(c,q);e&&(e[q]=j(e[q],d));e&&o(e,q);p(c,e,f,d,q);p(e,c,d,f,q);var L=c[q],M=e&&e[q],R=L[l],ba=e&&M[l];f.x=L[R-2];f.y=L[R-1];f.bx=U(L[R-4])||f.x;f.by=U(L[R-3])||f.y;d.bx=e&&(U(M[ba-4])||d.x);d.by=e&&(U(M[ba-3])||d.y);d.x=e&&M[ba-2];d.y=e&&M[ba-1]}return e?[c,e]:c},null,Fa),bb=S(function(a){for(var b=
[],c=0,e=a[l];c<e;c++){var f={},d=a[c].match(/^([^:]*):?([\d\.]*)/);f.color=k.getRGB(d[1]);if(f.color.error)return null;f.color=f.color.hex;d[2]&&(f.offset=d[2]+"%");b[Y](f)}c=1;for(e=b[l]-1;c<e;c++)if(!b[c].offset){a=U(b[c-1].offset||0);d=0;for(f=c+1;f<e;f++)if(b[f].offset){d=b[f].offset;break}if(!d){d=100;f=e}d=U(d);for(d=(d-a)/(f-c+1);c<f;c++){a+=d;b[c].offset=a+"%"}}return b}),cb=function(a,b,c,e){if(k.is(a,"string")||k.is(a,"object")){a=k.is(a,"string")?y.getElementById(a):a;if(a.tagName)return b==
null?{container:a,width:a.style.pixelWidth||a.offsetWidth,height:a.style.pixelHeight||a.offsetHeight}:{container:a,width:b,height:c}}else return{container:1,x:a,y:b,width:c,height:e}},Qa=function(a,b){var c=this,e;for(e in b)if(b[m](e)&&!(e in a))switch(typeof b[e]){case "function":(function(f){a[e]=a===c?f:function(){return f[J](c,arguments)}})(b[e]);break;case "object":a[e]=a[e]||{};Qa.call(this,a[e],b[e]);break;default:a[e]=b[e]}},ya=function(a,b){a==b.top&&(b.top=a.prev);a==b.bottom&&(b.bottom=
a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)},db=function(a,b){if(b.top!==a){ya(a,b);a.next=null;a.prev=b.top;b.top.next=a;b.top=a}},eb=function(a,b){if(b.bottom!==a){ya(a,b);a.next=b.bottom;a.prev=null;b.bottom.prev=a;b.bottom=a}},fb=function(a,b,c){ya(a,c);b==c.top&&(c.top=a);b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a},gb=function(a,b,c){ya(a,c);b==c.bottom&&(c.bottom=a);b.prev&&(b.prev.next=a);a.prev=b.prev;b.prev=a;a.next=b},hb=function(a){return function(){throw Error("Rapha\u00ebl: you are calling to method \u201c"+
a+"\u201d of removed object");}};k.pathToRelative=Pa;if(k.svg){H.svgns="http://www.w3.org/2000/svg";H.xlink="http://www.w3.org/1999/xlink";Z=function(a){return+a+(~~a===a)*0.5};var $=function(a,b){if(b)for(var c in b)b[m](c)&&a.setAttribute(c,z(b[c]));else{a=y.createElementNS(H.svgns,a);a.style.webkitTapHighlightColor="rgba(0,0,0,0)";return a}};k[X]=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var ib=function(a,b){var c=$("path");b.canvas&&b.canvas.appendChild(c);
c=new ga(c,b);c.type="path";wa(c,{fill:"none",stroke:"#000",path:a});return c},Aa=function(a,b,c){var e="linear",f=0.5,d=0.5,j=a.style;b=z(b).replace(Ya,function(E,L,M){e="radial";if(L&&M){f=U(L);d=U(M);E=(d>0.5)*2-1;s(f-0.5,2)+s(d-0.5,2)>0.25&&(d=C.sqrt(0.25-s(f-0.5,2))*E+0.5)&&d!=0.5&&(d=d.toFixed(5)-1.0E-5*E)}return""});b=b.split(/\s*\-\s*/);if(e=="linear"){var o=b.shift();o=-U(o);if(isNaN(o))return null;o=[0,0,C.cos(o*A/180),C.sin(o*A/180)];var p=1/(D(n(o[2]),n(o[3]))||1);o[2]*=p;o[3]*=p;if(o[2]<
0){o[0]=-o[2];o[2]=0}if(o[3]<0){o[1]=-o[3];o[3]=0}}b=bb(b);if(!b)return null;p=a.getAttribute("fill");(p=p.match(/^url\(#(.*)\)$/))&&c.defs.removeChild(y.getElementById(p[1]));p=$(e+"Gradient");p.id=Q();$(p,e=="radial"?{fx:f,fy:d}:{x1:o[0],y1:o[1],x2:o[2],y2:o[3]});c.defs.appendChild(p);c=0;for(o=b[l];c<o;c++){var q=$("stop");$(q,{offset:b[c].offset?b[c].offset:c?"100%":"0%","stop-color":b[c].color||"#fff"});p.appendChild(q)}$(a,{fill:"url(#"+p.id+")",opacity:1,"fill-opacity":1});j.fill="";j.opacity=
1;return j.fillOpacity=1},Ra=function(a){var b=a.getBBox();$(a.pattern,{patternTransform:k.format("translate({0},{1})",b.x,b.y)})},wa=function(a,b){var c={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},e=a.node,f=a.attrs,d=a.rotate(),j=function(ba,T){if(T=c[v.call(T)]){for(var O=ba.attrs["stroke-width"]||"1",V={round:O,square:O,butt:0}[ba.attrs["stroke-linecap"]||b["stroke-linecap"]]||0,
ia=[],na=T[l];na--;)ia[na]=T[na]*O+(na%2?1:-1)*V;$(e,{"stroke-dasharray":ia[B](",")})}};b[m]("rotation")&&(d=b.rotation);var o=z(d).split(I);if(o.length-1){o[1]=+o[1];o[2]=+o[2]}else o=null;U(d)&&a.rotate(0,true);for(var p in b)if(b[m](p))if(Da[m](p)){var q=b[p];f[p]=q;switch(p){case "blur":a.blur(q);break;case "rotation":a.rotate(q,true);break;case "href":case "title":case "target":var E=e.parentNode;if(v.call(E.tagName)!="a"){var L=$("a");E.insertBefore(L,e);L.appendChild(e);E=L}p=="target"&&q==
"blank"?E.setAttributeNS(a.paper.xlink,"show","new"):E.setAttributeNS(a.paper.xlink,p,q);break;case "cursor":e.style.cursor=q;break;case "clip-rect":E=z(q).split(I);if(E[l]==4){a.clip&&a.clip.parentNode.parentNode.removeChild(a.clip.parentNode);var M=$("clipPath");L=$("rect");M.id=Q();$(L,{x:E[0],y:E[1],width:E[2],height:E[3]});M.appendChild(L);a.paper.defs.appendChild(M);$(e,{"clip-path":"url(#"+M.id+")"});a.clip=L}if(!q){(q=y.getElementById(e.getAttribute("clip-path").replace(/(^url\(#|\)$)/g,"")))&&
q.parentNode.removeChild(q);$(e,{"clip-path":""});delete a.clip}break;case "path":a.type=="path"&&$(e,{d:q?f.path=za(q):"M0,0"});break;case "width":e.setAttribute(p,q);if(f.fx){p="x";q=f.x}else break;case "x":f.fx&&(q=-f.x-(f.width||0));case "rx":if(p=="rx"&&a.type=="rect")break;case "cx":o&&(p=="x"||p=="cx")&&(o[1]+=q-f[p]);e.setAttribute(p,q);a.pattern&&Ra(a);break;case "height":e.setAttribute(p,q);if(f.fy){p="y";q=f.y}else break;case "y":f.fy&&(q=-f.y-(f.height||0));case "ry":if(p=="ry"&&a.type==
"rect")break;case "cy":o&&(p=="y"||p=="cy")&&(o[2]+=q-f[p]);e.setAttribute(p,q);a.pattern&&Ra(a);break;case "r":a.type=="rect"?$(e,{rx:q,ry:q}):e.setAttribute(p,q);break;case "src":a.type=="image"&&e.setAttributeNS(a.paper.xlink,"href",q);break;case "stroke-width":e.style.strokeWidth=q;e.setAttribute(p,q);f["stroke-dasharray"]&&j(a,f["stroke-dasharray"]);break;case "stroke-dasharray":j(a,q);break;case "translation":q=z(q).split(I);q[0]=+q[0]||0;q[1]=+q[1]||0;if(o){o[1]+=q[0];o[2]+=q[1]}Ja.call(a,
q[0],q[1]);break;case "scale":q=z(q).split(I);a.scale(+q[0]||1,+q[1]||+q[0]||1,isNaN(U(q[2]))?null:+q[2],isNaN(U(q[3]))?null:+q[3]);break;case "fill":if(E=z(q).match(ca)){M=$("pattern");var R=$("image");M.id=Q();$(M,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});$(R,{x:0,y:0});R.setAttributeNS(a.paper.xlink,"href",E[1]);M.appendChild(R);q=y.createElement("img");q.style.cssText="position:absolute;left:-9999em;top-9999em";q.onload=function(){$(M,{width:this.offsetWidth,height:this.offsetHeight});
$(R,{width:this.offsetWidth,height:this.offsetHeight});y.body.removeChild(this);a.paper.safari()};y.body.appendChild(q);q.src=E[1];a.paper.defs.appendChild(M);e.style.fill="url(#"+M.id+")";$(e,{fill:"url(#"+M.id+")"});a.pattern=M;a.pattern&&Ra(a);break}E=k.getRGB(q);if(E.error)if(({circle:1,ellipse:1}[m](a.type)||z(q).charAt()!="r")&&Aa(e,q,a.paper)){f.gradient=q;f.fill="none";break}else{delete b.gradient;delete f.gradient;!k.is(f.opacity,"undefined")&&k.is(b.opacity,"undefined")&&$(e,{opacity:f.opacity});
!k.is(f["fill-opacity"],"undefined")&&k.is(b["fill-opacity"],"undefined")&&$(e,{"fill-opacity":f["fill-opacity"]})}E[m]("opacity")&&$(e,{"fill-opacity":E.opacity>1?E.opacity/100:E.opacity});case "stroke":E=k.getRGB(q);e.setAttribute(p,E.hex);p=="stroke"&&E[m]("opacity")&&$(e,{"stroke-opacity":E.opacity>1?E.opacity/100:E.opacity});break;case "gradient":(({circle:1,ellipse:1})[m](a.type)||z(q).charAt()!="r")&&Aa(e,q,a.paper);break;case "opacity":f.gradient&&!f[m]("stroke-opacity")&&$(e,{"stroke-opacity":q>
1?q/100:q});case "fill-opacity":if(f.gradient){if(E=y.getElementById(e.getAttribute("fill").replace(/^url\(#|\)$/g,""))){E=E.getElementsByTagName("stop");E[E[l]-1].setAttribute("stop-opacity",q)}break}default:p=="font-size"&&(q=ma(q,10)+"px");E=p.replace(/(\-.)/g,function(ba){return va.call(ba.substring(1))});e.style[E]=q;e.setAttribute(p,q)}}Cb(a,b);o?a.rotate(o.join(aa)):U(d)&&a.rotate(d,true)},Cb=function(a,b){if(!(a.type!="text"||!(b[m]("text")||b[m]("font")||b[m]("font-size")||b[m]("x")||b[m]("y")))){var c=
a.attrs,e=a.node,f=e.firstChild?ma(y.defaultView.getComputedStyle(e.firstChild,"").getPropertyValue("font-size"),10):10;if(b[m]("text")){for(c.text=b.text;e.firstChild;)e.removeChild(e.firstChild);for(var d=z(b.text).split("\n"),j=0,o=d[l];j<o;j++)if(d[j]){var p=$("tspan");j&&$(p,{dy:f*1.2,x:c.x});p.appendChild(y.createTextNode(d[j]));e.appendChild(p)}}else{d=e.getElementsByTagName("tspan");j=0;for(o=d[l];j<o;j++)j&&$(d[j],{dy:f*1.2,x:c.x})}$(e,{y:c.y});f=a.getBBox();(f=c.y-(f.y+f.height/2))&&k.is(f,
"finite")&&$(e,{y:c.y+f})}},ga=function(a,b){this[0]=a;this.id=k._oid++;this.node=a;a.raphael=this;this.paper=b;this.attrs=this.attrs||{};this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);(this.prev=b.top)&&(b.top.next=this);b.top=this;this.next=null},ea=ga[r];ga[r].rotate=function(a,b,c){if(this.removed)return this;if(a==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][B](aa);return this._.rt.deg}var e=this.getBBox();a=z(a).split(I);
if(a[l]-1){b=U(a[1]);c=U(a[2])}a=U(a[0]);b!=null&&b!==false?this._.rt.deg=a:this._.rt.deg+=a;c==null&&(b=null);this._.rt.cx=b;this._.rt.cy=c;b=b==null?e.x+e.width/2:b;c=c==null?e.y+e.height/2:c;if(this._.rt.deg){this.transformations[0]=k.format("rotate({0} {1} {2})",this._.rt.deg,b,c);this.clip&&$(this.clip,{transform:k.format("rotate({0} {1} {2})",-this._.rt.deg,b,c)})}else{this.transformations[0]="";this.clip&&$(this.clip,{transform:""})}$(this.node,{transform:this.transformations[B](aa)});return this};
ga[r].hide=function(){!this.removed&&(this.node.style.display="none");return this};ga[r].show=function(){!this.removed&&(this.node.style.display="");return this};ga[r].remove=function(){if(!this.removed){ya(this,this.paper);this.node.parentNode.removeChild(this.node);for(var a in this)delete this[a];this.removed=true}};ga[r].getBBox=function(){if(this.removed)return this;if(this.type=="path")return Ha(this.attrs.path);if(this.node.style.display=="none"){this.show();var a=true}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=
b||{}}if(this.type=="text"){b={x:b.x,y:Infinity,width:0,height:0};for(var e=0,f=this.node.getNumberOfChars();e<f;e++){var d=this.node.getExtentOfChar(e);d.y<b.y&&(b.y=d.y);d.y+d.height-b.y>b.height&&(b.height=d.y+d.height-b.y);d.x+d.width-b.x>b.width&&(b.width=d.x+d.width-b.x)}}a&&this.hide();return b};ga[r].attr=function(a,b){if(this.removed)return this;if(a==null){var c={},e;for(e in this.attrs)this.attrs[m](e)&&(c[e]=this.attrs[e]);this._.rt.deg&&(c.rotation=this.rotate());(this._.sx!=1||this._.sy!=
1)&&(c.scale=this.scale());c.gradient&&c.fill=="none"&&(c.fill=c.gradient)&&delete c.gradient;return c}if(b==null&&k.is(a,"string")){if(a=="translation")return Ja.call(this);if(a=="rotation")return this.rotate();if(a=="scale")return this.scale();if(a=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[a]}if(b==null&&k.is(a,P)){e={};c=0;for(var f=a.length;c<f;c++)e[a[c]]=this.attr(a[c]);return e}if(b!=null){c={};c[a]=b}else a!=null&&k.is(a,"object")&&
(c=a);for(f in this.paper.customAttributes)if(this.paper.customAttributes[m](f)&&c[m](f)&&k.is(this.paper.customAttributes[f],"function")){e=this.paper.customAttributes[f].apply(this,[].concat(c[f]));this.attrs[f]=c[f];for(var d in e)e[m](d)&&(c[d]=e[d])}wa(this,c);return this};ga[r].toFront=function(){if(this.removed)return this;this.node.parentNode.appendChild(this.node);var a=this.paper;a.top!=this&&db(this,a);return this};ga[r].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=
this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);eb(this,this.paper)}return this};ga[r].insertAfter=function(a){if(this.removed)return this;var b=a.node||a[a.length-1].node;b.nextSibling?b.parentNode.insertBefore(this.node,b.nextSibling):b.parentNode.appendChild(this.node);fb(this,a,this.paper);return this};ga[r].insertBefore=function(a){if(this.removed)return this;var b=a.node||a[0].node;b.parentNode.insertBefore(this.node,b);gb(this,a,this.paper);return this};
ga[r].blur=function(a){if(+a!==0){var b=$("filter"),c=$("feGaussianBlur");this.attrs.blur=a;b.id=Q();$(c,{stdDeviation:+a||1.5});b.appendChild(c);this.paper.defs.appendChild(b);this._blur=b;$(this.node,{filter:"url(#"+b.id+")"})}else{if(this._blur){this._blur.parentNode.removeChild(this._blur);delete this._blur;delete this.attrs.blur}this.node.removeAttribute("filter")}};var jb=function(a,b,c,e){var f=$("circle");a.canvas&&a.canvas.appendChild(f);a=new ga(f,a);a.attrs={cx:b,cy:c,r:e,fill:"none",stroke:"#000"};
a.type="circle";$(f,a.attrs);return a},kb=function(a,b,c,e,f,d){var j=$("rect");a.canvas&&a.canvas.appendChild(j);a=new ga(j,a);a.attrs={x:b,y:c,width:e,height:f,r:d||0,rx:d||0,ry:d||0,fill:"none",stroke:"#000"};a.type="rect";$(j,a.attrs);return a},lb=function(a,b,c,e,f){var d=$("ellipse");a.canvas&&a.canvas.appendChild(d);a=new ga(d,a);a.attrs={cx:b,cy:c,rx:e,ry:f,fill:"none",stroke:"#000"};a.type="ellipse";$(d,a.attrs);return a},mb=function(a,b,c,e,f,d){var j=$("image");$(j,{x:c,y:e,width:f,height:d,
preserveAspectRatio:"none"});j.setAttributeNS(a.xlink,"href",b);a.canvas&&a.canvas.appendChild(j);a=new ga(j,a);a.attrs={x:c,y:e,width:f,height:d,src:b};a.type="image";return a},nb=function(a,b,c,e){var f=$("text");$(f,{x:b,y:c,"text-anchor":"middle"});a.canvas&&a.canvas.appendChild(f);a=new ga(f,a);a.attrs={x:b,y:c,"text-anchor":"middle",text:e,font:Da.font,stroke:"none",fill:"#000"};a.type="text";wa(a,a.attrs);return a},ob=function(a,b){this.width=a||this.width;this.height=b||this.height;this.canvas.setAttribute("width",
this.width);this.canvas.setAttribute("height",this.height);return this},Ma=function(){var a=cb[J](0,arguments),b=a&&a.container,c=a.x,e=a.y,f=a.width;a=a.height;if(!b)throw Error("SVG container not found.");var d=$("svg");c=c||0;e=e||0;f=f||512;a=a||342;$(d,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:f,height:a});if(b==1){d.style.cssText="position:absolute;left:"+c+"px;top:"+e+"px";y.body.appendChild(d)}else b.firstChild?b.insertBefore(d,b.firstChild):b.appendChild(d);b=new u;b.width=f;
b.height=a;b.canvas=d;Qa.call(b,b,k.fn);b.clear();return b};H.clear=function(){for(var a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);this.bottom=this.top=null;(this.desc=$("desc")).appendChild(y.createTextNode("Created with Rapha\u00ebl"));a.appendChild(this.desc);a.appendChild(this.defs=$("defs"))};H.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]=hb(a)}}if(k.vml){var pb={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},
Db=/([clmz]),?([^clmz]*)/gi,Eb=/ progid:\S+Blur\([^\)]+\)/g,Fb=/-?[^,\s-]+/g,Ba=1E3+aa+1E3,Ca={path:1,rect:1},Gb=function(a){var b=/[ahqstv]/ig,c=za;z(a).match(b)&&(c=Ga);b=/[clmz]/g;if(c==za&&!z(a).match(b))return a=z(a).replace(Db,function(p,q,E){var L=[],M=v.call(q)=="m",R=pb[q];E.replace(Fb,function(ba){if(M&&L[l]==2){R+=L+pb[q=="m"?"l":"L"];L=[]}L[Y](Z(ba*10))});return R+L});b=c(a);var e;a=[];for(var f=0,d=b[l];f<d;f++){c=b[f];e=v.call(b[f][0]);e=="z"&&(e="x");for(var j=1,o=c[l];j<o;j++)e+=Z(c[j]*
10)+(j!=o-1?",":"");a[Y](e)}return a[B](aa)};k[X]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+this.version};ib=function(a,b){var c=pa("group");c.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";c.coordsize=b.coordsize;c.coordorigin=b.coordorigin;var e=pa("shape"),f=e.style;f.width=b.width+"px";f.height=b.height+"px";e.coordsize=Ba;e.coordorigin=b.coordorigin;c.appendChild(e);e=new ga(e,c,b);f=
{fill:"none",stroke:"#000"};a&&(f.path=a);e.type="path";e.path=[];e.Path="";wa(e,f);b.canvas.appendChild(c);return e};wa=function(a,b){a.attrs=a.attrs||{};var c=a.node,e=a.attrs,f=c.style,d;d=(b.x!=e.x||b.y!=e.y||b.width!=e.width||b.height!=e.height||b.r!=e.r)&&a.type=="rect";for(var j in b)b[m](j)&&(e[j]=b[j]);if(d){e.path=qb(e.x,e.y,e.width,e.height,e.r);a.X=e.x;a.Y=e.y;a.W=e.width;a.H=e.height}b.href&&(c.href=b.href);b.title&&(c.title=b.title);b.target&&(c.target=b.target);b.cursor&&(f.cursor=
b.cursor);"blur"in b&&a.blur(b.blur);if(b.path&&a.type=="path"||d)c.path=Gb(e.path);b.rotation!=null&&a.rotate(b.rotation,true);if(b.translation){d=z(b.translation).split(I);Ja.call(a,d[0],d[1]);if(a._.rt.cx!=null){a._.rt.cx+=+d[0];a._.rt.cy+=+d[1];a.setBox(a.attrs,d[0],d[1])}}if(b.scale){d=z(b.scale).split(I);a.scale(+d[0]||1,+d[1]||+d[0]||1,+d[2]||null,+d[3]||null)}if("clip-rect"in b){d=z(b["clip-rect"]).split(I);if(d[l]==4){d[2]=+d[2]+ +d[0];d[3]=+d[3]+ +d[1];j=c.clipRect||y.createElement("div");
var o=j.style,p=c.parentNode;o.clip=k.format("rect({1}px {2}px {3}px {0}px)",d);if(!c.clipRect){o.position="absolute";o.top=0;o.left=0;o.width=a.paper.width+"px";o.height=a.paper.height+"px";p.parentNode.insertBefore(j,p);j.appendChild(p);c.clipRect=j}}b["clip-rect"]||c.clipRect&&(c.clipRect.style.clip="")}a.type=="image"&&b.src&&(c.src=b.src);if(a.type=="image"&&b.opacity){c.filterOpacity=" progid:DXImageTransform.Microsoft.Alpha(opacity="+b.opacity*100+")";f.filter=(c.filterMatrix||"")+(c.filterOpacity||
"")}b.font&&(f.font=b.font);b["font-family"]&&(f.fontFamily='"'+b["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"');b["font-size"]&&(f.fontSize=b["font-size"]);b["font-weight"]&&(f.fontWeight=b["font-weight"]);b["font-style"]&&(f.fontStyle=b["font-style"]);if(b.opacity!=null||b["stroke-width"]!=null||b.fill!=null||b.stroke!=null||b["stroke-width"]!=null||b["stroke-opacity"]!=null||b["fill-opacity"]!=null||b["stroke-dasharray"]!=null||b["stroke-miterlimit"]!=null||b["stroke-linejoin"]!=
null||b["stroke-linecap"]!=null){c=a.shape||c;d=c.getElementsByTagName("fill")&&c.getElementsByTagName("fill")[0];j=false;!d&&(j=d=pa("fill"));if("fill-opacity"in b||"opacity"in b){f=((+e["fill-opacity"]+1||2)-1)*((+e.opacity+1||2)-1)*((+k.getRGB(b.fill).o+1||2)-1);f=h(D(f,0),1);d.opacity=f}b.fill&&(d.on=true);if(d.on==null||b.fill=="none")d.on=false;if(d.on&&b.fill)if(f=b.fill.match(ca)){d.src=f[1];d.type="tile"}else{d.color=k.getRGB(b.fill).hex;d.src="";d.type="solid";if(k.getRGB(b.fill).error&&
(a.type in{circle:1,ellipse:1}||z(b.fill).charAt()!="r")&&Aa(a,b.fill)){e.fill="none";e.gradient=b.fill}}j&&c.appendChild(d);d=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0];j=false;!d&&(j=d=pa("stroke"));if(b.stroke&&b.stroke!="none"||b["stroke-width"]||b["stroke-opacity"]!=null||b["stroke-dasharray"]||b["stroke-miterlimit"]||b["stroke-linejoin"]||b["stroke-linecap"])d.on=true;(b.stroke=="none"||d.on==null||b.stroke==0||b["stroke-width"]==0)&&(d.on=false);f=k.getRGB(b.stroke);
d.on&&b.stroke&&(d.color=f.hex);f=((+e["stroke-opacity"]+1||2)-1)*((+e.opacity+1||2)-1)*((+f.o+1||2)-1);o=(U(b["stroke-width"])||1)*0.75;f=h(D(f,0),1);b["stroke-width"]==null&&(o=e["stroke-width"]);b["stroke-width"]&&(d.weight=o);o&&o<1&&(f*=o)&&(d.weight=1);d.opacity=f;b["stroke-linejoin"]&&(d.joinstyle=b["stroke-linejoin"]||"miter");d.miterlimit=b["stroke-miterlimit"]||8;b["stroke-linecap"]&&(d.endcap=b["stroke-linecap"]=="butt"?"flat":b["stroke-linecap"]=="square"?"square":"round");if(b["stroke-dasharray"]){f=
{"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};d.dashstyle=f[m](b["stroke-dasharray"])?f[b["stroke-dasharray"]]:""}j&&c.appendChild(d)}if(a.type=="text"){f=a.paper.span.style;e.font&&(f.font=e.font);e["font-family"]&&(f.fontFamily=e["font-family"]);e["font-size"]&&(f.fontSize=e["font-size"]);e["font-weight"]&&(f.fontWeight=e["font-weight"]);e["font-style"]&&(f.fontStyle=
e["font-style"]);a.node.string&&(a.paper.span.innerHTML=z(a.node.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));a.W=e.w=a.paper.span.offsetWidth;a.H=e.h=a.paper.span.offsetHeight;a.X=e.x;a.Y=e.y+Z(a.H/2);switch(e["text-anchor"]){case "start":a.node.style["v-text-align"]="left";a.bbx=Z(a.W/2);break;case "end":a.node.style["v-text-align"]="right";a.bbx=-Z(a.W/2);break;default:a.node.style["v-text-align"]="center"}}};Aa=function(a,b){a.attrs=a.attrs||{};var c,e="linear",f=
".5 .5";a.attrs.gradient=b;b=z(b).replace(Ya,function(E,L,M){e="radial";if(L&&M){L=U(L);M=U(M);s(L-0.5,2)+s(M-0.5,2)>0.25&&(M=C.sqrt(0.25-s(L-0.5,2))*((M>0.5)*2-1)+0.5);f=L+aa+M}return""});b=b.split(/\s*\-\s*/);if(e=="linear"){var d=b.shift();d=-U(d);if(isNaN(d))return null}var j=bb(b);if(!j)return null;a=a.shape||a.node;c=a.getElementsByTagName("fill")[0]||pa("fill");!c.parentNode&&a.appendChild(c);if(j[l]){c.on=true;c.method="none";c.color=j[0].color;c.color2=j[j[l]-1].color;for(var o=[],p=0,q=
j[l];p<q;p++)j[p].offset&&o[Y](j[p].offset+aa+j[p].color);c.colors&&(c.colors.value=o[l]?o[B]():"0% "+c.color);if(e=="radial"){c.type="gradientradial";c.focus="100%";c.focussize=f;c.focusposition=f}else{c.type="gradient";c.angle=(270-d)%360}}return 1};ga=function(a,b,c){this[0]=a;this.id=k._oid++;this.node=a;a.raphael=this;this.Y=this.X=0;this.attrs={};this.Group=b;this.paper=c;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!c.bottom&&(c.bottom=this);(this.prev=c.top)&&(c.top.next=this);c.top=this;this.next=
null};ea=ga[r];ea.rotate=function(a,b,c){if(this.removed)return this;if(a==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][B](aa);return this._.rt.deg}a=z(a).split(I);if(a[l]-1){b=U(a[1]);c=U(a[2])}a=U(a[0]);b!=null?this._.rt.deg=a:this._.rt.deg+=a;c==null&&(b=null);this._.rt.cx=b;this._.rt.cy=c;this.setBox(this.attrs,b,c);this.Group.style.rotation=this._.rt.deg;return this};ea.setBox=function(a,b,c){if(this.removed)return this;var e=this.Group.style,f=this.shape&&this.shape.style||
this.node.style;a=a||{};for(var d in a)a[m](d)&&(this.attrs[d]=a[d]);b=b||this._.rt.cx;c=c||this._.rt.cy;var j=this.attrs,o;switch(this.type){case "circle":a=j.cx-j.r;d=j.cy-j.r;o=j=j.r*2;break;case "ellipse":a=j.cx-j.rx;d=j.cy-j.ry;o=j.rx*2;j=j.ry*2;break;case "image":a=+j.x;d=+j.y;o=j.width||0;j=j.height||0;break;case "text":this.textpath.v=["m",Z(j.x),", ",Z(j.y-2),"l",Z(j.x)+1,", ",Z(j.y-2)][B]("");a=j.x-Z(this.W/2);d=j.y-this.H/2;o=this.W;j=this.H;break;case "rect":case "path":if(this.attrs.path){j=
Ha(this.attrs.path);a=j.x;d=j.y;o=j.width;j=j.height}else{d=a=0;o=this.paper.width;j=this.paper.height}break;default:d=a=0;o=this.paper.width;j=this.paper.height}b=(b==null?a+o/2:b)-this.paper.width/2;c=(c==null?d+j/2:c)-this.paper.height/2;var p;e.left!=(p=b+"px")&&(e.left=p);e.top!=(p=c+"px")&&(e.top=p);this.X=Ca[m](this.type)?-b:a;this.Y=Ca[m](this.type)?-c:d;this.W=o;this.H=j;if(Ca[m](this.type)){f.left!=(p=-b*10+"px")&&(f.left=p);f.top!=(p=-c*10+"px")&&(f.top=p)}else if(this.type=="text"){f.left!=
(p=-b+"px")&&(f.left=p);f.top!=(p=-c+"px")&&(f.top=p)}else{e.width!=(p=this.paper.width+"px")&&(e.width=p);e.height!=(p=this.paper.height+"px")&&(e.height=p);f.left!=(p=a-b+"px")&&(f.left=p);f.top!=(p=d-c+"px")&&(f.top=p);f.width!=(p=o+"px")&&(f.width=p);f.height!=(p=j+"px")&&(f.height=p)}};ea.hide=function(){!this.removed&&(this.Group.style.display="none");return this};ea.show=function(){!this.removed&&(this.Group.style.display="block");return this};ea.getBBox=function(){if(this.removed)return this;
if(Ca[m](this.type))return Ha(this.attrs.path);return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};ea.remove=function(){if(!this.removed){ya(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)delete this[a];this.removed=true}};ea.attr=function(a,b){if(this.removed)return this;if(a==null){var c={},e;for(e in this.attrs)this.attrs[m](e)&&(c[e]=this.attrs[e]);
this._.rt.deg&&(c.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(c.scale=this.scale());c.gradient&&c.fill=="none"&&(c.fill=c.gradient)&&delete c.gradient;return c}if(b==null&&k.is(a,"string")){if(a=="translation")return Ja.call(this);if(a=="rotation")return this.rotate();if(a=="scale")return this.scale();if(a=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[a]}if(this.attrs&&b==null&&k.is(a,P)){var f={};e=0;for(c=a[l];e<c;e++)f[a[e]]=this.attr(a[e]);
return f}if(b!=null){c={};c[a]=b}b==null&&k.is(a,"object")&&(c=a);if(c){for(f in this.paper.customAttributes)if(this.paper.customAttributes[m](f)&&c[m](f)&&k.is(this.paper.customAttributes[f],"function")){e=this.paper.customAttributes[f].apply(this,[].concat(c[f]));this.attrs[f]=c[f];for(var d in e)e[m](d)&&(c[d]=e[d])}c.text&&this.type=="text"&&(this.node.string=c.text);wa(this,c);c.gradient&&({circle:1,ellipse:1}[m](this.type)||z(c.gradient).charAt()!="r")&&Aa(this,c.gradient);(!Ca[m](this.type)||
this._.rt.deg)&&this.setBox(this.attrs)}return this};ea.toFront=function(){!this.removed&&this.Group.parentNode.appendChild(this.Group);this.paper.top!=this&&db(this,this.paper);return this};ea.toBack=function(){if(this.removed)return this;if(this.Group.parentNode.firstChild!=this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);eb(this,this.paper)}return this};ea.insertAfter=function(a){if(this.removed)return this;a.constructor==ra&&(a=a[a.length-1]);a.Group.nextSibling?
a.Group.parentNode.insertBefore(this.Group,a.Group.nextSibling):a.Group.parentNode.appendChild(this.Group);fb(this,a,this.paper);return this};ea.insertBefore=function(a){if(this.removed)return this;a.constructor==ra&&(a=a[0]);a.Group.parentNode.insertBefore(this.Group,a.Group);gb(this,a,this.paper);return this};ea.blur=function(a){var b=this.node.runtimeStyle,c=b.filter;c=c.replace(Eb,"");if(+a!==0){this.attrs.blur=a;b.filter=c+aa+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+a||1.5)+")";
b.margin=k.format("-{0}px 0 0 -{0}px",Z(+a||1.5))}else{b.filter=c;b.margin=0;delete this.attrs.blur}};jb=function(a,b,c,e){var f=pa("group"),d=pa("oval");f.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";f.coordsize=Ba;f.coordorigin=a.coordorigin;f.appendChild(d);d=new ga(d,f,a);d.type="circle";wa(d,{stroke:"#000",fill:"none"});d.attrs.cx=b;d.attrs.cy=c;d.attrs.r=e;d.setBox({x:b-e,y:c-e,width:e*2,height:e*2});a.canvas.appendChild(f);return d};var qb=function(a,
b,c,e,f){return f?k.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",a+f,b,c-f*2,f,-f,e-f*2,f*2-c,f*2-e):k.format("M{0},{1}l{2},0,0,{3},{4},0z",a,b,c,e,-c)};kb=function(a,b,c,e,f,d){var j=qb(b,c,e,f,d);a=a.path(j);var o=a.attrs;a.X=o.x=b;a.Y=o.y=c;a.W=o.width=e;a.H=o.height=f;o.r=d;o.path=j;a.type="rect";return a};lb=function(a,b,c,e,f){var d=pa("group"),j=pa("oval");d.style.cssText="position:absolute;left:0;top:0;width:"+
a.width+"px;height:"+a.height+"px";d.coordsize=Ba;d.coordorigin=a.coordorigin;d.appendChild(j);j=new ga(j,d,a);j.type="ellipse";wa(j,{stroke:"#000"});j.attrs.cx=b;j.attrs.cy=c;j.attrs.rx=e;j.attrs.ry=f;j.setBox({x:b-e,y:c-f,width:e*2,height:f*2});a.canvas.appendChild(d);return j};mb=function(a,b,c,e,f,d){var j=pa("group"),o=pa("image");j.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";j.coordsize=Ba;j.coordorigin=a.coordorigin;o.src=b;j.appendChild(o);o=new ga(o,
j,a);o.type="image";o.attrs.src=b;o.attrs.x=c;o.attrs.y=e;o.attrs.w=f;o.attrs.h=d;o.setBox({x:c,y:e,width:f,height:d});a.canvas.appendChild(j);return o};nb=function(a,b,c,e){var f=pa("group"),d=pa("shape"),j=d.style,o=pa("path"),p=pa("textpath");f.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";f.coordsize=Ba;f.coordorigin=a.coordorigin;o.v=k.format("m{0},{1}l{2},{1}",Z(b*10),Z(c*10),Z(b*10)+1);o.textpathok=true;j.width=a.width;j.height=a.height;p.string=z(e);
p.on=true;d.appendChild(p);d.appendChild(o);f.appendChild(d);j=new ga(p,f,a);j.shape=d;j.textpath=o;j.type="text";j.attrs.text=e;j.attrs.x=b;j.attrs.y=c;j.attrs.w=1;j.attrs.h=1;wa(j,{font:Da.font,stroke:"none",fill:"#000"});j.setBox();a.canvas.appendChild(f);return j};ob=function(a,b){var c=this.canvas.style;a==+a&&(a+="px");b==+b&&(b+="px");c.width=a;c.height=b;c.clip="rect(0 "+a+" "+b+" 0)";return this};var pa;y.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!y.namespaces.rvml&&
y.namespaces.add("rvml","urn:schemas-microsoft-com:vml");pa=function(a){return y.createElement("<rvml:"+a+' class="rvml">')}}catch(Nb){pa=function(a){return y.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}Ma=function(){var a=cb[J](0,arguments),b=a.container,c=a.height,e=a.width,f=a.x;a=a.y;if(!b)throw Error("VML container not found.");var d=new u,j=d.canvas=y.createElement("div"),o=j.style;f=f||0;a=a||0;e=e||512;c=c||342;e==+e&&(e+="px");c==+c&&(c+="px");d.width=1E3;
d.height=1E3;d.coordsize=1E4+aa+1E4;d.coordorigin="0 0";d.span=y.createElement("span");d.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";j.appendChild(d.span);o.cssText=k.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",e,c);if(b==1){y.body.appendChild(j);o.left=f+"px";o.top=a+"px";o.position="absolute"}else b.firstChild?b.insertBefore(j,b.firstChild):b.appendChild(j);
Qa.call(d,d,k.fn);return d};H.clear=function(){this.canvas.innerHTML="";this.span=y.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};H.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]=hb(a);return true}}sa=navigator.userAgent.match(/Version\\x2f(.*?)\s/);navigator.vendor=="Apple Computer, Inc."&&(sa&&sa[1]<
4||navigator.platform.slice(0,2)=="iP")?H.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});F.setTimeout(function(){a.remove()})}:H.safari=function(){};var Hb=function(){this.returnValue=false},Ib=function(){return this.originalEvent.preventDefault()},Jb=function(){this.cancelBubble=true},Kb=function(){return this.originalEvent.stopPropagation()},Lb=function(){if(y.addEventListener)return function(a,b,c,e){var f=W&&ha[b]?ha[b]:b,d=function(j){if(W&&ha[m](b))for(var o=
0,p=j.targetTouches&&j.targetTouches.length;o<p;o++)if(j.targetTouches[o].target==a){p=j;j=j.targetTouches[o];j.originalEvent=p;j.preventDefault=Ib;j.stopPropagation=Kb;break}return c.call(e,j)};a.addEventListener(f,d,false);return function(){a.removeEventListener(f,d,false);return true}};if(y.attachEvent)return function(a,b,c,e){var f=function(d){d=d||F.event;d.preventDefault=d.preventDefault||Hb;d.stopPropagation=d.stopPropagation||Jb;return c.call(e,d)};a.attachEvent("on"+b,f);return function(){a.detachEvent("on"+
b,f);return true}}}(),ta=[],Sa=function(a){for(var b=a.clientX,c=a.clientY,e=y.documentElement.scrollTop||y.body.scrollTop,f=y.documentElement.scrollLeft||y.body.scrollLeft,d,j=ta.length;j--;){d=ta[j];if(W)for(var o=a.touches.length,p;o--;){p=a.touches[o];if(p.identifier==d.el._drag.id){b=p.clientX;c=p.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();b+=f;c+=e;d.move&&d.move.call(d.move_scope||d.el,b-d.el._drag.x,c-d.el._drag.y,b,c,a)}},Ta=function(a){k.unmousemove(Sa).unmouseup(Ta);
for(var b=ta.length,c;b--;){c=ta[b];c.el._drag={};c.end&&c.end.call(c.end_scope||c.start_scope||c.move_scope||c.el,a)}ta=[]};for(sa=fa[l];sa--;)(function(a){k[a]=ga[r][a]=function(b,c){if(k.is(b,"function")){this.events=this.events||[];this.events.push({name:a,f:b,unbind:Lb(this.shape||this.node||y,a,b,c||this)})}return this};k["un"+a]=ga[r]["un"+a]=function(b){for(var c=this.events,e=c[l];e--;)if(c[e].name==a&&c[e].f==b){c[e].unbind();c.splice(e,1);!c.length&&delete this.events;break}return this}})(fa[sa]);
ea.hover=function(a,b,c,e){return this.mouseover(a,c).mouseout(b,e||c)};ea.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};ea.drag=function(a,b,c,e,f,d){this._drag={};this.mousedown(function(j){(j.originalEvent||j).preventDefault();var o=y.documentElement.scrollTop||y.body.scrollTop,p=y.documentElement.scrollLeft||y.body.scrollLeft;this._drag.x=j.clientX+p;this._drag.y=j.clientY+o;this._drag.id=j.identifier;b&&b.call(f||e||this,j.clientX+p,j.clientY+o,j);!ta.length&&k.mousemove(Sa).mouseup(Ta);
ta.push({el:this,move:a,end:c,move_scope:e,start_scope:f,end_scope:d})});return this};ea.undrag=function(a,b,c){for(b=ta.length;b--;)ta[b].el==this&&ta[b].move==a&&ta[b].end==c&&ta.splice(b++,1);!ta.length&&k.unmousemove(Sa).unmouseup(Ta)};H.circle=function(a,b,c){return jb(this,a||0,b||0,c||0)};H.rect=function(a,b,c,e,f){return kb(this,a||0,b||0,c||0,e||0,f||0)};H.ellipse=function(a,b,c,e){return lb(this,a||0,b||0,c||0,e||0)};H.path=function(a){a&&!k.is(a,"string")&&!k.is(a[0],P)&&(a+="");return ib(k.format[J](k,
arguments),this)};H.image=function(a,b,c,e,f){return mb(this,a||"about:blank",b||0,c||0,e||0,f||0)};H.text=function(a,b,c){return nb(this,a||0,b||0,z(c))};H.set=function(a){arguments[l]>1&&(a=Array[r].splice.call(arguments,0,arguments[l]));return new ra(a)};H.setSize=ob;H.top=H.bottom=null;H.raphael=k;ea.resetScale=function(){if(this.removed)return this;this._.sx=1;this._.sy=1;this.attrs.scale="1 1"};ea.scale=function(a,b,c,e){if(this.removed)return this;if(a==null&&b==null)return{x:this._.sx,y:this._.sy,
toString:G};b=b||a;!+b&&(b=a);var f,d,j=this.attrs;if(a!=0){var o=this.getBBox(),p=o.x+o.width/2,q=o.y+o.height/2;f=n(a/this._.sx);d=n(b/this._.sy);c=+c||c==0?c:p;e=+e||e==0?e:q;var E=this._.sx>0,L=this._.sy>0;o=~~(a/n(a));var M=~~(b/n(b)),R=f*o,ba=d*M,T=this.node.style;p=c+n(p-c)*R*(p>c==E?1:-1);q=e+n(q-e)*ba*(q>e==L?1:-1);var O=a*o>b*M?d:f;switch(this.type){case "rect":case "image":var V=j.width*f,ia=j.height*d;this.attr({height:ia,r:j.r*O,width:V,x:p-V/2,y:q-ia/2});break;case "circle":case "ellipse":this.attr({rx:j.rx*
f,ry:j.ry*d,r:j.r*O,cx:p,cy:q});break;case "text":this.attr({x:p,y:q});break;case "path":O=Pa(j.path);var na=true;E=E?R:f;L=L?ba:d;ba=0;for(R=O[l];ba<R;ba++){var oa=O[ba],la=va.call(oa[0]);if(!(la=="M"&&na)){na=false;if(la=="A"){oa[O[ba][l]-2]*=E;oa[O[ba][l]-1]*=L;oa[1]*=f;oa[2]*=d;oa[5]=+(o+M?!!+oa[5]:!+oa[5])}else if(la=="H"){la=1;for(var xa=oa[l];la<xa;la++)oa[la]*=E}else if(la=="V"){la=1;for(xa=oa[l];la<xa;la++)oa[la]*=L}else{la=1;for(xa=oa[l];la<xa;la++)oa[la]*=la%2?E:L}}}d=Ha(O);f=p-d.x-d.width/
2;d=q-d.y-d.height/2;O[0][1]+=f;O[0][2]+=d;this.attr({path:O})}if(this.type in{text:1,image:1}&&(o!=1||M!=1))if(this.transformations){this.transformations[2]="scale(".concat(o,",",M,")");this.node.setAttribute("transform",this.transformations[B](aa));f=o==-1?-j.x-(V||0):j.x;d=M==-1?-j.y-(ia||0):j.y;this.attr({x:f,y:d});j.fx=o-1;j.fy=M-1}else{this.node.filterMatrix=" progid:DXImageTransform.Microsoft"+".Matrix(M11=".concat(o,", M12=0, M21=0, M22=",M,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')");
T.filter=(this.node.filterMatrix||"")+(this.node.filterOpacity||"")}else if(this.transformations){this.transformations[2]="";this.node.setAttribute("transform",this.transformations[B](aa));j.fx=0;j.fy=0}else{this.node.filterMatrix="";T.filter=(this.node.filterMatrix||"")+(this.node.filterOpacity||"")}j.scale=[a,b,c,e][B](aa);this._.sx=a;this._.sy=b}return this};ea.clone=function(){if(this.removed)return null;var a=this.attr();delete a.scale;delete a.translation;return this.paper[this.type]().attr(a)};
var Ua={},Ka=function(a,b,c,e,f,d,j,o,p){var q=0,E=100,L=[a,b,c,e,f,d,j,o].join(),M=Ua[L],R,ba;!M&&(Ua[L]=M={data:[]});M.timer&&clearTimeout(M.timer);M.timer=setTimeout(function(){delete Ua[L]},2E3);if(p!=null)E=~~Ka(a,b,c,e,f,d,j,o)*10;for(var T=0;T<E+1;T++){if(M.data[p]>T)ba=M.data[T*E];else{ba=k.findDotsAtSegment(a,b,c,e,f,d,j,o,T/E);M.data[T]=ba}T&&(q+=s(s(R.x-ba.x,2)+s(R.y-ba.y,2),0.5));if(p!=null&&q>=p)return ba;R=ba}if(p==null)return q};fa=function(a,b){return function(c,e,f){c=Ga(c);for(var d,
j,o,p,q="",E={},L=0,M=0,R=c.length;M<R;M++){o=c[M];if(o[0]=="M"){d=+o[1];j=+o[2]}else{p=Ka(d,j,o[1],o[2],o[3],o[4],o[5],o[6]);if(L+p>e){if(b&&!E.start){d=Ka(d,j,o[1],o[2],o[3],o[4],o[5],o[6],e-L);q+=["C",d.start.x,d.start.y,d.m.x,d.m.y,d.x,d.y];if(f)return q;E.start=q;q=["M",d.x,d.y+"C",d.n.x,d.n.y,d.end.x,d.end.y,o[5],o[6]][B]();L+=p;d=+o[5];j=+o[6];continue}if(!a&&!b){d=Ka(d,j,o[1],o[2],o[3],o[4],o[5],o[6],e-L);return{x:d.x,y:d.y,alpha:d.alpha}}}L+=p;d=+o[5];j=+o[6]}q+=o}E.end=q;d=a?L:b?E:k.findDotsAtSegment(d,
j,o[1],o[2],o[3],o[4],o[5],o[6],1);d.alpha&&(d={x:d.x,y:d.y,alpha:d.alpha});return d}};var rb=fa(1),La=fa(),Va=fa(0,1);ea.getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return rb(this.attrs.path)}};ea.getPointAtLength=function(a){if(this.type=="path")return La(this.attrs.path,a)};ea.getSubpath=function(a,b){if(this.type=="path"){if(n(this.getTotalLength()-b)<"1e-6")return Va(this.attrs.path,a).end;var c=Va(this.attrs.path,b,1);return a?
Va(c,a).end:c}};k.easing_formulas={linear:function(a){return a},"<":function(a){return s(a,3)},">":function(a){return s(a-1,3)+1},"<>":function(a){a*=2;if(a<1)return s(a,3)/2;a-=2;return(s(a,3)+2)/2},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){if(a==0||a==1)return a;return s(2,-10*a)*C.sin((a-0.075)*2*A/0.3)+1},bounce:function(a){if(a<1/2.75)a*=7.5625*a;else if(a<2/2.75){a-=1.5/2.75;a=7.5625*a*a+0.75}else if(a<2.5/
2.75){a-=2.25/2.75;a=7.5625*a*a+0.9375}else{a-=2.625/2.75;a=7.5625*a*a+0.984375}return a}};var ua=[],sb=function(){for(var a=+new Date,b=0;b<ua[l];b++){var c=ua[b];if(!(c.stop||c.el.removed)){var e=a-c.start,f=c.ms,d=c.easing,j=c.from,o=c.diff,p=c.to,q=c.t,E=c.el;c={};var L;if(e<f){e=d(e/f);for(var M in j)if(j[m](M)){switch(Na[M]){case "along":L=e*f*o[M];p.back&&(L=p.len-L);d=La(p[M],L);E.translate(o.sx-o.x||0,o.sy-o.y||0);o.x=d.x;o.y=d.y;E.translate(d.x-o.sx,d.y-o.sy);p.rot&&E.rotate(o.r+d.alpha,
d.x,d.y);break;case N:L=+j[M]+e*f*o[M];break;case "colour":L="rgb("+[Wa(Z(j[M].r+e*f*o[M].r)),Wa(Z(j[M].g+e*f*o[M].g)),Wa(Z(j[M].b+e*f*o[M].b))][B](",")+")";break;case "path":L=[];d=0;for(var R=j[M][l];d<R;d++){L[d]=[j[M][d][0]];for(var ba=1,T=j[M][d][l];ba<T;ba++)L[d][ba]=+j[M][d][ba]+e*f*o[M][d][ba];L[d]=L[d][B](aa)}L=L[B](aa);break;case "csv":switch(M){case "translation":L=e*f*o[M][0]-q.x;d=e*f*o[M][1]-q.y;q.x+=L;q.y+=d;L=L+aa+d;break;case "rotation":L=+j[M][0]+e*f*o[M][0];j[M][1]&&(L+=","+j[M][1]+
","+j[M][2]);break;case "scale":L=[+j[M][0]+e*f*o[M][0],+j[M][1]+e*f*o[M][1],2 in p[M]?p[M][2]:"",3 in p[M]?p[M][3]:""][B](aa);break;case "clip-rect":L=[];for(d=4;d--;)L[d]=+j[M][d]+e*f*o[M][d]}break;default:R=[].concat(j[M]);L=[];for(d=E.paper.customAttributes[M].length;d--;)L[d]=+R[d]+e*f*o[M][d]}c[M]=L}E.attr(c);E._run&&E._run.call(E)}else{if(p.along){d=La(p.along,p.len*!p.back);E.translate(o.sx-(o.x||0)+d.x-o.sx,o.sy-(o.y||0)+d.y-o.sy);p.rot&&E.rotate(o.r+d.alpha,d.x,d.y)}(q.x||q.y)&&E.translate(-q.x,
-q.y);p.scale&&(p.scale+="");E.attr(p);ua.splice(b--,1)}}}k.svg&&E&&E.paper&&E.paper.safari();ua[l]&&setTimeout(sb)},Mb=function(a,b,c,e,f){var d=c-e;b.timeouts.push(setTimeout(function(){k.is(f,"function")&&f.call(b);b.animate(a,d,a.easing)},e))},Wa=function(a){return D(h(a,255),0)},Ja=function(a,b){if(a==null)return{x:this._.tx,y:this._.ty,toString:G};this._.tx+=+a;this._.ty+=+b;switch(this.type){case "circle":case "ellipse":this.attr({cx:+a+this.attrs.cx,cy:+b+this.attrs.cy});break;case "rect":case "image":case "text":this.attr({x:+a+
this.attrs.x,y:+b+this.attrs.y});break;case "path":var c=Pa(this.attrs.path);c[0][1]+=+a;c[0][2]+=+b;this.attr({path:c})}return this};ea.animateWith=function(a,b,c,e,f){for(var d=0,j=ua.length;d<j;d++)ua[d].el.id==a.id&&(b.start=ua[d].start);return this.animate(b,c,e,f)};ea.animateAlong=K();ea.animateAlongBack=K(1);ea.onAnimation=function(a){this._run=a||0;return this};ea.animate=function(a,b,c,e){var f=this;f.timeouts=f.timeouts||[];if(k.is(c,"function")||!c)e=c||null;if(f.removed){e&&e.call(f);
return f}var d={},j={},o=false,p={},q;for(q in a)if(a[m](q))if(Na[m](q)||f.paper.customAttributes[m](q)){o=true;d[q]=f.attr(q);d[q]==null&&(d[q]=Da[q]);j[q]=a[q];switch(Na[q]){case "along":var E=rb(a[q]),L=La(a[q],E*!!a.back),M=f.getBBox();p[q]=E/b;p.tx=M.x;p.ty=M.y;p.sx=L.x;p.sy=L.y;j.rot=a.rot;j.back=a.back;j.len=E;a.rot&&(p.r=U(f.rotate())||0);break;case N:p[q]=(j[q]-d[q])/b;break;case "colour":d[q]=k.getRGB(d[q]);E=k.getRGB(j[q]);p[q]={r:(E.r-d[q].r)/b,g:(E.g-d[q].g)/b,b:(E.b-d[q].b)/b};break;
case "path":E=Ga(d[q],j[q]);d[q]=E[0];M=E[1];p[q]=[];E=0;for(L=d[q][l];E<L;E++){p[q][E]=[0];for(var R=1,ba=d[q][E][l];R<ba;R++)p[q][E][R]=(M[E][R]-d[q][E][R])/b}break;case "csv":L=z(a[q]).split(I);M=z(d[q]).split(I);switch(q){case "translation":d[q]=[0,0];p[q]=[L[0]/b,L[1]/b];break;case "rotation":d[q]=M[1]==L[1]&&M[2]==L[2]?M:[0,L[1],L[2]];p[q]=[(L[0]-d[q][0])/b,0,0];break;case "scale":a[q]=L;d[q]=z(d[q]).split(I);p[q]=[(L[0]-d[q][0])/b,(L[1]-d[q][1])/b,0,0];break;case "clip-rect":d[q]=z(d[q]).split(I);
p[q]=[];for(E=4;E--;)p[q][E]=(L[E]-d[q][E])/b}j[q]=L;break;default:L=[].concat(a[q]);M=[].concat(d[q]);p[q]=[];for(E=f.paper.customAttributes[q][l];E--;)p[q][E]=((L[E]||0)-(M[E]||0))/b}}if(o){q=k.easing_formulas[c];if(!q)if((q=z(c).match(qa))&&q[l]==5){var T=q;q=function(ia){return x(ia,+T[1],+T[2],+T[3],+T[4],b)}}else q=function(ia){return ia};ua.push({start:a.start||+new Date,ms:b,easing:q,from:d,diff:p,to:j,el:f,t:{x:0,y:0}});k.is(e,"function")&&(f._ac=setTimeout(function(){e.call(f)},b));ua[l]==
1&&setTimeout(sb)}else{c=[];var O,V;for(V in a)if(a[m](V)&&tb.test(V)){q={value:a[V]};V=="from"&&(V=0);V=="to"&&(V=100);q.key=ma(V,10);c.push(q)}c.sort(yb);c[0].key&&c.unshift({key:0,value:f.attrs});E=0;for(L=c[l];E<L;E++)Mb(c[E].value,f,b/100*c[E].key,b/100*(c[E-1]&&c[E-1].key||0),c[E-1]&&c[E-1].value.callback);(O=c[c[l]-1].value.callback)&&f.timeouts.push(setTimeout(function(){O.call(f)},b))}return this};ea.stop=function(){for(var a=0;a<ua.length;a++)ua[a].el.id==this.id&&ua.splice(a--,1);a=0;for(ii=
this.timeouts&&this.timeouts.length;a<ii;a++)clearTimeout(this.timeouts[a]);this.timeouts=[];clearTimeout(this._ac);delete this._ac;return this};ea.translate=function(a,b){return this.attr({translation:a+" "+b})};ea[X]=function(){return"Rapha\u00ebl\u2019s object"};k.ae=ua;var ra=function(a){this.items=[];this[l]=0;this.type="set";if(a)for(var b=0,c=a[l];b<c;b++)if(a[b]&&(a[b].constructor==ga||a[b].constructor==ra)){this[this.items[l]]=this.items[this.items[l]]=a[b];this[l]++}};ra[r][Y]=function(){for(var a,
b,c=0,e=arguments[l];c<e;c++)if((a=arguments[c])&&(a.constructor==ga||a.constructor==ra)){b=this.items[l];this[b]=this.items[b]=a;this[l]++}return this};ra[r].pop=function(){delete this[this[l]--];return this.items.pop()};for(var Xa in ea)ea[m](Xa)&&(ra[r][Xa]=function(a){return function(){for(var b=0,c=this.items[l];b<c;b++)this.items[b][a][J](this.items[b],arguments);return this}}(Xa));ra[r].attr=function(a,b){if(a&&k.is(a,P)&&k.is(a[0],"object"))for(var c=0,e=a[l];c<e;c++)this.items[c].attr(a[c]);
else{c=0;for(e=this.items[l];c<e;c++)this.items[c].attr(a,b)}return this};ra[r].animate=function(a,b,c,e){(k.is(c,"function")||!c)&&(e=c||null);var f=this.items[l],d=f,j,o=this,p;e&&(p=function(){!--f&&e.call(o)});c=k.is(c,"string")?c:p;for(j=this.items[--d].animate(a,b,c,p);d--;)this.items[d]&&!this.items[d].removed&&this.items[d].animateWith(j,a,b,c,p);return this};ra[r].insertAfter=function(a){for(var b=this.items[l];b--;)this.items[b].insertAfter(a);return this};ra[r].getBBox=function(){for(var a=
[],b=[],c=[],e=[],f=this.items[l];f--;){var d=this.items[f].getBBox();a[Y](d.x);b[Y](d.y);c[Y](d.x+d.width);e[Y](d.y+d.height)}a=h[J](0,a);b=h[J](0,b);return{x:a,y:b,width:D[J](0,c)-a,height:D[J](0,e)-b}};ra[r].clone=function(a){a=new ra;for(var b=0,c=this.items[l];b<c;b++)a[Y](this.items[b].clone());return a};k.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"],e;for(e in a.face)a.face[m](e)&&(b.face[e]=a.face[e]);this.fonts[c]?
this.fonts[c][Y](b):this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=ma(a.face["units-per-em"],10);for(var f in a.glyphs)if(a.glyphs[m](f)){c=a.glyphs[f];b.glyphs[f]={w:c.w,k:{},d:c.d&&"M"+c.d.replace(/[mlcxtrv]/g,function(j){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[j]||"M"})+"z"};if(c.k)for(var d in c.k)c[m](d)&&(b.glyphs[f].k[d]=c.k[d])}}return a};H.getFont=function(a,b,c,e){e=e||"normal";c=c||"normal";b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400;if(k.fonts){var f=k.fonts[a];
if(!f){a=RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i");for(var d in k.fonts)if(k.fonts[m](d))if(a.test(d)){f=k.fonts[d];break}}var j;if(f){d=0;for(a=f[l];d<a;d++){j=f[d];if(j.face["font-weight"]==b&&(j.face["font-style"]==c||!j.face["font-style"])&&j.face["font-stretch"]==e)break}}return j}};H.print=function(a,b,c,e,f,d,j){d=d||"middle";j=D(h(j||0,1),-1);var o=this.set(),p=z(c).split(""),q=0;k.is(e,c)&&(e=this.getFont(e));if(e){c=(f||16)/e.face["units-per-em"];var E=e.face.bbox.split(I);
f=+E[0];d=+E[1]+(d=="baseline"?E[3]-E[1]+ +e.face.descent:(E[3]-E[1])/2);E=0;for(var L=p[l];E<L;E++){var M=E&&e.glyphs[p[E-1]]||{},R=e.glyphs[p[E]];q+=E?(M.w||e.w)+(M.k&&M.k[p[E]]||0)+e.w*j:0;R&&R.d&&o[Y](this.path(R.d).attr({fill:"#000",stroke:"none",translation:[q,0]}))}o.scale(c,c,f,d).translate(a-f,b-d)}return o};k.format=function(a,b){var c=k.is(b,P)?[0].concat(b):arguments;a&&k.is(a,"string")&&c[l]-1&&(a=a.replace(i,function(e,f){return c[++f]==null?"":c[f]}));return a||""};k.ninja=function(){g.was?
F.Raphael=g.is:delete Raphael;return k};k.el=ea;k.st=ra[r];g.was?F.Raphael=k:Raphael=k})();(function(){function k(B){return(B+"").replace(W,"")}function Q(B,l,v){for(var C=B.length;C<l;C++)B=v?"0"+B:B+"0";return B}function S(B){return ha.call(B)==="[object Array]"}function G(B,l){if(B.indexOf)return B.indexOf(l);for(var v=0,C=B.length;v<C;v++)if(B[v]===l)return v;return-1}function K(B,l,v){var C=l["-"];l=l["+"];var D;switch(v){case "n -":C=" "+C;l=" "+l;case "n-":if(B.substr(B.length-C.length)===C)D=["-",B.substr(0,B.length-C.length)];else if(B.substr(B.length-l.length)===l)D=["+",B.substr(0,
B.length-l.length)];break;case "- n":C+=" ";l+=" ";case "-n":if(B.indexOf(C)===0)D=["-",B.substr(C.length)];else if(B.indexOf(l)===0)D=["+",B.substr(l.length)];break;case "(n)":if(B.indexOf("(")===0&&B.substr(B.length-1)===")")D=["-",B.substr(1,B.length-2)]}return D||["",B]}function x(B,l){if(!l)return 0;for(var v,C=B.getTime(),D=0,h=l.length;D<h;D++){v=l[D].start;if(v===null||C>=v)return D}return 0}function I(B){return B.split("\u00a0").join(" ").toUpperCase()}function w(B){for(var l=[],v=0,C=B.length;v<
C;v++)l[v]=I(B[v]);return l}function i(B,l,v,C){B=B.getFullYear();if(!C&&l.eras)B-=l.eras[v].offset;return B}function r(B,l){for(var v=0,C=false,D=0,h=B.length;D<h;D++){var n=B.charAt(D);switch(n){case "'":if(C)l.push("'");else v++;C=false;break;case "\\":C&&l.push("\\");C=!C;break;default:l.push(n);C=false}}return v}function m(B,l){l=l||"F";var v;v=B.patterns;var C=l.length;if(C===1){v=v[l];if(!v)throw"Invalid date format string '"+l+"'.";l=v}else if(C===2&&l.charAt(0)==="%")l=l.charAt(1);return l}
function y(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g}function F(B,l,v){B=k(B);v=v.calendar;a:{var C=v._parseRegExp;if(C){var D=C[l];if(D){l=D;break a}}else v._parseRegExp=C={};D=m(v,l).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");for(var h=["^"],n=[],s=0,A=0,N=y(),P;(P=N.exec(D))!==null;){var X=D.slice(s,P.index);s=N.lastIndex;A+=r(X,h);if(A%2)h.push(P[0]);else{X=P[0];var ja=X.length;switch(X){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":X=
"(\\D+)";break;case "tt":case "t":X="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":X="(\\d{"+ja+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":X="(\\d\\d?)";break;case "zzz":X="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":X="([+-]?\\d\\d?)";break;case "/":X="(\\"+v["/"]+")";break;default:throw"Invalid date format pattern '"+X+"'.";}X&&h.push(X);n.push(P[0])}}r(D.slice(s),h);h.push("$");D=
{regExp:h.join("").replace(/\s+/g,"\\s+"),groups:n};l=C[l]=D}A=RegExp(l.regExp).exec(B);if(A===null)return null;N=l.groups;var Y=B=null,ca=null,ka=l=null;n=h=D=C=0;P=null;s=false;X=0;for(ja=N.length;X<ja;X++){var da=A[X+1];if(da){var qa=N[X],Z=qa.length,U=parseInt(da,10);switch(qa){case "dd":case "d":l=U;if(l<1||l>31)return null;break;case "MMM":case "MMMM":ca=v;Z=Z===3;qa=ca.months;var ma=ca.monthsGenitive||ca.months,va=ca._upperMonths;U=ca._upperMonthsGen;if(!va){ca._upperMonths=va=[w(qa.names),
w(qa.namesAbbr)];ca._upperMonthsGen=U=[w(ma.names),w(ma.namesAbbr)]}da=I(da);ca=G(Z?va[1]:va[0],da);if(ca<0)ca=G(Z?U[1]:U[0],da);if(ca<0||ca>11)return null;break;case "M":case "MM":ca=U-1;if(ca<0||ca>11)return null;break;case "y":case "yy":case "yyyy":if(Z<4){Y=v;da=U;U=new Date;qa=x(U);if(da<100){Z=Y.twoDigitYearMax;Z=typeof Z==="string"?(new Date).getFullYear()%100+parseInt(Z,10):Z;Y=i(U,Y,qa);da+=Y-Y%100;if(da>Z)da-=100}Y=da}else Y=U;if(Y<0||Y>9999)return null;break;case "h":case "hh":C=U;if(C===
12)C=0;if(C<0||C>11)return null;break;case "H":case "HH":C=U;if(C<0||C>23)return null;break;case "m":case "mm":D=U;if(D<0||D>59)return null;break;case "s":case "ss":h=U;if(h<0||h>59)return null;break;case "tt":case "t":s=v.PM&&(da===v.PM[0]||da===v.PM[1]||da===v.PM[2]);if(!s&&(!v.AM||da!==v.AM[0]&&da!==v.AM[1]&&da!==v.AM[2]))return null;break;case "f":case "ff":case "fff":n=U*Math.pow(10,3-Z);if(n<0||n>999)return null;break;case "ddd":case "dddd":ka=da;da=Z===3;U=void 0;U=v.days;Z=v._upperDays;if(!Z)v._upperDays=
Z=[w(U.names),w(U.namesAbbr),w(U.namesShort)];ka=I(ka);if(da){U=G(Z[1],ka);if(U===-1)U=G(Z[2],ka)}else U=G(Z[0],ka);ka=U;if(ka<0||ka>6)return null;break;case "zzz":Z=da.split(/:/);if(Z.length!==2)return null;P=parseInt(Z[0],10);if(P<-12||P>13)return null;Z=parseInt(Z[1],10);if(Z<0||Z>59)return null;P=P*60+(da.indexOf("-")===0?-Z:Z);break;case "z":case "zz":P=U;if(P<-12||P>13)return null;P*=60;break;case "g":case "gg":if(!da||!v.eras)return null;da=k(da.toLowerCase());Z=0;for(U=v.eras.length;Z<U;Z++)if(da===
v.eras[Z].name.toLowerCase()){B=Z;break}if(B===null)return null}}}A=new Date;N=(X=v.convert)?X.fromGregorian(A)[0]:A.getFullYear();if(Y===null)Y=N;else if(v.eras)Y+=v.eras[B||0].offset;if(ca===null)ca=0;if(l===null)l=1;if(X){A=X.toGregorian(Y,ca,l);if(A===null)return null}else{A.setFullYear(Y,ca,l);if(A.getDate()!==l)return null;if(ka!==null&&A.getDay()!==ka)return null}if(s&&C<12)C+=12;A.setHours(C,D,h,n);if(P!==null){v=A.getMinutes()-(P+A.getTimezoneOffset());A.setHours(A.getHours()+parseInt(v/
60,10),v%60)}return A}function g(B,l,v){function C(Z,U){var ma;ma=Z+"";if(U>1&&ma.length<U){ma=X[U-2]+ma;return ma.substr(ma.length-U,U)}return ma}function D(){if(ja||Y)return ja;ja=ca.test(l);Y=true;return ja}function h(Z,U){if(qa)return qa[U];switch(U){case 0:return Z.getFullYear();case 1:return Z.getMonth();case 2:return Z.getDate()}}var n=v.calendar,s=n.convert;if(!l||!l.length||l==="i"){if(v&&v.name.length)if(s)v=g(B,n.patterns.F,v);else{v=new Date(B.getTime());var A=x(B,n.eras);v.setFullYear(i(B,
n,A));v=v.toLocaleString()}else v=B.toString();return v}A=n.eras;var N=l==="s";l=m(n,l);v=[];var P,X=["0","00","000"],ja,Y,ca=/([^d]|^)(d|dd)([^d]|$)/g,ka=0,da=y(),qa;if(!N&&s)qa=s.fromGregorian(B);for(;;){P=da.lastIndex;s=da.exec(l);P=l.slice(P,s?s.index:l.length);ka+=r(P,v);if(!s)break;if(ka%2)v.push(s[0]);else{P=s[0];s=P.length;switch(P){case "ddd":case "dddd":names=s===3?n.days.namesAbbr:n.days.names;v.push(names[B.getDay()]);break;case "d":case "dd":ja=true;v.push(C(h(B,2),s));break;case "MMM":case "MMMM":P=
h(B,1);v.push(n.monthsGenitive&&D()?n.monthsGenitive[s===3?"namesAbbr":"names"][P]:n.months[s===3?"namesAbbr":"names"][P]);break;case "M":case "MM":v.push(C(h(B,1)+1,s));break;case "y":case "yy":case "yyyy":P=qa?qa[0]:i(B,n,x(B,A),N);if(s<4)P%=100;v.push(C(P,s));break;case "h":case "hh":P=B.getHours()%12;if(P===0)P=12;v.push(C(P,s));break;case "H":case "HH":v.push(C(B.getHours(),s));break;case "m":case "mm":v.push(C(B.getMinutes(),s));break;case "s":case "ss":v.push(C(B.getSeconds(),s));break;case "t":case "tt":P=
B.getHours()<12?n.AM?n.AM[0]:" ":n.PM?n.PM[0]:" ";v.push(s===1?P.charAt(0):P);break;case "f":case "ff":case "fff":v.push(C(B.getMilliseconds(),3).substr(0,s));break;case "z":case "zz":P=B.getTimezoneOffset()/60;v.push((P<=0?"+":"-")+C(Math.floor(Math.abs(P)),s));break;case "zzz":P=B.getTimezoneOffset()/60;v.push((P<=0?"+":"-")+C(Math.floor(Math.abs(P)),2)+":"+C(Math.abs(B.getTimezoneOffset()%60),2));break;case "g":case "gg":n.eras&&v.push(n.eras[x(B,A)].name);break;case "/":v.push(n["/"]);break;default:throw"Invalid date format pattern '"+
P+"'.";}}}return v.join("")}var u={},H={en:{}};H["default"]=H.en;u.extend=function(B){for(var l=arguments[1]||{},v=2,C=arguments.length;v<C;v++){var D=arguments[v];if(D)for(var h in D){var n=D[h];if(typeof n!=="undefined")if(B&&(ha.call(n)==="[object Object]"||S(n))){var s=l[h];s=s&&(ha.call(s)==="[object Object]"||S(s))?s:S(n)?[]:{};l[h]=this.extend(true,s,n)}else l[h]=n}}return l};u.findClosestCulture=function(B){var l;if(!B)return this.culture||this.cultures["default"];if(ha.call(B)==="[object String]")B=
B.split(",");if(S(B)){for(var v,C=this.cultures,D=B,h=D.length,n=[],s=0;s<h;s++){B=k(D[s]);B=B.split(";");v=k(B[0]);if(B.length===1)B=1;else{B=k(B[1]);if(B.indexOf("q=")===0){B=B.substr(2);B=parseFloat(B,10);B=isNaN(B)?0:B}else B=1}n.push({lang:v,pri:B})}n.sort(function(A,N){return A.pri<N.pri?1:-1});for(s=0;s<h;s++){v=n[s].lang;if(l=C[v])return l}for(s=0;s<h;s++){v=n[s].lang;do{D=v.lastIndexOf("-");if(D===-1)break;v=v.substr(0,D);if(l=C[v])return l}while(1)}}else if(typeof B==="object")return B;
return l||null};u.preferCulture=function(B){this.culture=this.findClosestCulture(B)||this.cultures["default"]};u.localize=function(B,l,v){if(typeof l==="string"){l=l||"default";l=this.cultures[l]||{name:l}}var C=H[l.name];if(arguments.length===3){C||(C=H[l.name]={});C[B]=v}else{if(C)v=C[B];if(typeof v==="undefined"){if(C=H[l.language])v=C[B];if(typeof v==="undefined")v=H["default"][B]}}return typeof v==="undefined"?null:v};u.format=function(B,l,v){v=this.findClosestCulture(v);if(typeof B==="number"){var C=
B;if(!l||l==="i")B=v.name.length?C.toLocaleString():C.toString();else{l=l||"D";v=v.numberFormat;B=Math.abs(C);var D=-1;if(l.length>1)D=parseInt(l.slice(1),10);var h=l.charAt(0).toUpperCase(),n;switch(h){case "D":l="n";if(D!==-1)B=Q(""+B,D,true);if(C<0)B=-B;break;case "N":n=v;case "C":n=n||v.currency;case "P":n=n||v.percent;l=C<0?n.pattern[0]:n.pattern[1]||"n";if(D===-1)D=n.decimals;b:{var s=B*(h==="P"?100:1);h=n;n=h.groupSizes;B=n[0];C=1;var A=Math.pow(10,D),N=Math.round(s*A)/A;isFinite(N)||(N=s);
A="";A=(N+"").split(/e/i);N=A.length>1?parseInt(A[1],10):0;s=A[0];A=s.split(".");s=A[0];A=A.length>1?A[1]:"";if(N>0){A=Q(A,N,false);s+=A.slice(0,N);A=A.substr(N)}else if(N<0){N=-N;s=Q(s,N+1);A=s.slice(-N,s.length)+A;s=s.slice(0,-N)}A=D>0?h["."]+(A.length>D?A.slice(0,D):Q(A,D)):"";D=s.length-1;h=h[","];for(N="";D>=0;){if(B===0||B>D){B=s.slice(0,D+1)+(N.length?h+N+A:A);break b}N=s.slice(D-B+1,D+1)+(N.length?h+N:"");D-=B;if(C<n.length){B=n[C];C++}}B=s.slice(0,D+1)+h+N+A}break;default:throw"Bad number format specifier: "+
h;}n=/n|\$|-|%/g;for(C="";;){D=n.lastIndex;h=n.exec(l);C+=l.slice(D,h?h.index:l.length);if(!h)break;switch(h[0]){case "n":C+=B;break;case "$":C+=v.currency.symbol;break;case "-":if(/[1-9]/.test(B))C+=v["-"];break;case "%":C+=v.percent.symbol}}B=C}}else if(B instanceof Date)B=g(B,l,v);return B};u.parseInt=function(B,l,v){return Math.floor(this.parseFloat(B,l,v))};u.parseFloat=function(B,l,v){v=this.findClosestCulture(v);var C=NaN;v=v.numberFormat;B=k(B);if(aa.test(B))C=parseFloat(B,l);else if(!l&&
z.test(B))C=parseInt(B,16);else{var D=K(B,v,v.pattern[0]);l=D[0];D=D[1];if(l===""&&v.pattern[0]!=="-n"){D=K(B,v,"-n");l=D[0];D=D[1]}l=l||"+";var h;B=D.indexOf("e");if(B<0)B=D.indexOf("E");if(B<0){h=D;B=null}else{h=D.substr(0,B);B=D.substr(B+1)}var n=v["."],s=h.indexOf(n);if(s<0){D=h;h=null}else{D=h.substr(0,s);h=h.substr(s+n.length)}n=v[","];D=D.split(n).join("");s=n.replace(/\u00A0/g," ");if(n!==s)D=D.split(s).join("");l+=D;if(h!==null)l+="."+h;if(B!==null){v=K(B,v,"-n");l+="e"+(v[0]||"+")+v[1]}if(fa.test(l))C=
parseFloat(l)}return C};u.parseDate=function(B,l,v){v=this.findClosestCulture(v);var C,D;if(l){if(typeof l==="string")l=[l];if(l.length){D=0;for(var h=l.length;D<h;D++){var n=l[D];if(n)if(C=F(B,n,v))break}}}else{l=v.calendar.patterns;for(D in l)if(C=F(B,l[D],v))break}return C||null};var J=u.cultures=u.cultures||{};J=J["default"]=J.en=u.extend(true,{name:"en",englishName:"English",nativeName:"English",isRTL:false,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],
"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April",
"May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},J.en);J.calendar=J.calendar||
J.calendars.standard;var W=/^\s+|\s+$/g,aa=/^[+-]?infinity$/i,z=/^0x[a-f0-9]+$/i,fa=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,ha=Object.prototype.toString;jQuery.findClosestCulture=u.findClosestCulture;jQuery.culture=u.culture;jQuery.cultures=u.cultures;jQuery.preferCulture=u.preferCulture;jQuery.localize=u.localize;jQuery.format=u.format;jQuery.parseInt=u.parseInt;jQuery.parseFloat=u.parseFloat;jQuery.parseDate=u.parseDate})();(function(k){var Q=k({});k.subscribe=function(){Q.bind.apply(Q,arguments)};k.unsubscribe=function(){Q.unbind.apply(Q,arguments)};k.publish=function(){Q.trigger.apply(Q,arguments)}})(jQuery);var timeglider=window.timeglider={version:"0.1.0"};
(function(k){var Q={},S={},G={},K={},x={};k.TG_Date=function(w){function i(F){var g=Math.abs(F.rd)*86400,u=F.ho*3600,H=(F.mi-1)*60,J=1;if(F.rd<0)J=-1;return J*(g+u+H)}var r,m,y;if(typeof w=="number"){r=m=I.getDateFromSec(w);y=w}else r=m=w;if(function(F){F=jQuery.trim(F);reg=RegExp(/[0-9-: ]/);return reg.test(F)?F:"shit"}(r)==="shit")return{error:"Invalid date"};else{r=r.replace(",","");if(r.substr(0,1)=="-"){this.bce=1;r=r.substr(1)}else this.bce=0;r=r.replace(/[^0-9]/g,"-");w=r.split("-");this.ye=
parseInt(w[0],10);this.mo=parseInt(w[1],10);this.mo_num=this.ye>0?(this.ye-1)*12+this.mo:-1*((Math.abs(this.ye)-1)*12+(12-(this.mo-1)));this.da=parseInt(w[2],10);this.ho=parseInt(w[3],10);this.mi=parseInt(w[4],10);this.se=parseInt(w[5],10);this.rd=I.getRataDie(this);this.sec=y||i(this);this.dateStr=m}};var I=k.TG_Date;I.getTimeUnitSerial=function(w,i){switch(i){case "ye":return w.ye;case "mo":return w.mo_num;case "da":return w.rd;case "de":return Math.ceil(w.ye/10);case "ce":return Math.ceil(w.ye/
100);case "thou":return Math.ceil(w.ye/1E3);case "tenthou":return Math.ceil(w.ye/1E4);case "hundredthou":return Math.ceil(w.ye/1E5);case "mill":return Math.ceil(w.ye/1E6);case "tenmill":return Math.ceil(w.ye/1E7);case "hundredmill":return Math.ceil(w.ye/1E8);case "bill":return Math.ceil(w.ye/1E9)}};I.getMonthDays=function(w,i){return I.isLeapYear(i)==true&&w==2?29:I.monthsDayNums[w]};I.twentyFourToTwelve=function(w){var i={};i.ye=w.ye;i.mo=w.mo;i.da=w.da;i.ho=w.ho;i.mi=w.mi;i.ampm="am";if(w.ho)if(w.ho>=
12){i.ampm="pm";i.ho=w.ho>12?w.ho-12:12}else if(w.ho==0){i.ho=12;i.ampm="am"}else i.ho=w.ho;else{i.ho=12;i.mi=0;i.ampm="am"}return i};I.getMonthAdj=function(w,i){var r=I.getDateFromMonthNum(w);switch(r.mo){case 1:case 3:case 5:case 7:case 8:case 10:case 12:r=Math.floor(i+i/28*3);return{width:r,days:31};case 2:if(I.isLeapYear(r.ye)==true){r=Math.floor(i+i/28);return{width:r,days:29}}else return{width:i,days:28};default:r=Math.floor(i+i/28*2);return{width:r,days:30}}};I.getDateFromMonthNum=function(w){var i=
0;if(w>0){i=w%12;if(i==0)i=12;w=Math.ceil(w/12)}else{i=Math.abs(w)%12;i=12-i+1;if(i==13)i=1;w=-1*Math.ceil(Math.abs(w)/12)}return{ye:w,mo:i}};I.getMonthWidth=function(w,i,r){i=t/28;var m;switch(w){case 1:case 3:case 5:case 7:case 8:case 10:case 12:m=3;break;case 4:case 6:case 9:case 11:m=2;break;case 2:m=I.isLeapYear(yr)==true?1:0}return{width:Math.floor(r+i*m),numDays:28+m}};I.getToday=function(){var w=new Date;return w.getFullYear()+"-"+w.getMonth()+"-"+w.getDate()+" "+w.getHours()+":"+w.getMinutes()+
":00"};I.getMonthFromRemDays=function(w,i){var r=0;var m=r=0;r=I.isLeapYear(i)?1:0;if(w<=31){m=1;r=w}else if(w>31&&w<=59+r){m=2;r=w-(31+r)}else if(w>59+r&&w<=90+r){m=3;r=w-(59+r)}else if(w>90+r&&w<=120+r){m=4;r=w-(90+r)}else if(w>120+r&&w<=151+r){m=5;r=w-(120+r)}else if(w>151+r&&w<=181+r){m=6;r=w-(151+r)}else if(w>181+r&&w<=212+r){m=7;r=w-(181+r)}else if(w>212+r&&w<=243+r){m=8;r=w-(212+r)}else if(w>243+r&&w<=273+r){m=9;r=w-(243+r)}else if(w>273+r&&w<=304+r){m=10;r=w-(273+r)}else if(w>304+r&&w<=334+
r){m=11;r=w-(304+r)}else{m=12;r=w-(334+r)}return{mo:m,da:r}};I.getDateFromRD=function(w){if(K[w])return K[w];for(var i=Math.floor(w),r=Math.floor(i/146097)*400,m=i-Math.floor(i/146097)*146097,y=1,F=r+1,g=F+400;F<=g;F++)if(m>365){m-=365;if(I.isLeapYear(F))m-=1;y++}else F=g;r+=y;if(m==0)m=1;m=I.getMonthFromRemDays(m,r);y=(w-i)*1440;i=Math.floor(y%60);y=Math.floor(y/60);if(I.isLeapYear(r)&&m.mo==2)m.da+=1;i=r+"-"+m.mo+"-"+m.da+" "+y+"::"+i+":00";return K[w]=i};I.getDateFromSec=function(w){if(x[w])return x[w];
var i=I.getDateFromRD(w/86400);return x[w]=i};I.isLeapYear=function(w){return w%400==0?true:w%100==0?false:w%4==0?true:false};I.getRataDie=function(w){function i(H,J){if(S[H+"-"+J])return S[H+"-"+J];for(var W=0,aa=H;aa<J;aa++)W+=I.isLeapYear(aa)?366:365;return S[H+"-"+J]=W}function r(H,J){var W;switch(H){case 1:W=0;break;case 2:W=31;break;case 3:W=59;break;case 4:W=90;break;case 5:W=120;break;case 6:W=151;break;case 7:W=181;break;case 8:W=212;break;case 9:W=243;break;case 10:W=273;break;case 11:W=
304;break;case 12:W=334}if(H>2)if(I.isLeapYear(J))W+=1;return W}var m=w.ye,y=w.mo;w=w.da;var F=0;if(Q[m+"-"+y+"-"+w])return Q[m+"-"+y+"-"+w];if(m>=0){if(m==0)m=1;F=Math.floor(m/400)*146097;var g=parseInt(i(m-m%400,m)),u=parseInt(r(y,m));F=F+g+u+w-366}else if(m<0)F=I.getBCRataDie({ye:m,mo:y,da:w});return Q[m+"-"+y+"-"+w]=F};I.getBCRataDie=function(w){var i=w.ye,r=w.mo;w=w.da;if(G[i+"-"+r+"-"+w])return G[i+"-"+r+"-"+w];if(r==0)r=1;if(w==0)w=1;var m=-1*((Math.abs(i)-1)*366+[0,335,306,275,245,214,184,
153,122,92,61,31,0][r]+(I.monthsDayNums[r]-w+1));return G[i+"-"+r+"-"+w]=m};I.monthNamesFull=["","January","February","March","April","May","June","July","August","September","October","November","December"];I.monthNamesAbbr=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];I.monthsDayNums=[0,31,28,31,30,31,30,31,31,30,31,30,31,29];I.monthNamesLet=["","J","F","M","A","M","J","J","A","S","O","N","D"];I.dayNamesFull=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday",
"Saturday"];I.dayNamesAbbr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];I.dayNamesLet=["S","M","T","W","T","F","S"];I.units=["da","mo","ye","de","ce","thou","tenthou","hundredthou","mill","tenmill","hundredmill","bill"];I.prototype={formatFocusDate:function(){return this.ye+"-"+this.mo+"-"+this.da+" "+this.ho+":"+this.mi+":00"},format:function(w){var i="";switch(w){case "YYYY-MM-DD":i=this.ye+"-"+this.mo+"-"+this.da;break;case "YYYY":i=this.ye;break;default:i=this.ye+"-"+this.mo+"-"+this.da+" "+this.ho+
":"+this.mi+":00"}return i}}})(timeglider);(function(k){var Q=k.levelHeight=8,S=jQuery;k.TG_Org=function(){this.blocks=[];this.ids=[];this.vis=[];this.tree=[];var G=this;this.addBlock=function(I,w){I.right=I.left+I.width;I.bottom=I.top+I.height;I.tickScope=w;G.blocks.push(I)};this.getBorg=function(){return this};this.getBlocks=function(){return this.blocks};this.getHTML=function(I){if(I=="sweep"){G.tree=[];for(var w=0;w<300;w++)G.tree[w]=[];this.vis=[]}this.blocks.sort(K);var i,r,m="";i=w="";for(var y={},F=this.blocks.length,g=0,u=0;u<F;u++){y=
this.blocks[u];if(y.tickScope==I)if(S.inArray(y.id,this.vis)==-1){this.vis.push(y.id);g=0;if(y.html&&y.html.substr(0,4)=="<div"){i="<div style='left:"+y.left+"px' id='ev_"+y.id+"'"+y.html.substr(4);w+=i}else{if(y.image){if(y.image_class=="layout")g=y.image_size.height+4;m="<div class='timeglider-event-image-"+y.image_class+"'><img src='"+y.image+"'></div>"}else m="";x(y,0);if(y.y_position>0)y.top=-1*y.y_position;y.fontsize<10?y.opacity=y.fontsize/10:y.opacity=1;if(y.span==true){i="timeglider-event-spanning";
r="<div class='timeglider-event-spanner' style='height:"+y.fontsize+"px;width:"+y.spanwidth+"px'></div>"}else r=i="";w+="<div class='timeglider-timeline-event "+i+"' id='ev_"+y.id+"' style='width:"+y.width+"px;height:"+y.height+"px;left:"+y.left+"px;opacity:"+y.opacity+";top:"+y.top+"px;font-size:"+y.fontsize+"px;'><img class='timeglider-event-icon' src='"+y.icon+"' style='height:"+y.fontsize+"px;left:-"+(y.fontsize+2)+"px; top:"+g+"px'>"+m+r+"<div class='timeglider-event-title' style='top:"+g+"px'>"+
y.title+"</div></div>"}}}return w};var K=function(I,w){var i=w.importance,r=I.importance;return i<r?-1:i>r?1:0},x=function(I,w){var i=false,r=G.tree,m=r[w],y=w+1,F=false,g=2;bump_ht=Q;if(m!=undefined){for(g=0;g<m.length;g++){a:{i=m[g];if(!(I.left>i.right||I.right<i.left))if(I.left>=i.left&&I.left<=i.right||I.right>=i.left&&I.right<=i.right||I.right>=i.right&&I.left<=i.left||I.right<=i.right&&I.left>=i.left)if(I.bottom<=i.bottom&&I.bottom>=i.top||I.top<=i.bottom&&I.top>=i.top||I.top==i.bottom&&I.top==
i.top){i=true;break a}i=false}if(i==true){I.top-=bump_ht;I.bottom-=bump_ht;x(I,y);F=true;break}}if(F==false){I.top-=I.fontsize;m.push(I);g=Math.ceil(I.height/Q);m=0;for(m=1;m<=g;m++){y=w+m;r[y].push(I)}}}}}})(timeglider);(function(k){var Q=k.TG_Date,S=jQuery,G={};k.TG_Timeline=Backbone.Model.extend({defaults:{title:"Untitled",events:[]},_chewTimeline:function(K){var x=K.mediator;G=x.options;var I={da:[],mo:[],ye:[],de:[],ce:[],thou:[],tenthou:[],hundredthou:[],mill:[],tenmill:[],hundredmill:[],bill:[]},w=Q.units;K.startSeconds=[];K.endSeconds=[];K.spans=[];if(!K.color)K.color="#333333";if(K.events){for(var i,r,m,y,F=K.events.length,g=0;g<F;g++){i=K.events[g];if(i.id)r=i.id;else i.id=r="anon"+this.anonEventId++;i.startdateObj=
new Q(i.startdate);i.enddateObj=new Q(i.enddate);i.icon=!i.icon||i.icon==="none"?"":G.icon_folder+"/"+i.icon;i.titleWidth=k.getStringWidth(i.title);if(i.image)if(!i.image_class){i.image_class="layout";i.image_size=k.getImageSize(i.image)}K.startSeconds.push(i.startdateObj.sec);K.endSeconds.push(i.enddateObj.sec);if(i.enddateObj.sec>i.startdateObj.sec){i.span=true;K.spans.push({id:i.id,start:i.startdateObj.sec,end:i.enddateObj.sec})}else i.span=false;for(var u=w.length,H=0;H<u;H++){m=w[H];y=Q.getTimeUnitSerial(i.startdateObj,
m);if(I[m][y]!==undefined)I[m][y].push(r);else I[m][y]=[r]}x.eventPool["ev_"+r]=i}x=S.merge(K.startSeconds,K.endSeconds);x=timeglider.getLowHigh(x);K.bounds={first:x.low,last:x.high}}K.display="expanded";K.dateHash=I;delete K.events;return K},initialize:function(K){this.set(this._chewTimeline(K))},validate:function(){}})})(timeglider);(function(k){var Q=k.TG_Date,S="",G="",K={},x=jQuery,I={},w="";debug.trace=function(i,r){x("#"+r).text(i)};k.TG_TimelineView=function(i,r){G=r;K=G.options;S="#"+i._id;w=i._id;var m=this;this._views={PLACE:S,CONTAINER:S+" .timeglider-container",TIMELINE_MENU:S+" .timeglider-timeline-menu",TIMELINE_MENU_UL:S+" .timeglider-timeline-menu ul",TIMELINE_LIST_BT:S+" .timeglider-list-bt",SLIDER_CONTAINER:S+" .timeglider-slider-container",SLIDER:S+" .timeglider-slider",ZOOM_DISPLAY:S+" .timeglider-zoomlevel-display",
TRUCK:S+" .timeglider-truck",CENTERLINE:S+" .timeglider-centerline",TICKS:S+" .timeglider-ticks",HANDLE:S+" .timeglider-handle",FOOTER:S+" .timeglider-footer",FILTER_BT:S+" .timeglider-filter-bt",FILTER_BOX:S+" .timeglider-filter-box",TOOLS_BT:S+" .timeglider-tools-bt"};this._templates={event_modal:x.template(null,"<div class='tg-modal timeglider-ev-modal ui-widget-content' id='ev_${id}_modal'><div class='close-button-remove'><img src='img/close.png'></div><div class='startdate'>${startdate}</div><h4 id='title'>${title}</h4><p>{{html description}}</p><ul class='timeglider-ev-modal-links'><li><a target='_blank' href='${link}'>link</a></li></ul></div>"),
event_modal_video:x.template(null,"<div class='tg-modal timeglider-ev-video-modal ui-widget-content' id='${id}_modal'><div class='close-button-remove'><img src='img/close.png'></div><iframe width = '100%' height='300' src='${video}'></iframe></div>"),timeline_modal:x.template(null,"<div class='tg-modal timeglider-timeline-modal ui-widget-content' id='tl_${id}_modal'><div class='close-button-remove'><img src='img/close.png'></div><h4 id='title'>${title}</h4><p>{{html description}}</p></div>"),filter_modal:x.template(null,
"<div class='tg-modal timeglider-menu-modal timeglider-filter-box timeglider-menu-hidden'><div class='close-button'><img src='img/close.png'></div><h3>filter</h3><div class='timeglider-menu-modal-content'><div class='timeglider-formline'>show: <input type='text' class='timeglider-filter-include'></div><div class='timeglider-formline'>hide: <input type='text' class='timeglider-filter-exclude'></div><ul><li class='timeglider-filter-clear'>clear</li><li class='timeglider-filter-apply'>apply</li></ul></div><div class='timeglider-menu-modal-point-right'></div>"),
timeline_list_modal:x.template(null,"<div class='timeglider-menu-modal timeglider-timeline-menu timeglider-menu-hidden'><div class='close-button'><img src='img/close.png'></div><h3>timelines</h3><div class='timeglider-menu-modal-content'><ul></ul></div><div class='timeglider-menu-modal-point-right'></div>")};x(this._views.CONTAINER).css("height",x(S).height());this.basicFontSize=K.basic_fontsize;K.show_footer==false&&x(this._views.FOOTER).css("display","none");this.dragSpeed=0;this.dimensions=this.getWidgetDimensions();
this.ticksHandleOffset=this.rightside=this.leftside=this.tickNum=0;this.timeoout_id=1;this.sliderActive=false;this.ztop=1E3;this.filterBoxActivated=false;this.buildSlider();this.setupFilter();x.subscribe("mediator.timelineDataLoaded",function(){G.setInitialTimelines();x(".timeglider-loading").fadeOut(500)});x.subscribe("mediator.ticksOffsetChange",function(){m.tickHangies();m.registerTitles();m.registerDragging()});x.subscribe("mediator.zoomLevelChange",function(){m.tickNum=0;m.leftside=0;var F=G.getZoomLevel();
x(m._views.SLIDER).slider("value",m.invSliderVal(F));m.displayZoomLevel(F);m.castTicks("zoomLevelChange")});x.subscribe("mediator.ticksReadySignal",function(){G.ticksReady===true&&m.freshTimelines()});x.subscribe("mediator.refreshSignal",function(){m.castTicks("refreshSignal")});x.subscribe("mediator.ticksArrayChange",function(){});x.subscribe("mediator.focusDateChange",function(){});x.subscribe("mediator.timelineListChangeSignal",function(){m.buildTimelineMenu()});x.subscribe("mediator.activeTimelinesChange",
function(){x(m._views.TIMELINE_MENU_UL+" li").each(function(){var F=x(this).attr("id");x.inArray(F,G.activeTimelines)!=-1?x(this).addClass("activeTimeline"):x(this).removeClass("activeTimeline")})});x.subscribe("mediator.filterObjectChange",function(){});x(".timeglider-pan-buttons div").mousedown(function(){var F=x(this).attr("class")=="timeglider-pan-right"?-30:30;m.intervalMachine("pan",{type:"set",fn:m.pan,args:[F],intvl:30})}).mouseup(function(){m.intervalMachine("pan",{type:"clear",fn:m.pan,
callback:"resetTicksHandle"})}).mouseout(function(){m.intervalMachine("pan",{type:"clear",fn:m.pan,callback:"resetTicksHandle"})});x(this._views.TRUCK).dblclick(function(F){var g=F.pageX-m.dimensions.container.offset.left-m.dimensions.container.width/2,u=G.getZoomInfo().spp;F=G.getFocusDate().sec;g=new Q(Math.floor(F+g*u));F=new Q(F);debug.trace("DBLCLICK:"+F.mo+"-"+F.ye+" DBLCLICK:"+g.mo+"-"+g.ye,"note")}).bind("mousewheel",function(F,g){var u=Math.ceil(-1*g*3),H=G.getZoomLevel();G.setZoomLevel(H+
u);return false});x(this._views.TICKS).draggable({axis:"x",drag:function(){G.setTicksOffset(x(this).position().left)},stop:function(){m.resetTicksHandle();m.easeOutTicks();m.registerDragging()}}).delegate(".timeglider-timeline-event","click",function(){var F=x(this).attr("id"),g=G.eventPool[F];if(g.click_callback){F=g.click_callback.split(".");var u=F[0];if(F.length==2)window[u][F[1]](g);else window[u](g)}else m.eventModal(F)}).delegate(".timeglider-timeline-event","mouseover",function(){var F=x(this).attr("id");
F=G.eventPool[F];debug.trace("hover, title:"+F.title,"note");m.eventHover(x(this),F)}).delegate(".timeglider-timeline-event","mouseout",function(){var F=x(this).attr("id");F=G.eventPool[F];debug.trace("hover, title:"+F.title,"note");m.eventUnHover(x(this),F)}).delegate(".timeglider-event-collapsed","hover",function(){var F=x(this).attr("id");debug.trace("collapsed, title:"+G.eventPool[F].title,"note")});x(".close-button-remove").live("click",function(){x(this).parent().remove()});x.tmpl(m._templates.timeline_list_modal,
{}).appendTo(this._views.CONTAINER);x(m._views.TIMELINE_LIST_BT).click(function(){x(m._views.TIMELINE_MENU).toggleClass("timeglider-menu-hidden").position({my:"right bottom",at:"right top",of:x(m._views.TIMELINE_LIST_BT),offset:"-8, -12"})});x(this._views.TIMELINE_MENU+" .close-button").live("click",function(){x(m._views.TIMELINE_MENU).toggleClass("timeglider-menu-hidden")});x(this._views.TOOLS_BT).click(function(){alert("I'm just a stand-in for the tools... ")});G.options.show_centerline===true?
x(this._views.CENTERLINE).css({height:m.dimensions.container.height,left:m.dimensions.container.centerx}):x(this._views.CENTERLINE).css({display:"none"});if(x.support.touch){x("#"+w).addTouch();var y=document.getElementById(w);y.addEventListener("gesturestart",function(F){F.preventDefault();debug.trace("gesture zoom:"+G.getZoomLevel(),"note")},false);y.addEventListener("gesturechange",function(F){F.preventDefault();debug.trace("gesture change!!!!","note")},false)}};k.TG_TimelineView.prototype={getWidgetDimensions:function(){var i=
x(this._views.CONTAINER),r=i.width(),m=Math.floor(r/2)+1,y=i.height(),F=Math.floor(y/2),g=i.position().left;i=i.offset();var u=K.show_footer==true?x(this._views.FOOTER).height():0;return{container:{width:r,height:y,centerx:m,centery:F,left:g,offset:i},tick:{top:y-u-30},footer:{height:u}}},scaleToImportance:function(i,r){return i/r},displayZoomLevel:function(i){i>0&&K.display_zoom_level==true&&x(this._views.ZOOM_DISPLAY).text(i)},doSomething:function(){alert("FOO DO, viewer")},intervalMachine:function(i,
r){var m=this;if(r.type==="clear"){clearInterval(I[i]);if(r.callback)m[r.callback]()}else I[i]=setInterval(function(){r.fn.apply(m,r.args)},r.intvl)},invSliderVal:function(i){return Math.abs(i-101)},pan:function(i){i=i||20;$t=x(this._views.TICKS);newPos=$t.position().left+i;$t.css({left:newPos});G.setTicksOffset(newPos)},registerTitles:function(){var i,r,m,y,F,g,u,H,J,W,aa,z=x(this._views.CONTAINER).offset().left;x(".timeglider-event-spanning").each(function(){i=x(this).offset().left-z;r=x(this).outerWidth();
u=x(".timeglider-event-title",this);m=u.outerWidth()+5;y=u.siblings(".timeglider-event-spanner").outerWidth();y>m&&i<0&&Math.abs(i)<r-m&&u.css({marginLeft:-1*i+5})});x(".tg-timeline-envelope").each(function(){H=x(this).offset().left-z;J=x(".titleBar",this);W=x(".titleBar .timeline-title",this);F=J.position().left;aa=F+H;J.outerWidth();m=J.outerWidth();g=-1*aa;aa<0&&W.css({marginLeft:g+5})})},registerDragging:function(){var i=G.startSec,r=x(this._views.TICKS).position().left,m=G.getZoomInfo().spp;
i=new Q(i-r*m);G.setFocusDate(i)},buildTimelineMenu:function(){var i,r=G.timelinePool,m=0;x(this._views.TIMELINE_MENU_UL+" li").remove();for(i in r){if(r.hasOwnProperty(i)){var y=r[i];x(this._views.TIMELINE_MENU_UL).append("<li class = 'timelineList' id='"+i+"'>"+y.title+"</li>");x("li#"+i).click(function(){G.toggleTimeline(x(this).attr("id"))})}m++}},buildSlider:function(){var i=G.getZoomLevel();if(K.min_zoom==K.max_zoom)x(this._views.SLIDER_CONTAINER).css("display","none");else{K.display_zoom_level==
true&&x("<div>").appendTo(this._views.SLIDER_CONTAINER).addClass("timeglider-zoomlevel-display").html("&nbsp;");var r=this;i=r.invSliderVal(i);var m=G.max_zoom,y=G.min_zoom;x(this._views.SLIDER).css("height",(1+m-y)*3).slider({steps:100,handle:x(".knob"),animate:300,orientation:"vertical",min:r.invSliderVal(m),max:r.invSliderVal(y),value:i,start:function(){r.sliderActive=true},stop:function(){r.sliderActive=false},change:function(){},slide:function(F,g){G.setZoomLevel(r.invSliderVal(g.value))}})}},
eventHover:function(i,r){x(".timeglider-event-hover-info").position({my:"left bottom",at:"left top",of:i,offset:"1, -10",collision:"flip flip"}).text(r.startdateObj.format("YYYY-MM-DD"));i.addClass("tg-event-hovered")},eventUnHover:function(i){x(".timeglider-event-hover-info").css("left","-1000px");i.removeClass("tg-event-hovered")},tg_format:function(i){return i.ye+"-"+i.mo+"-"+i.da},setupFilter:function(){var i=this;x.tmpl(i._templates.filter_modal,{}).appendTo(i._views.CONTAINER);x(i._views.FILTER_BT).click(function(){var r=
x(this),m=i._views.FILTER_BOX;if(i.filterBoxActivated==false){i.filterBoxActivated=true;var y=x(m+" .timeglider-filter-apply"),F=x(".timeglider-filter-box .close-button"),g=x(m+" .timeglider-filter-clear"),u="",H="";y.click(function(){u=x(m+" .timeglider-filter-include").val();H=x(m+" .timeglider-filter-exclude").val();G.setFilterObject({include:u,exclude:H});x(m).toggleClass("timeglider-menu-shown")});F.click(function(){x(m).toggleClass("timeglider-menu-hidden")});g.click(function(){G.setFilterObject({include:"",
exclude:""});x(m+" .timeglider-filter-include").val("");x(m+" .timeglider-filter-exclude").val("");x(m).toggleClass("timeglider-menu-shown")})}x(m).toggleClass("timeglider-menu-hidden").css("z-index",i.ztop++).position({my:"right bottom",at:"right top",of:r,offset:"-8, -12"})})},clearTicks:function(){this.tickNum=0;x(this._views.TICKS).css("left",0).html("<div class='timeglider-handle'></div>")},castTicks:function(){G.getZoomLevel();var i=G.getFocusDate(),r=G.getZoomInfo().width;r=Math.ceil(this.dimensions.container.width/
r)+4;var m="l";this.clearTicks();G.setTicksReady(false);this.addTick({type:"init",focus_date:i});for(i=1;i<=r;i+=1){this.addTick({type:m});m=m=="l"?"r":"l"}G.setTicksReady(true)},addTick:function(i){var r=0,m=0,y=m=0,F=0,g=0,u="";g={};y={};var H={},J={};g={};H=G.getZoomInfo().unit;J=G.getZoomInfo().width;F=G.getFocusDate();y=parseInt(this.dimensions.tick.top);F=G.addToTicksArray({type:i.type,unit:H},F);if(H=="mo"){g=Q.getMonthAdj(F,J);J=g.width;r=g.days}this.tickNum++;if(i.type=="init"){g=this.tickOffsetFromDate(G.getZoomInfo(),
G.getFocusDate(),J);this.leftside=m=Math.ceil(this.dimensions.container.centerx+g);this.rightside=m+J}else if(i.type=="l")this.leftside=m=Math.floor(this.leftside-J);else if(i.type=="r"){m=Math.floor(this.rightside);this.rightside+=J}G.getTickBySerial(F).width=J;G.getTickBySerial(F).left=m;u=this._views.PLACE+"_"+H+"_"+F+"-"+this.tickNum;g=x("<div class='timeglider-tick' id='"+u+"'><div class='timeglider-tick-label' id='label'></div></div>").appendTo(this._views.TICKS);g.css({width:J,left:m,top:y});
y=this.getTickMarksInfo({unit:H,width:J});y=r>0?r:y.tperu;m=J/y;if(m>5){i=Raphael(u,J,30);var W="";for(r=0;r<y;++r){u=r*m;W+="M"+u+" 20 L"+u+" 30"}i.path(W).attr({stroke:"#333","stroke-width":1})}H={unit:H,width:J,serial:F};J=this.getDateLabelForTick(H);g.children("#label").text(J);return H},getTickMarksInfo:function(i){switch(i.unit){case "da":i=24;break;case "mo":i=30;break;case "ye":i=12;break;default:i=10}return{tperu:i}},getDateLabelForTick:function(i){switch(i.unit){case "bill":if(i.serial==
1)return"1";return i.serial-1+" bya";case "hundredmill":if(i.serial==1)return"1";return(i.serial-1)*100+" mya";case "tenmill":if(i.serial==1)return"1";return(i.serial-1)*10+" mya";case "mill":if(i.serial==1)return"1";return i.serial-1+" mya";case "hundredthou":if(i.serial==1)return"1";return i.serial-1+"00,000";case "tenthou":if(i.serial==1)return"1";return i.serial-1+"0000";case "thou":if(i.serial==1)return"1";return i.serial-1+"000";case "ce":if(i.serial==1)return"1";return i.serial-1+"00";case "de":return(i.serial-
1)*10+"s";case "ye":return i.serial;case "mo":i=Q.getDateFromMonthNum(i.serial);return Q.monthNamesFull[i.mo]+", "+i.ye;case "da":i=new Q(Q.getDateFromRD(i.serial));return i.mo+" "+i.da+", "+i.ye;default:return i.unit+":"+i.serial+":"+i.width}},tickHangies:function(){var i=x(this._views.TICKS).position().left,r=this.rightside+i-this.dimensions.container.width;if(this.leftside+i>-100){i=this.addTick({type:"l"});this.appendTimelines(i)}else if(r<100){i=this.addTick({type:"r"});this.appendTimelines(i)}},
tickOffsetFromDate:function(i,r,m){switch(i.unit){case "da":r=r.ho/24+r.mi/1440;m*=r;break;case "mo":i=Q.getMonthDays(r.mo,r.ye);r=(r.da-1)/i+r.ho/(24*i)+r.mi/(1440*i);m*=r;break;case "ye":r=((r.mo-1)*30+r.da)/365;m*=r;break;case "de":r=r.ye%10/10+r.mo/120;m*=r;break;case "ce":r=r.ye%100/100+r.mo/1200;m*=r;break;case "thou":r=r.ye%1E3/1E3;m*=r;break;case "tenthou":r=r.ye%1E4/1E4;m*=r;break;case "hundredthou":r=r.ye%1E5/1E5;m*=r;break;default:m=0}return-1*m},resetTicksHandle:function(){x(this._views.HANDLE).offset({left:x(this._views.CONTAINER).offset().left})},
easeOutTicks:function(){Math.abs(this.dragSpeed)>5&&debug.trace("ticks stopped!","note")},getTimelineEventsByTick:function(i){var r=i.tick.unit,m=i.tick.serial;i=i.timeline.dateHash;return i[r][m]&&i[r][m].length>0?i[r][m]:0},setTimelineProp:function(i,r,m){G.timelinePool[i][r]=m},passesFilters:function(i,r){var m=true,y="",F=[],g;y="";F=[];if(r<i.low_threshold||r>i.high_threshold)return false;if(y=G.filterObject.include){F=y.split(",");m=false;for(g=0;g<F.length;g++){y=RegExp(x.trim(F[g]),"i");if(i.title.match(y))m=
true}}if(y=G.filterObject.exclude){F=y.split(",");for(g=0;g<F.length;g++){y=RegExp(x.trim(F[g]),"i");if(i.title.match(y))m=false}}return m},freshTimelines:function(){var i,r,m,y,F=G.activeTimelines,g=G.ticksArray,u="",H,J=this;r="";var W=J.dimensions.container.centerx,aa=J.dimensions.container.width,z=G.getFocusDate().sec,fa=G.getZoomInfo().spp;G.getZoomInfo();r=[];var ha=[];aa=z-Math.floor(fa*(aa/2));var B;r=0;for(var l=J.dimensions.container.height,v=0;v<F.length;v++){i=G.timelinePool[F[v]];B=i.display;
r=i.top||l-120;$tl=x("<div class='tg-timeline-envelope' id='"+i.id+"'><div class='titleBar'><div class='timeline-title'>"+i.title+"<div class='tg-timeline-env-buttons'><span class='timeline-info'>info</span><span class='expand-collapse'>expand/collapse</span></div></div></div></div>").appendTo(this._views.TICKS);$tl.draggable({axis:"y",handle:".titleBar",stop:function(){J.setTimelineProp(i.id,"top",x(this).css("top"))}}).css("top",r);r=$tl.height();x(".tg-timeline-envelope#"+i.id+" .titleBar .expand-collapse").click(function(){J.expandCollapseTimeline(i.id)});
x(".tg-timeline-envelope#"+i.id+" .titleBar .timeline-info").click(function(){J.timelineModal(i.id)});H=$tl.children(".titleBar");m=W+(i.bounds.first-z)/fa;y=W+(i.bounds.last-z)/fa;H.css({top:r,left:m,width:y-m});if(B=="expanded")u=i.borg=new timeglider.TG_Org;for(m=0;m<g.length;m++){r=this.getTimelineEventsByTick({tick:g[m],timeline:i});x.merge(ha,r)}for(m=0;m<i.spans.length;m++){r=i.spans[m];r.start<aa&&r.end>aa&&x.inArray(r.id,ha)==-1&&ha.unshift(r.id)}r=this.compileTickEventsAsHtml(i,ha,0,"sweep");
if(B=="expanded"){r=u.getHTML("sweep");i.borg=u.getBorg()}r!="undefined"&&$tl.append(r);this.registerEventImages($tl)}J.registerTitles()},appendTimelines:function(i){for(var r=G.activeTimelines,m,y="",F=0;F<r.length;F++){m=G.timelinePool[r[F]];idArr=this.getTimelineEventsByTick({tick:i,timeline:m});y=this.compileTickEventsAsHtml(m,idArr,i.serial,"append");if(m.display=="expanded")y=m.borg.getHTML(i.serial);m=x(".tg-timeline-envelope#"+m.id).append(y);this.registerEventImages(m)}},compileTickEventsAsHtml:function(i,
r,m,y){var F;F=0;var g=this.dimensions.container.centerx,u=i.display,H=$tl.height();stuff="";foSec=G.startSec;spp=G.getZoomInfo().spp;zl=G.getZoomInfo().level;buffer=20;borg=i.borg;block_arg="sweep";if(y=="append")block_arg=m;for(m=0;m<r.length;m++){ev=G.eventPool["ev_"+r[m]];if(this.passesFilters(ev,zl)===true){F=g+(ev.startdateObj.sec-foSec)/spp;if(u=="expanded"){impq=i.size_importance!==false?this.scaleToImportance(ev.importance,zl):1;ev.width=ev.titleWidth*impq+buffer;ev.fontsize=this.basicFontSize*
impq;ev.left=F;ev.spanwidth=0;if(ev.span==true){ev.spanwidth=(ev.enddateObj.sec-ev.startdateObj.sec)/spp;if(ev.spanwidth>ev.width)ev.width=ev.spanwidth}F=0;if(ev.image&&ev.image_class==="layout"){F=ev.image_size.height+2;ev.width=ev.image_size.width+2}ev.height=Math.ceil(ev.fontsize)+F;ev.top=H-ev.height;borg.addBlock(ev,block_arg)}else if(u=="collapsed")stuff+="<div id='ev_"+ev.id+"' class='timeglider-event-collapsed' style='top:"+(H-2)+"px;left:"+F+"px'></div>"}}return u=="collapsed"?stuff:""},
registerEventImages:function(i){x(".timeglider-event-image-bar").each(function(){x(this).position({my:"top",at:"bottom",of:i,offset:"0, 0"}).css("left",0)})},expandCollapseTimeline:function(i){i=G.timelinePool[i];i.display=i.display=="expanded"?"collapsed":"expanded";G.refresh()},timelineModal:function(i){x("#tl_"+i+"_modal").remove();var r=G.timelinePool[i];templ_obj={title:r.title,description:r.description,id:i};x.tmpl(this._templates.timeline_modal,templ_obj).appendTo(this._views.CONTAINER).css("z-index",
this.ztop++).position({my:"left top",at:"left top",of:this._views.CONTAINER,offset:"32, 32",collision:"fit fit"}).draggable({stack:".timeglider-modal"})},eventModal:function(i){x("#ev_"+i+"_modal").remove();var r=x("#"+i),m=this._templates.event_modal;ev=G.eventPool[i];ev_img=ev.image?"<img src='"+ev.image+"'>":"";templ_obj={title:ev.title,description:ev_img+ev.description,id:i,startdate:ev.startdateObj.format(),link:ev.link,video:ev.video};if(ev.video){m=this._templates.event_modal_video;templ_obj.video=
ev.video}x.tmpl(m,templ_obj).appendTo(this._views.TICKS).css("z-index",this.ztop++).position({my:"right center",at:"left center",of:r,offset:"-12, -1",collision:"flip fit"}).draggable({stack:".timeglider-modal"})},parseHTMLTable:function(i){var r={},m=+new Date,y=[];x("#"+i).find("tr").each(function(F){var g=x(this).children(),u;if(F===0)y=g.map(function(){return x(this).attr("class").replace(/^.*?\btg-(\S+)\b.*?$/,"$1")}).get();else{u={};g.each(function(H){u[y[H]]=x(this).text()});r["prefix"+m++]=
u}});return r}};k.zoomTree=[{},{unit:"da",width:35E3,level:1,label:"5 hours"},{unit:"da",width:17600,level:2,label:"7 hours"},{unit:"da",width:8800,level:3,label:"10 hours"},{unit:"da",width:4400,level:4,label:"12 hours"},{unit:"da",width:2200,level:5,label:"14 hours"},{unit:"da",width:1100,level:6,label:"17 hours"},{unit:"da",width:550,level:7,label:"22 hours"},{unit:"da",width:432,level:8,label:"1 DAY"},{unit:"da",width:343,level:9,label:"1.5 days"},{unit:"da",width:272,level:10,label:"2 days"},
{unit:"da",width:216,level:11,label:"2.5 days"},{unit:"da",width:171,level:12,label:"3 days"},{unit:"da",width:136,level:13,label:"3.5 days"},{unit:"da",width:108,level:14,label:"4 days"},{unit:"mo",width:2509,level:15,label:"6 days"},{unit:"mo",width:1945,level:16,label:"1 WEEK"},{unit:"mo",width:1508,level:17,label:"10 days"},{unit:"mo",width:1169,level:18,label:"2 weeks"},{unit:"mo",width:913,level:19,label:"2.5 weeks"},{unit:"mo",width:719,level:20,label:"3 weeks"},{unit:"mo",width:566,level:21,
label:"3.5 weeks"},{unit:"mo",width:453,level:22,label:"1 MONTH"},{unit:"mo",width:362,level:23,label:"5.5 weeks"},{unit:"mo",width:290,level:24,label:"7 weeks"},{unit:"mo",width:232,level:25,label:"2 months"},{unit:"mo",width:186,level:26,label:"2.5 months"},{unit:"mo",width:148,level:27,label:"3 months"},{unit:"mo",width:119,level:28,label:"4 months"},{unit:"mo",width:95,level:29,label:"5 months"},{unit:"mo",width:76,level:30,label:"6 months"},{unit:"ye",width:723,level:31,label:"9 months"},{unit:"ye",
width:573,level:32,label:"1 YEAR"},{unit:"ye",width:455,level:33,label:"1.25 years"},{unit:"ye",width:361,level:34,label:"1.5 years"},{unit:"ye",width:286,level:35,label:"2 years"},{unit:"ye",width:227,level:36,label:"2.5 years"},{unit:"ye",width:179,level:37,label:"3 years"},{unit:"ye",width:142,level:38,label:"4 years"},{unit:"ye",width:113,level:39,label:"5 years"},{unit:"ye",width:89,level:40,label:"6 years"},{unit:"de",width:705,level:41,label:"8 years"},{unit:"de",width:559,level:42,label:"10 years"},
{unit:"de",width:443,level:43,label:"13 years"},{unit:"de",width:302,level:44,label:"16 years"},{unit:"de",width:240,level:45,label:"20 years"},{unit:"de",width:190,level:46,label:"25 years"},{unit:"de",width:150,level:47,label:"30 years"},{unit:"de",width:120,level:48,label:"40 years"},{unit:"de",width:95,level:49,label:"50 years"},{unit:"de",width:76,level:50,label:"65 years"},{unit:"ce",width:600,level:51,label:"80 years"},{unit:"ce",width:480,level:52,label:"100 years"},{unit:"ce",width:381,level:53,
label:"130 years"},{unit:"ce",width:302,level:54,label:"160 years"},{unit:"ce",width:240,level:55,label:"200 years"},{unit:"ce",width:190,level:56,label:"250 years"},{unit:"ce",width:150,level:57,label:"300 years"},{unit:"ce",width:120,level:58,label:"400 years"},{unit:"ce",width:95,level:59,label:"500 years"},{unit:"ce",width:76,level:60,label:"600 years"},{unit:"thou",width:603,level:61,label:"1000 years"},{unit:"thou",width:478,level:62,label:"1200 years"},{unit:"thou",width:379,level:63,label:"1800 years"},
{unit:"thou",width:301,level:64,label:"160 years"},{unit:"thou",width:239,level:65,label:"xxx years"},{unit:"thou",width:190,level:66,label:"xxx years"},{unit:"thou",width:150,level:67,label:"xxx years"},{unit:"thou",width:120,level:68,label:"xxx years"},{unit:"thou",width:95,level:69,label:"8,000 years"},{unit:"thou",width:76,level:70,label:"10,000 years"},{unit:"tenthou",width:603,level:71,label:"15,000 years"},{unit:"tenthou",width:358,level:72,label:"20,000 years"},{unit:"tenthou",width:213,level:73,
label:"30,000 years"},{unit:"tenthou",width:126,level:74,label:"60,000 years"},{unit:"tenthou",width:76,level:75,label:"100,000 years"},{unit:"hundredthou",width:603,level:76,label:"180,000 years"},{unit:"hundredthou",width:358,level:77,label:"300,000 years"},{unit:"hundredthou",width:213,level:78,label:"500,000 years"},{unit:"hundredthou",width:126,level:79,label:"800,000 years"},{unit:"hundredthou",width:76,level:80,label:"1 million years"},{unit:"mill",width:603,level:81,label:"1.2 million years"},
{unit:"mill",width:358,level:82,label:"2 million years"},{unit:"mill",width:213,level:83,label:"3 million years"},{unit:"mill",width:126,level:84,label:"5 million years"},{unit:"mill",width:76,level:85,label:"10 million years"},{unit:"tenmill",width:603,level:86,label:"15 million years"},{unit:"tenmill",width:358,level:87,label:"30 million years"},{unit:"tenmill",width:213,level:88,label:"50 million years"},{unit:"tenmill",width:126,level:89,label:"80 million years"},{unit:"tenmill",width:76,level:90,
label:"100 million years"},{unit:"hundredmill",width:603,level:91,label:"120 million years"},{unit:"hundredmill",width:358,level:92,label:"200 million years"},{unit:"hundredmill",width:213,level:93,label:"300 million years"},{unit:"hundredmill",width:126,level:94,label:"500 million years"},{unit:"hundredmill",width:76,level:95,label:"1 billion years"},{unit:"bill",width:603,level:96,label:"15 million years"},{unit:"bill",width:358,level:97,label:"30 million years"},{unit:"bill",width:213,level:98,
label:"50 million years"},{unit:"bill",width:126,level:99,label:"80 million years"},{unit:"bill",width:76,level:100,label:"100 billion years"}];k.calculateSecPerPx=function(i){for(var r=1;r<i.length;r++){var m=i[r],y=0;switch(m.unit){case "da":y=86400;break;case "mo":y=2419200;break;case "ye":y=31536E3;break;case "de":y=31536E4;break;case "ce":y=31536E5;break;case "thou":y=31536E6;break;case "tenthou":y=31536E7;break;case "hundredthou":y=31536E8;break;case "mill":y=31536E9;break;case "tenmill":y=
31536E10;break;case "hundredmill":y=31536E11;break;case "bill":y=31536E12}m.spp=y/parseInt(m.width)}}(k.zoomTree)})(timeglider);(function(k){var Q=k.TG_Date,S={},G=jQuery;k.TimelineCollection=Backbone.Collection.extend({model:timeglider.TG_Timeline});k.TG_Mediator=function(K){this.options=S=K;this._focusDate={};this._zoomInfo={};this._zoomLevel=1;this.ticksReady=false;this.ticksArray=[];this.startSec=0;this.activeTimelines=[];this.max_zoom=S.max_zoom;this.min_zoom=S.min_zoom;this.fixed_zoom=this.max_zoom==this.min_zoom?true:false;this.gesturing=false;this.gestureStartZoom=0;this.filterObject={};this.eventPool=[];this.timelinePool=
{};this.initial_timeline_id=S.initial_timeline_id;if(S.max_zoom===S.min_zoom)this.fixed_zoom=S.min_zoom};k.TG_Mediator.prototype={gotoDate:function(K){this.setFocusDate(new Q(K));this.refresh();return true},gotoDateZoom:function(K,x){this.setFocusDate(new Q(K));this.setZoomLevel(x);return true},loadTimelineData:function(K){var x=this;if(K)typeof K==="object"?x.parseData(K):G.getJSON(K,function(I){x.parseData(I)});else G.publish("mediator.refreshSignal")},parseData:function(K){var x=0,I=K.length,w=
{};w={};for(var i=0;i<I;i++){w=K[i];w.mediator=this;w=(new timeglider.TG_Timeline(w)).toJSON();w.id.length>0&&x++;this.swallowTimeline(w)}x===0?alert("ERROR loading data: Check JSON with jsonLint"):G.publish("mediator.timelineDataLoaded")},swallowTimeline:function(K){this.timelinePool[K.id]=K;G.publish("mediator.timelineListChangeSignal")},setInitialTimelines:function(){var K=this,x=this.initial_timeline_id;x&&setTimeout(function(){K.toggleTimeline(x)},1E3)},refresh:function(){G.publish("mediator.refreshSignal")},
setTicksReady:function(K){this.ticksReady=K;K===true&&G.publish("mediator.ticksReadySignal")},getFocusDate:function(){return this._focusDate},setFocusDate:function(K){if(K!=this._focusDate)this._focusDate=K},getZoomLevel:function(){return Number(this._zoomLevel)},setZoomLevel:function(K){if(K<=this.max_zoom&&K>=this.min_zoom){this.startSec=this._focusDate.sec;if(K!=this._zoomLevel){this._zoomLevel=K;this._zoomInfo=timeglider.zoomTree[K];G.publish("mediator.zoomLevelChange")}}else return false},getZoomInfo:function(){return this._zoomInfo},
setFilterObject:function(K){this.filterObject={include:K.include,exclude:K.exclude};G.publish("mediator.filterObjectChange");this.refresh()},setGestureStart:function(){this.gestureStartZoom=this.getZoomLevel()},getTicksOffset:function(){return this._ticksOffset},setTicksOffset:function(K){this._ticksOffset=K;G.publish("mediator.ticksOffsetChange")},getTickBySerial:function(K){for(var x=this.ticksArray,I=x.length,w=0;w<I;w++){var i=x[w];if(i.serial==K)return i}return false},addToTicksArray:function(K,
x){if(K.type=="init"){K.serial=Q.getTimeUnitSerial(x,K.unit);this.ticksArray=[K]}else if(K.type=="l"){K.serial=this.ticksArray[0].serial-1;this.ticksArray.unshift(K)}else{K.serial=this.ticksArray[this.ticksArray.length-1].serial+1;this.ticksArray.push(K)}G.publish("mediator.ticksArrayChange");return K.serial},toggleTimeline:function(K){var x=this.timelinePool[K],I=G.inArray(K,this.activeTimelines);if(I==-1){this.activeTimelines.push(K);this.setFocusDate(new Q(x.focus_date));this.setZoomLevel(x.initial_zoom)}else this.activeTimelines.splice(I,
1);this.refresh();G.publish("mediator.activeTimelinesChange")}};k.getLowHigh=function(K){var x,I,w=parseFloat(K[0]),i=w;for(x=0;x<K.length;x++){I=parseFloat(K[x]);if(I<i)i=I;if(I>w)w=I}return{high:w,low:i}};k.getStringWidth=function(K){return G("#timeglider-measure-span").html(K).width()+20};k.getImageSize=function(K){var x=G("#timeglider-measure-span").html("");x.append("<img id='test_img' src='"+K+"'>");K=G("#test_img").width();var I=G("#test_img").height();x.html("");return{width:K,height:I}};
k.validateOptions=function(K){this.optionsMaster={initial_focus:{type:"date"},editor:{type:"string"},backgroundColor:{type:"color"},backgroundImage:{type:"color"},min_zoom:{type:"number",min:1,max:100},max_zoom:{type:"number",min:1,max:100},initial_zoom:{type:"number",min:1,max:100},show_centerline:{type:"boolean"},display_zoom_level:{type:"boolean"},data_source:{type:"url"},basic_fontsize:{type:"number",min:9,max:100},mouse_wheel:{type:"string",possible:["zoom","pan"]},initial_timeline_id:{type:"string"},
icon_folder:{type:"string"},show_footer:{type:"boolean"},display_zoom_level:{type:"boolean"}};var x=this,I="";G.each(K,function(w,i){if(x.optionsMaster[w])switch(x.optionsMaster[w].type){case "string":if(typeof i!="string")I+=w+" needs to be a string.\n";if(x.optionsMaster[w].possible)if(G.inArray(i,x.optionsMaster[w].possible)==-1)I+=w+" must be: "+x.optionsMaster[w].possible.join(" or ");break;case "number":if(typeof i!="number")I+=i+" needs to be a number.\n";if(x.optionsMaster[w].min)if(i<x.optionsMaster[w].min)I+=
w+" must be greater than or equal to "+x.optionsMaster[w].min+"\n";if(x.optionsMaster[w].max)if(i>x.optionsMaster[w].max)I+=w+" must be less than or equal to "+x.optionsMaster[w].max+"\n";break;case "boolean":if(typeof i!="boolean")I+=i+" needs to be a number.\n"}});return I}})(timeglider);(function(k){var Q,S=timeglider,G=timeglider.TG_Date;k.widget("timeglider.timeline",{_tg:this,_element:this.element,options:{initial_focus:S.TG_Date.getToday(),editor:"none",min_zoom:1,max_zoom:100,show_centerline:true,data_source:"",basic_fontsize:12,mouse_wheel:"zoom",initial_timeline_id:"",icon_folder:"js/timeglider/icons/",show_footer:true,display_zoom_level:true},_create:function(){this._id=k(this.element).attr("id");this.element.html("<div class='timeglider-container'><div class='timeglider-loading'>loading</div><div class='timeglider-centerline'></div><div class='timeglider-truck' id='tg-truck'><div class='timeglider-ticks'><div class='timeglider-handle'></div></div></div><div class='timeglider-slider-container'><div class='timeglider-slider'></div><div class='timeglider-pan-buttons'><div class='timeglider-pan-left'></div><div class='timeglider-pan-right'></div></div></div><div class='timeglider-footer'><div class='timeglider-logo'></div><img class='timeglider-filter-bt' title='filter' src='js/timeglider/buttons/filter.png'><img class='timeglider-tools-bt' title='settings' src='js/timeglider/buttons/tools.png'><img class='timeglider-list-bt' title='timelines' src='js/timeglider/buttons/list.png'></div><div class='timeglider-event-hover-info'></div></div><span id='timeglider-measure-span'></span>")},
_init:function(){var K=timeglider.validateOptions(this.options);if(K==""){Q=new S.TG_Mediator(this.options);new S.TG_TimelineView(this,Q);Q.setFocusDate(new G(this.options.initial_focus));Q.loadTimelineData(this.options.data_source)}else alert("Rats. There's a problem with your widget settings:"+K)},gotoDate:function(K){debug.log("d:"+K);Q.gotoDate(K)},gotoDateZoom:function(K,x){debug.log("d:"+x);Q.gotoDateZoom(K,x)},destroy:function(){k.Widget.prototype.destroy.apply(this,arguments);k(this.element).html("")}})})(jQuery);
