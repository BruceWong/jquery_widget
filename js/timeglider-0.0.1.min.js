var TimegliderInfo="Min version 0.0.2 on Tuesday Feb 8, 2011";window.debug=function(){function g(K){if(m&&(r||!o||!o.log))m.apply(x,K)}for(var x=this,p=Array.prototype.slice,o=x.console,C={},m,r,s=9,y=["error","warn","info","debug","log"],D="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),v=D.length,E=[];--v>=0;)(function(K){C[K]=function(){s!==0&&o&&o[K]&&o[K].apply(o,arguments)}})(D[v]);for(v=y.length;--v>=0;)(function(K,Q){C[Q]=function(){var S=p.call(arguments),X=[Q].concat(S);
E.push(X);g(X);if(o&&(s>0?s>K:y.length+s<=K))o.firebug?o[Q].apply(x,S):o[Q]?o[Q](S):o.log(S)}})(v,y[v]);C.setLevel=function(K){s=typeof K==="number"?K:9};C.setCallback=function(){var K=p.call(arguments),Q=E.length,S=Q;m=K.shift()||null;r=typeof K[0]==="boolean"?K.shift():false;for(S-=typeof K[0]==="number"?K.shift():Q;S<Q;)g(E[S++])};return C}();(function(g){function x(o){var C=o||window.event,m=[].slice.call(arguments,1),r=0,s=0,y=0;o=g.event.fix(C);o.type="mousewheel";if(o.wheelDelta)r=o.wheelDelta/120;if(o.detail)r=-o.detail/3;y=r;if(C.axis!==undefined&&C.axis===C.HORIZONTAL_AXIS){y=0;s=-1*r}if(C.wheelDeltaY!==undefined)y=C.wheelDeltaY/120;if(C.wheelDeltaX!==undefined)s=-1*C.wheelDeltaX/120;m.unshift(o,r,s,y);return g.event.handle.apply(this,m)}var p=["DOMMouseScroll","mousewheel"];g.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var o=
p.length;o;)this.addEventListener(p[--o],x,false);else this.onmousewheel=x},teardown:function(){if(this.removeEventListener)for(var o=p.length;o;)this.removeEventListener(p[--o],x,false);else this.onmousewheel=null}};g.fn.extend({mousewheel:function(o){return o?this.bind("mousewheel",o):this.trigger("mousewheel")},unmousewheel:function(o){return this.unbind("mousewheel",o)}})})(jQuery);(function(g){var x={},p=["touchstart","touchmove","touchend","gesturestart","gesturechange","gestureend"],o=document.createElement("div");for(i in p){var C=p[i];C="on"+C;var m=C in o;if(!m){o.setAttribute(C,"return;");m=typeof o[C]=="function"}x[p[i]]=m}x.touches=x.touchstart&&x.touchend&&x.touchmove;x.gestures=x.gesturestart&&x.gesturechange&&x.gestureend;g.fn.browserTouchSupport=x})(jQuery);(function(){function g(){if(g.is(arguments[0],R)){for(var a=arguments[0],b=Oa[aa](g,a.splice(0,3+g.is(a[0],V))),c=b.set(),e=0,f=a[n];e<f;e++){var d=a[e]||{};s[v](d.type)&&c[Y](b[d.type]().attr(d))}return c}return Oa[aa](g,arguments)}function x(){for(var a=[],b=0;b<32;b++)a[b]=(~~(B.random()*16))[ba](16);a[12]=4;a[16]=(a[16]&3|8)[ba](16);return"r-"+a[q]("")}function p(a,b,c){function e(){var f=Array[D].slice.call(arguments,0),d=f[q]("\u25ba"),h=e.cache=e.cache||{},j=e.count=e.count||[];if(h[v](d))return c?
c(h[d]):h[d];j[n]>=1E3&&delete h[j.shift()];j[Y](d);h[d]=a[aa](b,f);return c?c(h[d]):h[d]}return e}function o(){return this.x+fa+this.y}function C(a){return function(b,c,e,f){var d={back:a};g.is(e,"function")?f=e:d.rot=e;b&&b.constructor==ea&&(b=b.attrs.path);b&&(d.along=b);return this.animate(d,c,f)}}function m(a,b,c,e,f,d){function h(I,W){var L,F,P,ga;P=I;for(F=0;F<8;F++){ga=((l*P+k)*P+j)*P-I;if(J(ga)<W)return P;L=(3*l*P+2*k)*P+j;if(J(L)<1.0E-6)break;P-=ga/L}L=0;F=1;P=I;if(P<L)return L;if(P>F)return F;
for(;L<F;){ga=((l*P+k)*P+j)*P;if(J(ga-I)<W)break;I>ga?L=P:F=P;P=(F-L)/2+L}return P}var j=3*b,k=3*(e-b)-j,l=1-j-k,u=3*c,z=3*(f-c)-u,A=1-u-z;return function(I,W){var L=h(I,W);return((A*L+z)*L+u)*L}(a,1/(200*d))}g.version="1.5.2";var r=/[, ]+/,s={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},y=/\{(\d+)\}/g,D="prototype",v="hasOwnProperty",E=document,K=window,Q={was:Object[D][v].call(K,"Raphael"),is:K.Raphael},S=function(){this.customAttributes={}},X,aa="apply",ra="createTouch"in E,fa=" ",Z=String,
va="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend".split(fa),qa={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},q="join",n="length",w=Z[D].toLowerCase,B=Math,G=B.max,N=B.min,J=B.abs,H=B.pow,O=B.PI,V="number",R="array",ba="toString",wa=Object[D][ba],Y="push",ha=/^url\(['"]?([^\)]+?)['"]?\)$/i,na=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
da={NaN:1,Infinity:1,"-Infinity":1},oa=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,T=B.round,M=parseFloat,ja=parseInt,xa=Z[D].toUpperCase,Fa={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt",
"stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},Pa={along:"along",blur:V,"clip-rect":"csv",cx:V,cy:V,fill:"colour","fill-opacity":V,"font-size":V,height:V,opacity:V,path:"path",r:V,rotation:"csv",rx:V,ry:V,scale:"csv",stroke:"colour","stroke-opacity":V,"stroke-width":V,translation:"csv",width:V,x:V,y:V},wb=/^(from|to|\d+%?)$/,Qa=/\s*,\s*/,xb={hs:1,rg:1},yb=/,?([achlmqrstvxz]),?/gi,
zb=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,Ab=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,$a=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,Bb=function(a,b){return a.key-b.key};g.type=K.SVGAngle||E.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(g.type=="VML"){var sa=E.createElement("div");sa.innerHTML='<v:shape adj="1"/>';sa=sa.firstChild;sa.style.behavior="url(#default#VML)";if(!(sa&&typeof sa.adj=="object"))return g.type=null;sa=null}g.svg=
!(g.vml=g.type=="VML");S[D]=g[D];X=S[D];g._id=0;g._oid=0;g.fn={};g.is=function(a,b){b=w.call(b);if(b=="finite")return!da[v](+a);return b=="null"&&a===null||b==typeof a||b=="object"&&a===Object(a)||b=="array"&&Array.isArray&&Array.isArray(a)||wa.call(a).slice(8,-1).toLowerCase()==b};g.angle=function(a,b,c,e,f,d){if(f==null){a-=c;b-=e;if(!a&&!b)return 0;return((a<0)*180+B.atan(-b/-a)*180/O+360)%360}return g.angle(a,b,f,d)-g.angle(c,e,f,d)};g.rad=function(a){return a%360*O/180};g.deg=function(a){return a*
180/O%360};g.snapTo=function(a,b,c){c=g.is(c,"finite")?c:10;if(g.is(a,R))for(var e=a.length;e--;){if(J(a[e]-b)<=c)return a[e]}else{a=+a;e=b%a;if(e<c)return b-e;if(e>a-c)return b-e+a}return b};g.setWindow=function(a){K=a;E=K.document};var Ga=function(a){if(g.vml){var b=/^\s+|\s+$/g,c;try{var e=new ActiveXObject("htmlfile");e.write("<body>");e.close();c=e.body}catch(f){c=createPopup().document.body}var d=c.createTextRange();Ga=p(function(j){try{c.style.color=Z(j).replace(b,"");var k=d.queryCommandValue("ForeColor");
return"#"+("000000"+((k&255)<<16|k&65280|(k&16711680)>>>16)[ba](16)).slice(-6)}catch(l){return"none"}})}else{var h=E.createElement("i");h.title="Rapha\u00ebl Colour Picker";h.style.display="none";E.body.appendChild(h);Ga=p(function(j){h.style.color=j;return E.defaultView.getComputedStyle(h,"").getPropertyValue("color")})}return Ga(a)},ab=function(){return"hsb("+[this.h,this.s,this.b]+")"},Cb=function(){return"hsl("+[this.h,this.s,this.l]+")"},Db=function(){return this.hex};g.hsb2rgb=function(a,b,
c,e){if(g.is(a,"object")&&"h"in a&&"s"in a&&"b"in a){c=a.b;b=a.s;a=a.h;e=a.o}return g.hsl2rgb(a,b,c/2,e)};g.hsl2rgb=function(a,b,c,e){if(g.is(a,"object")&&"h"in a&&"s"in a&&"l"in a){c=a.l;b=a.s;a=a.h}if(a>1||b>1||c>1){a/=360;b/=100;c/=100}var f={},d=["r","g","b"],h;if(b){c<0.5?h=c*(1+b):h=c+b-c*b;b=2*c-h;for(var j=0;j<3;j++){c=a+1/3*-(j-1);c<0&&c++;c>1&&c--;c*6<1?f[d[j]]=b+(h-b)*6*c:c*2<1?f[d[j]]=h:c*3<2?f[d[j]]=b+(h-b)*(2/3-c)*6:f[d[j]]=b}}else f={r:c,g:c,b:c};f.r*=255;f.g*=255;f.b*=255;f.hex="#"+
(16777216|f.b|f.g<<8|f.r<<16).toString(16).slice(1);g.is(e,"finite")&&(f.opacity=e);f.toString=Db;return f};g.rgb2hsb=function(a,b,c){if(b==null&&g.is(a,"object")&&"r"in a&&"g"in a&&"b"in a){c=a.b;b=a.g;a=a.r}if(b==null&&g.is(a,"string")){c=g.getRGB(a);a=c.r;b=c.g;c=c.b}if(a>1||b>1||c>1){a/=255;b/=255;c/=255}var e=G(a,b,c),f=N(a,b,c),d;if(f==e)return{h:0,s:0,b:e,toString:ab};f=e-f;a==e?d=(b-c)/f:b==e?d=2+(c-a)/f:d=4+(a-b)/f;d/=6;d<0&&d++;d>1&&d--;return{h:d,s:f/e,b:e,toString:ab}};g.rgb2hsl=function(a,
b,c){if(b==null&&g.is(a,"object")&&"r"in a&&"g"in a&&"b"in a){c=a.b;b=a.g;a=a.r}if(b==null&&g.is(a,"string")){c=g.getRGB(a);a=c.r;b=c.g;c=c.b}if(a>1||b>1||c>1){a/=255;b/=255;c/=255}var e=G(a,b,c),f=N(a,b,c),d,h=(e+f)/2;if(f==e)a={h:0,s:0,l:h};else{var j=e-f;a==e?d=(b-c)/j:b==e?d=2+(c-a)/j:d=4+(a-b)/j;d/=6;d<0&&d++;d>1&&d--;a={h:d,s:h<0.5?j/(e+f):j/(2-e-f),l:h}}a.toString=Cb;return a};g._path2string=function(){return this.join(",").replace(yb,"$1")};g.getRGB=p(function(a){if(!a||(a=Z(a)).indexOf("-")+
1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if(a=="none")return{r:-1,g:-1,b:-1,hex:"none"};!(xb[v](a.toLowerCase().substring(0,2))||a.charAt()=="#")&&(a=Ga(a));var b,c,e,f,d;if(a=a.match(na)){if(a[2]){e=ja(a[2].substring(5),16);c=ja(a[2].substring(3,5),16);b=ja(a[2].substring(1,3),16)}if(a[3]){e=ja((d=a[3].charAt(3))+d,16);c=ja((d=a[3].charAt(2))+d,16);b=ja((d=a[3].charAt(1))+d,16)}if(a[4]){d=a[4].split(Qa);b=M(d[0]);d[0].slice(-1)=="%"&&(b*=2.55);c=M(d[1]);d[1].slice(-1)=="%"&&(c*=2.55);e=M(d[2]);
d[2].slice(-1)=="%"&&(e*=2.55);a[1].toLowerCase().slice(0,4)=="rgba"&&(f=M(d[3]));d[3]&&d[3].slice(-1)=="%"&&(f/=100)}if(a[5]){d=a[5].split(Qa);b=M(d[0]);d[0].slice(-1)=="%"&&(b*=2.55);c=M(d[1]);d[1].slice(-1)=="%"&&(c*=2.55);e=M(d[2]);d[2].slice(-1)=="%"&&(e*=2.55);(d[0].slice(-3)=="deg"||d[0].slice(-1)=="\u00b0")&&(b/=360);a[1].toLowerCase().slice(0,4)=="hsba"&&(f=M(d[3]));d[3]&&d[3].slice(-1)=="%"&&(f/=100);return g.hsb2rgb(b,c,e,f)}if(a[6]){d=a[6].split(Qa);b=M(d[0]);d[0].slice(-1)=="%"&&(b*=
2.55);c=M(d[1]);d[1].slice(-1)=="%"&&(c*=2.55);e=M(d[2]);d[2].slice(-1)=="%"&&(e*=2.55);(d[0].slice(-3)=="deg"||d[0].slice(-1)=="\u00b0")&&(b/=360);a[1].toLowerCase().slice(0,4)=="hsla"&&(f=M(d[3]));d[3]&&d[3].slice(-1)=="%"&&(f/=100);return g.hsl2rgb(b,c,e,f)}a={r:b,g:c,b:e};a.hex="#"+(16777216|e|c<<8|b<<16).toString(16).slice(1);g.is(f,"finite")&&(a.opacity=f);return a}return{r:-1,g:-1,b:-1,hex:"none",error:1}},g);g.getColor=function(a){a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75};
var b=this.hsb2rgb(a.h,a.s,a.b);a.h+=0.075;if(a.h>1){a.h=0;a.s-=0.2;a.s<=0&&(this.getColor.start={h:0,s:1,b:a.b})}return b.hex};g.getColor.reset=function(){delete this.start};g.parsePathString=p(function(a){if(!a)return null;var b={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=[];g.is(a,R)&&g.is(a[0],R)&&(c=Ha(a));c[n]||Z(a).replace(zb,function(e,f,d){var h=[];e=w.call(f);d.replace(Ab,function(j,k){k&&h[Y](+k)});if(e=="m"&&h[n]>2){c[Y]([f].concat(h.splice(0,2)));e="l";f=f=="m"?"l":"L"}for(;h[n]>=b[e];){c[Y]([f].concat(h.splice(0,
b[e])));if(!b[e])break}});c[ba]=g._path2string;return c});g.findDotsAtSegment=function(a,b,c,e,f,d,h,j,k){var l=1-k,u=H(l,3)*a+H(l,2)*3*k*c+l*3*k*k*f+H(k,3)*h;l=H(l,3)*b+H(l,2)*3*k*e+l*3*k*k*d+H(k,3)*j;var z=a+2*k*(c-a)+k*k*(f-2*c+a),A=b+2*k*(e-b)+k*k*(d-2*e+b),I=c+2*k*(f-c)+k*k*(h-2*f+c),W=e+2*k*(d-e)+k*k*(j-2*d+e);a=(1-k)*a+k*c;b=(1-k)*b+k*e;f=(1-k)*f+k*h;d=(1-k)*d+k*j;j=90-B.atan((z-I)/(A-W))*180/O;(z>I||A<W)&&(j+=180);return{x:u,y:l,m:{x:z,y:A},n:{x:I,y:W},start:{x:a,y:b},end:{x:f,y:d},alpha:j}};
var Ja=p(function(a){if(!a)return{x:0,y:0,width:0,height:0};a=Ia(a);for(var b=0,c=0,e=[],f=[],d,h=0,j=a[n];h<j;h++){d=a[h];if(d[0]=="M"){b=d[1];c=d[2];e[Y](b);f[Y](c)}else{b=Eb(b,c,d[1],d[2],d[3],d[4],d[5],d[6]);e=e.concat(b.min.x,b.max.x);f=f.concat(b.min.y,b.max.y);b=d[5];c=d[6]}}a=N[aa](0,e);d=N[aa](0,f);return{x:a,y:d,width:G[aa](0,e)-a,height:G[aa](0,f)-d}}),Ha=function(a){var b=[];if(!g.is(a,R)||!g.is(a&&a[0],R))a=g.parsePathString(a);for(var c=0,e=a[n];c<e;c++){b[c]=[];for(var f=0,d=a[c][n];f<
d;f++)b[c][f]=a[c][f]}b[ba]=g._path2string;return b},Ra=p(function(a){if(!g.is(a,R)||!g.is(a&&a[0],R))a=g.parsePathString(a);var b=[],c=0,e=0,f=0,d=0,h=0;if(a[0][0]=="M"){c=a[0][1];e=a[0][2];f=c;d=e;h++;b[Y](["M",c,e])}for(var j=a[n];h<j;h++){var k=b[h]=[],l=a[h];if(l[0]!=w.call(l[0])){k[0]=w.call(l[0]);switch(k[0]){case "a":k[1]=l[1];k[2]=l[2];k[3]=l[3];k[4]=l[4];k[5]=l[5];k[6]=+(l[6]-c).toFixed(3);k[7]=+(l[7]-e).toFixed(3);break;case "v":k[1]=+(l[1]-e).toFixed(3);break;case "m":f=l[1];d=l[2];default:for(var u=
1,z=l[n];u<z;u++)k[u]=+(l[u]-(u%2?c:e)).toFixed(3)}}else{b[h]=[];if(l[0]=="m"){f=l[1]+c;d=l[2]+e}k=0;for(u=l[n];k<u;k++)b[h][k]=l[k]}l=b[h][n];switch(b[h][0]){case "z":c=f;e=d;break;case "h":c+=+b[h][l-1];break;case "v":e+=+b[h][l-1];break;default:c+=+b[h][l-2];e+=+b[h][l-1]}}b[ba]=g._path2string;return b},0,Ha),Ba=p(function(a){if(!g.is(a,R)||!g.is(a&&a[0],R))a=g.parsePathString(a);var b=[],c=0,e=0,f=0,d=0,h=0;if(a[0][0]=="M"){c=+a[0][1];e=+a[0][2];f=c;d=e;h++;b[0]=["M",c,e]}for(var j=a[n];h<j;h++){var k=
b[h]=[],l=a[h];if(l[0]!=xa.call(l[0])){k[0]=xa.call(l[0]);switch(k[0]){case "A":k[1]=l[1];k[2]=l[2];k[3]=l[3];k[4]=l[4];k[5]=l[5];k[6]=+(l[6]+c);k[7]=+(l[7]+e);break;case "V":k[1]=+l[1]+e;break;case "H":k[1]=+l[1]+c;break;case "M":f=+l[1]+c;d=+l[2]+e;default:for(var u=1,z=l[n];u<z;u++)k[u]=+l[u]+(u%2?c:e)}}else{u=0;for(z=l[n];u<z;u++)b[h][u]=l[u]}switch(k[0]){case "Z":c=f;e=d;break;case "H":c=k[1];break;case "V":e=k[1];break;case "M":f=b[h][b[h][n]-2];d=b[h][b[h][n]-1];default:c=b[h][b[h][n]-2];e=
b[h][b[h][n]-1]}}b[ba]=g._path2string;return b},null,Ha),bb=function(a,b,c,e,f,d){var h=1/3,j=2/3;return[h*a+j*c,h*b+j*e,h*f+j*c,h*d+j*e,f,d]},cb=function(a,b,c,e,f,d,h,j,k,l){var u=O*120/180,z=O/180*(+f||0),A=[],I,W=p(function(ka,la,ia){var za=ka*B.cos(ia)-la*B.sin(ia);ka=ka*B.sin(ia)+la*B.cos(ia);return{x:za,y:ka}});if(l){P=l[0];I=l[1];d=l[2];F=l[3]}else{I=W(a,b,-z);a=I.x;b=I.y;I=W(j,k,-z);j=I.x;k=I.y;B.cos(O/180*f);B.sin(O/180*f);I=(a-j)/2;P=(b-k)/2;F=I*I/(c*c)+P*P/(e*e);if(F>1){F=B.sqrt(F);c*=
F;e*=F}F=c*c;var L=e*e;F=(d==h?-1:1)*B.sqrt(J((F*L-F*P*P-L*I*I)/(F*P*P+L*I*I)));d=F*c*P/e+(a+j)/2;var F=F*-e*I/c+(b+k)/2,P=B.asin(((b-F)/e).toFixed(9));I=B.asin(((k-F)/e).toFixed(9));P=a<d?O-P:P;I=j<d?O-I:I;P<0&&(P=O*2+P);I<0&&(I=O*2+I);h&&P>I&&(P-=O*2);!h&&I>P&&(I-=O*2)}if(J(I-P)>u){A=I;L=j;var ga=k;I=P+u*(h&&I>P?1:-1);j=d+c*B.cos(I);k=F+e*B.sin(I);A=cb(j,k,c,e,f,0,h,L,ga,[I,A,d,F])}d=I-P;f=B.cos(P);u=B.sin(P);h=B.cos(I);I=B.sin(I);d=B.tan(d/4);c=4/3*c*d;d*=4/3*e;e=[a,b];a=[a+c*u,b-d*f];b=[j+c*I,
k-d*h];j=[j,k];a[0]=2*e[0]-a[0];a[1]=2*e[1]-a[1];if(l)return[a,b,j].concat(A);A=[a,b,j].concat(A)[q]().split(",");l=[];j=0;for(k=A[n];j<k;j++)l[j]=j%2?W(A[j-1],A[j],z).y:W(A[j],A[j+1],z).x;return l},Ka=function(a,b,c,e,f,d,h,j,k){var l=1-k;return{x:H(l,3)*a+H(l,2)*3*k*c+l*3*k*k*f+H(k,3)*h,y:H(l,3)*b+H(l,2)*3*k*e+l*3*k*k*d+H(k,3)*j}},Eb=p(function(a,b,c,e,f,d,h,j){var k=f-2*c+a-(h-2*f+c),l=2*(c-a)-2*(f-c),u=a-c,z=(-l+B.sqrt(l*l-4*k*u))/2/k;k=(-l-B.sqrt(l*l-4*k*u))/2/k;var A=[b,j],I=[a,h];J(z)>"1e12"&&
(z=0.5);J(k)>"1e12"&&(k=0.5);if(z>0&&z<1){z=Ka(a,b,c,e,f,d,h,j,z);I[Y](z.x);A[Y](z.y)}if(k>0&&k<1){z=Ka(a,b,c,e,f,d,h,j,k);I[Y](z.x);A[Y](z.y)}k=d-2*e+b-(j-2*d+e);l=2*(e-b)-2*(d-e);u=b-e;z=(-l+B.sqrt(l*l-4*k*u))/2/k;k=(-l-B.sqrt(l*l-4*k*u))/2/k;J(z)>"1e12"&&(z=0.5);J(k)>"1e12"&&(k=0.5);if(z>0&&z<1){z=Ka(a,b,c,e,f,d,h,j,z);I[Y](z.x);A[Y](z.y)}if(k>0&&k<1){z=Ka(a,b,c,e,f,d,h,j,k);I[Y](z.x);A[Y](z.y)}return{min:{x:N[aa](0,I),y:N[aa](0,A)},max:{x:G[aa](0,I),y:G[aa](0,A)}}}),Ia=p(function(a,b){var c=Ba(a),
e=b&&Ba(b),f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},d={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=function(L,F){var P,ga;if(!L)return["C",F.x,F.y,F.x,F.y,F.x,F.y];!(L[0]in{T:1,Q:1})&&(F.qx=F.qy=null);switch(L[0]){case "M":F.X=L[1];F.Y=L[2];break;case "A":L=["C"].concat(cb[aa](0,[F.x,F.y].concat(L.slice(1))));break;case "S":P=F.x+(F.x-(F.bx||F.x));ga=F.y+(F.y-(F.by||F.y));L=["C",P,ga].concat(L.slice(1));break;case "T":F.qx=F.x+(F.x-(F.qx||F.x));F.qy=F.y+(F.y-(F.qy||F.y));L=["C"].concat(bb(F.x,
F.y,F.qx,F.qy,L[1],L[2]));break;case "Q":F.qx=L[1];F.qy=L[2];L=["C"].concat(bb(F.x,F.y,L[1],L[2],L[3],L[4]));break;case "L":L=["C"].concat([F.x,F.y,L[1],L[2],L[1],L[2]]);break;case "H":L=["C"].concat([F.x,F.y,L[1],F.y,L[1],F.y]);break;case "V":L=["C"].concat([F.x,F.y,F.x,L[1],F.x,L[1]]);break;case "Z":L=["C"].concat([F.x,F.y,F.X,F.Y,F.X,F.Y])}return L},j=function(L,F){if(L[F][n]>7){L[F].shift();for(var P=L[F];P[n];)L.splice(F++,0,["C"].concat(P.splice(0,6)));L.splice(F,1);u=G(c[n],e&&e[n]||0)}},k=
function(L,F,P,ga,ka){if(L&&F&&L[ka][0]=="M"&&F[ka][0]!="M"){F.splice(ka,0,["M",ga.x,ga.y]);P.bx=0;P.by=0;P.x=L[ka][1];P.y=L[ka][2];u=G(c[n],e&&e[n]||0)}},l=0,u=G(c[n],e&&e[n]||0);for(;l<u;l++){c[l]=h(c[l],f);j(c,l);e&&(e[l]=h(e[l],d));e&&j(e,l);k(c,e,f,d,l);k(e,c,d,f,l);var z=c[l],A=e&&e[l],I=z[n],W=e&&A[n];f.x=z[I-2];f.y=z[I-1];f.bx=M(z[I-4])||f.x;f.by=M(z[I-3])||f.y;d.bx=e&&(M(A[W-4])||d.x);d.by=e&&(M(A[W-3])||d.y);d.x=e&&A[W-2];d.y=e&&A[W-1]}return e?[c,e]:c},null,Ha),db=p(function(a){for(var b=
[],c=0,e=a[n];c<e;c++){var f={},d=a[c].match(/^([^:]*):?([\d\.]*)/);f.color=g.getRGB(d[1]);if(f.color.error)return null;f.color=f.color.hex;d[2]&&(f.offset=d[2]+"%");b[Y](f)}c=1;for(e=b[n]-1;c<e;c++)if(!b[c].offset){a=M(b[c-1].offset||0);d=0;for(f=c+1;f<e;f++)if(b[f].offset){d=b[f].offset;break}if(!d){d=100;f=e}d=M(d);for(d=(d-a)/(f-c+1);c<f;c++){a+=d;b[c].offset=a+"%"}}return b}),eb=function(a,b,c,e){if(g.is(a,"string")||g.is(a,"object")){a=g.is(a,"string")?E.getElementById(a):a;if(a.tagName)return b==
null?{container:a,width:a.style.pixelWidth||a.offsetWidth,height:a.style.pixelHeight||a.offsetHeight}:{container:a,width:b,height:c}}else return{container:1,x:a,y:b,width:c,height:e}},Sa=function(a,b){var c=this,e;for(e in b)if(b[v](e)&&!(e in a))switch(typeof b[e]){case "function":(function(f){a[e]=a===c?f:function(){return f[aa](c,arguments)}})(b[e]);break;case "object":a[e]=a[e]||{};Sa.call(this,a[e],b[e]);break;default:a[e]=b[e]}},Aa=function(a,b){a==b.top&&(b.top=a.prev);a==b.bottom&&(b.bottom=
a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)},fb=function(a,b){if(b.top!==a){Aa(a,b);a.next=null;a.prev=b.top;b.top.next=a;b.top=a}},gb=function(a,b){if(b.bottom!==a){Aa(a,b);a.next=b.bottom;a.prev=null;b.bottom.prev=a;b.bottom=a}},hb=function(a,b,c){Aa(a,c);b==c.top&&(c.top=a);b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a},ib=function(a,b,c){Aa(a,c);b==c.bottom&&(c.bottom=a);b.prev&&(b.prev.next=a);a.prev=b.prev;b.prev=a;a.next=b},jb=function(a){return function(){throw Error("Rapha\u00ebl: you are calling to method \u201c"+
a+"\u201d of removed object");}};g.pathToRelative=Ra;if(g.svg){X.svgns="http://www.w3.org/2000/svg";X.xlink="http://www.w3.org/1999/xlink";T=function(a){return+a+(~~a===a)*0.5};var U=function(a,b){if(b)for(var c in b)b[v](c)&&a.setAttribute(c,Z(b[c]));else{a=E.createElementNS(X.svgns,a);a.style.webkitTapHighlightColor="rgba(0,0,0,0)";return a}};g[ba]=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var kb=function(a,b){var c=U("path");b.canvas&&b.canvas.appendChild(c);
c=new ea(c,b);c.type="path";ya(c,{fill:"none",stroke:"#000",path:a});return c},Ca=function(a,b,c){var e="linear",f=0.5,d=0.5,h=a.style;b=Z(b).replace($a,function(u,z,A){e="radial";if(z&&A){f=M(z);d=M(A);u=(d>0.5)*2-1;H(f-0.5,2)+H(d-0.5,2)>0.25&&(d=B.sqrt(0.25-H(f-0.5,2))*u+0.5)&&d!=0.5&&(d=d.toFixed(5)-1.0E-5*u)}return""});b=b.split(/\s*\-\s*/);if(e=="linear"){var j=b.shift();j=-M(j);if(isNaN(j))return null;j=[0,0,B.cos(j*O/180),B.sin(j*O/180)];var k=1/(G(J(j[2]),J(j[3]))||1);j[2]*=k;j[3]*=k;if(j[2]<
0){j[0]=-j[2];j[2]=0}if(j[3]<0){j[1]=-j[3];j[3]=0}}b=db(b);if(!b)return null;k=a.getAttribute("fill");(k=k.match(/^url\(#(.*)\)$/))&&c.defs.removeChild(E.getElementById(k[1]));k=U(e+"Gradient");k.id=x();U(k,e=="radial"?{fx:f,fy:d}:{x1:j[0],y1:j[1],x2:j[2],y2:j[3]});c.defs.appendChild(k);c=0;for(j=b[n];c<j;c++){var l=U("stop");U(l,{offset:b[c].offset?b[c].offset:c?"100%":"0%","stop-color":b[c].color||"#fff"});k.appendChild(l)}U(a,{fill:"url(#"+k.id+")",opacity:1,"fill-opacity":1});h.fill="";h.opacity=
1;return h.fillOpacity=1},Ta=function(a){var b=a.getBBox();U(a.pattern,{patternTransform:g.format("translate({0},{1})",b.x,b.y)})},ya=function(a,b){var c={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},e=a.node,f=a.attrs,d=a.rotate(),h=function(W,L){if(L=c[w.call(L)]){for(var F=W.attrs["stroke-width"]||"1",P={round:F,square:F,butt:0}[W.attrs["stroke-linecap"]||b["stroke-linecap"]]||0,ga=
[],ka=L[n];ka--;)ga[ka]=L[ka]*F+(ka%2?1:-1)*P;U(e,{"stroke-dasharray":ga[q](",")})}};b[v]("rotation")&&(d=b.rotation);var j=Z(d).split(r);if(j.length-1){j[1]=+j[1];j[2]=+j[2]}else j=null;M(d)&&a.rotate(0,true);for(var k in b)if(b[v](k))if(Fa[v](k)){var l=b[k];f[k]=l;switch(k){case "blur":a.blur(l);break;case "rotation":a.rotate(l,true);break;case "href":case "title":case "target":var u=e.parentNode;if(w.call(u.tagName)!="a"){var z=U("a");u.insertBefore(z,e);z.appendChild(e);u=z}k=="target"&&l=="blank"?
u.setAttributeNS(a.paper.xlink,"show","new"):u.setAttributeNS(a.paper.xlink,k,l);break;case "cursor":e.style.cursor=l;break;case "clip-rect":u=Z(l).split(r);if(u[n]==4){a.clip&&a.clip.parentNode.parentNode.removeChild(a.clip.parentNode);var A=U("clipPath");z=U("rect");A.id=x();U(z,{x:u[0],y:u[1],width:u[2],height:u[3]});A.appendChild(z);a.paper.defs.appendChild(A);U(e,{"clip-path":"url(#"+A.id+")"});a.clip=z}if(!l){(l=E.getElementById(e.getAttribute("clip-path").replace(/(^url\(#|\)$)/g,"")))&&l.parentNode.removeChild(l);
U(e,{"clip-path":""});delete a.clip}break;case "path":a.type=="path"&&U(e,{d:l?f.path=Ba(l):"M0,0"});break;case "width":e.setAttribute(k,l);if(f.fx){k="x";l=f.x}else break;case "x":f.fx&&(l=-f.x-(f.width||0));case "rx":if(k=="rx"&&a.type=="rect")break;case "cx":j&&(k=="x"||k=="cx")&&(j[1]+=l-f[k]);e.setAttribute(k,l);a.pattern&&Ta(a);break;case "height":e.setAttribute(k,l);if(f.fy){k="y";l=f.y}else break;case "y":f.fy&&(l=-f.y-(f.height||0));case "ry":if(k=="ry"&&a.type=="rect")break;case "cy":j&&
(k=="y"||k=="cy")&&(j[2]+=l-f[k]);e.setAttribute(k,l);a.pattern&&Ta(a);break;case "r":a.type=="rect"?U(e,{rx:l,ry:l}):e.setAttribute(k,l);break;case "src":a.type=="image"&&e.setAttributeNS(a.paper.xlink,"href",l);break;case "stroke-width":e.style.strokeWidth=l;e.setAttribute(k,l);f["stroke-dasharray"]&&h(a,f["stroke-dasharray"]);break;case "stroke-dasharray":h(a,l);break;case "translation":l=Z(l).split(r);l[0]=+l[0]||0;l[1]=+l[1]||0;if(j){j[1]+=l[0];j[2]+=l[1]}La.call(a,l[0],l[1]);break;case "scale":l=
Z(l).split(r);a.scale(+l[0]||1,+l[1]||+l[0]||1,isNaN(M(l[2]))?null:+l[2],isNaN(M(l[3]))?null:+l[3]);break;case "fill":if(u=Z(l).match(ha)){A=U("pattern");var I=U("image");A.id=x();U(A,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});U(I,{x:0,y:0});I.setAttributeNS(a.paper.xlink,"href",u[1]);A.appendChild(I);l=E.createElement("img");l.style.cssText="position:absolute;left:-9999em;top-9999em";l.onload=function(){U(A,{width:this.offsetWidth,height:this.offsetHeight});U(I,{width:this.offsetWidth,
height:this.offsetHeight});E.body.removeChild(this);a.paper.safari()};E.body.appendChild(l);l.src=u[1];a.paper.defs.appendChild(A);e.style.fill="url(#"+A.id+")";U(e,{fill:"url(#"+A.id+")"});a.pattern=A;a.pattern&&Ta(a);break}u=g.getRGB(l);if(u.error)if(({circle:1,ellipse:1}[v](a.type)||Z(l).charAt()!="r")&&Ca(e,l,a.paper)){f.gradient=l;f.fill="none";break}else{delete b.gradient;delete f.gradient;!g.is(f.opacity,"undefined")&&g.is(b.opacity,"undefined")&&U(e,{opacity:f.opacity});!g.is(f["fill-opacity"],
"undefined")&&g.is(b["fill-opacity"],"undefined")&&U(e,{"fill-opacity":f["fill-opacity"]})}u[v]("opacity")&&U(e,{"fill-opacity":u.opacity>1?u.opacity/100:u.opacity});case "stroke":u=g.getRGB(l);e.setAttribute(k,u.hex);k=="stroke"&&u[v]("opacity")&&U(e,{"stroke-opacity":u.opacity>1?u.opacity/100:u.opacity});break;case "gradient":(({circle:1,ellipse:1})[v](a.type)||Z(l).charAt()!="r")&&Ca(e,l,a.paper);break;case "opacity":f.gradient&&!f[v]("stroke-opacity")&&U(e,{"stroke-opacity":l>1?l/100:l});case "fill-opacity":if(f.gradient){if(u=
E.getElementById(e.getAttribute("fill").replace(/^url\(#|\)$/g,""))){u=u.getElementsByTagName("stop");u[u[n]-1].setAttribute("stop-opacity",l)}break}default:k=="font-size"&&(l=ja(l,10)+"px");u=k.replace(/(\-.)/g,function(W){return xa.call(W.substring(1))});e.style[u]=l;e.setAttribute(k,l)}}Fb(a,b);j?a.rotate(j.join(fa)):M(d)&&a.rotate(d,true)},Fb=function(a,b){if(!(a.type!="text"||!(b[v]("text")||b[v]("font")||b[v]("font-size")||b[v]("x")||b[v]("y")))){var c=a.attrs,e=a.node,f=e.firstChild?ja(E.defaultView.getComputedStyle(e.firstChild,
"").getPropertyValue("font-size"),10):10;if(b[v]("text")){for(c.text=b.text;e.firstChild;)e.removeChild(e.firstChild);for(var d=Z(b.text).split("\n"),h=0,j=d[n];h<j;h++)if(d[h]){var k=U("tspan");h&&U(k,{dy:f*1.2,x:c.x});k.appendChild(E.createTextNode(d[h]));e.appendChild(k)}}else{d=e.getElementsByTagName("tspan");h=0;for(j=d[n];h<j;h++)h&&U(d[h],{dy:f*1.2,x:c.x})}U(e,{y:c.y});f=a.getBBox();(f=c.y-(f.y+f.height/2))&&g.is(f,"finite")&&U(e,{y:c.y+f})}},ea=function(a,b){this[0]=a;this.id=g._oid++;this.node=
a;a.raphael=this;this.paper=b;this.attrs=this.attrs||{};this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);(this.prev=b.top)&&(b.top.next=this);b.top=this;this.next=null},ca=ea[D];ea[D].rotate=function(a,b,c){if(this.removed)return this;if(a==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][q](fa);return this._.rt.deg}var e=this.getBBox();a=Z(a).split(r);if(a[n]-1){b=M(a[1]);c=M(a[2])}a=M(a[0]);b!=null&&b!==false?this._.rt.deg=
a:this._.rt.deg+=a;c==null&&(b=null);this._.rt.cx=b;this._.rt.cy=c;b=b==null?e.x+e.width/2:b;c=c==null?e.y+e.height/2:c;if(this._.rt.deg){this.transformations[0]=g.format("rotate({0} {1} {2})",this._.rt.deg,b,c);this.clip&&U(this.clip,{transform:g.format("rotate({0} {1} {2})",-this._.rt.deg,b,c)})}else{this.transformations[0]="";this.clip&&U(this.clip,{transform:""})}U(this.node,{transform:this.transformations[q](fa)});return this};ea[D].hide=function(){!this.removed&&(this.node.style.display="none");
return this};ea[D].show=function(){!this.removed&&(this.node.style.display="");return this};ea[D].remove=function(){if(!this.removed){Aa(this,this.paper);this.node.parentNode.removeChild(this.node);for(var a in this)delete this[a];this.removed=true}};ea[D].getBBox=function(){if(this.removed)return this;if(this.type=="path")return Ja(this.attrs.path);if(this.node.style.display=="none"){this.show();var a=true}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}if(this.type=="text"){b={x:b.x,
y:Infinity,width:0,height:0};for(var e=0,f=this.node.getNumberOfChars();e<f;e++){var d=this.node.getExtentOfChar(e);d.y<b.y&&(b.y=d.y);d.y+d.height-b.y>b.height&&(b.height=d.y+d.height-b.y);d.x+d.width-b.x>b.width&&(b.width=d.x+d.width-b.x)}}a&&this.hide();return b};ea[D].attr=function(a,b){if(this.removed)return this;if(a==null){var c={},e;for(e in this.attrs)this.attrs[v](e)&&(c[e]=this.attrs[e]);this._.rt.deg&&(c.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(c.scale=this.scale());c.gradient&&
c.fill=="none"&&(c.fill=c.gradient)&&delete c.gradient;return c}if(b==null&&g.is(a,"string")){if(a=="translation")return La.call(this);if(a=="rotation")return this.rotate();if(a=="scale")return this.scale();if(a=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[a]}if(b==null&&g.is(a,R)){e={};c=0;for(var f=a.length;c<f;c++)e[a[c]]=this.attr(a[c]);return e}if(b!=null){c={};c[a]=b}else a!=null&&g.is(a,"object")&&(c=a);for(f in this.paper.customAttributes)if(this.paper.customAttributes[v](f)&&
c[v](f)&&g.is(this.paper.customAttributes[f],"function")){e=this.paper.customAttributes[f].apply(this,[].concat(c[f]));this.attrs[f]=c[f];for(var d in e)e[v](d)&&(c[d]=e[d])}ya(this,c);return this};ea[D].toFront=function(){if(this.removed)return this;this.node.parentNode.appendChild(this.node);var a=this.paper;a.top!=this&&fb(this,a);return this};ea[D].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);
gb(this,this.paper)}return this};ea[D].insertAfter=function(a){if(this.removed)return this;var b=a.node||a[a.length-1].node;b.nextSibling?b.parentNode.insertBefore(this.node,b.nextSibling):b.parentNode.appendChild(this.node);hb(this,a,this.paper);return this};ea[D].insertBefore=function(a){if(this.removed)return this;var b=a.node||a[0].node;b.parentNode.insertBefore(this.node,b);ib(this,a,this.paper);return this};ea[D].blur=function(a){if(+a!==0){var b=U("filter"),c=U("feGaussianBlur");this.attrs.blur=
a;b.id=x();U(c,{stdDeviation:+a||1.5});b.appendChild(c);this.paper.defs.appendChild(b);this._blur=b;U(this.node,{filter:"url(#"+b.id+")"})}else{if(this._blur){this._blur.parentNode.removeChild(this._blur);delete this._blur;delete this.attrs.blur}this.node.removeAttribute("filter")}};var mb=function(a,b,c,e){var f=U("circle");a.canvas&&a.canvas.appendChild(f);a=new ea(f,a);a.attrs={cx:b,cy:c,r:e,fill:"none",stroke:"#000"};a.type="circle";U(f,a.attrs);return a},nb=function(a,b,c,e,f,d){var h=U("rect");
a.canvas&&a.canvas.appendChild(h);a=new ea(h,a);a.attrs={x:b,y:c,width:e,height:f,r:d||0,rx:d||0,ry:d||0,fill:"none",stroke:"#000"};a.type="rect";U(h,a.attrs);return a},ob=function(a,b,c,e,f){var d=U("ellipse");a.canvas&&a.canvas.appendChild(d);a=new ea(d,a);a.attrs={cx:b,cy:c,rx:e,ry:f,fill:"none",stroke:"#000"};a.type="ellipse";U(d,a.attrs);return a},pb=function(a,b,c,e,f,d){var h=U("image");U(h,{x:c,y:e,width:f,height:d,preserveAspectRatio:"none"});h.setAttributeNS(a.xlink,"href",b);a.canvas&&
a.canvas.appendChild(h);a=new ea(h,a);a.attrs={x:c,y:e,width:f,height:d,src:b};a.type="image";return a},qb=function(a,b,c,e){var f=U("text");U(f,{x:b,y:c,"text-anchor":"middle"});a.canvas&&a.canvas.appendChild(f);a=new ea(f,a);a.attrs={x:b,y:c,"text-anchor":"middle",text:e,font:Fa.font,stroke:"none",fill:"#000"};a.type="text";ya(a,a.attrs);return a},rb=function(a,b){this.width=a||this.width;this.height=b||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);
return this},Oa=function(){var a=eb[aa](0,arguments),b=a&&a.container,c=a.x,e=a.y,f=a.width;a=a.height;if(!b)throw Error("SVG container not found.");var d=U("svg");c=c||0;e=e||0;f=f||512;a=a||342;U(d,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:f,height:a});if(b==1){d.style.cssText="position:absolute;left:"+c+"px;top:"+e+"px";E.body.appendChild(d)}else b.firstChild?b.insertBefore(d,b.firstChild):b.appendChild(d);b=new S;b.width=f;b.height=a;b.canvas=d;Sa.call(b,b,g.fn);b.clear();return b};
X.clear=function(){for(var a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);this.bottom=this.top=null;(this.desc=U("desc")).appendChild(E.createTextNode("Created with Rapha\u00ebl"));a.appendChild(this.desc);a.appendChild(this.defs=U("defs"))};X.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]=jb(a)}}if(g.vml){var sb={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},Gb=/([clmz]),?([^clmz]*)/gi,Hb=/ progid:\S+Blur\([^\)]+\)/g,
Ib=/-?[^,\s-]+/g,Da=1E3+fa+1E3,Ea={path:1,rect:1},Jb=function(a){var b=/[ahqstv]/ig,c=Ba;Z(a).match(b)&&(c=Ia);b=/[clmz]/g;if(c==Ba&&!Z(a).match(b))return a=Z(a).replace(Gb,function(k,l,u){var z=[],A=w.call(l)=="m",I=sb[l];u.replace(Ib,function(W){if(A&&z[n]==2){I+=z+sb[l=="m"?"l":"L"];z=[]}z[Y](T(W*10))});return I+z});b=c(a);var e;a=[];for(var f=0,d=b[n];f<d;f++){c=b[f];e=w.call(b[f][0]);e=="z"&&(e="x");for(var h=1,j=c[n];h<j;h++)e+=T(c[h]*10)+(h!=j-1?",":"");a[Y](e)}return a[q](fa)};g[ba]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+
this.version};kb=function(a,b){var c=ma("group");c.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";c.coordsize=b.coordsize;c.coordorigin=b.coordorigin;var e=ma("shape"),f=e.style;f.width=b.width+"px";f.height=b.height+"px";e.coordsize=Da;e.coordorigin=b.coordorigin;c.appendChild(e);e=new ea(e,c,b);f={fill:"none",stroke:"#000"};a&&(f.path=a);e.type="path";e.path=[];e.Path="";ya(e,f);b.canvas.appendChild(c);return e};ya=function(a,b){a.attrs=a.attrs||{};var c=
a.node,e=a.attrs,f=c.style,d;d=(b.x!=e.x||b.y!=e.y||b.width!=e.width||b.height!=e.height||b.r!=e.r)&&a.type=="rect";for(var h in b)b[v](h)&&(e[h]=b[h]);if(d){e.path=tb(e.x,e.y,e.width,e.height,e.r);a.X=e.x;a.Y=e.y;a.W=e.width;a.H=e.height}b.href&&(c.href=b.href);b.title&&(c.title=b.title);b.target&&(c.target=b.target);b.cursor&&(f.cursor=b.cursor);"blur"in b&&a.blur(b.blur);if(b.path&&a.type=="path"||d)c.path=Jb(e.path);b.rotation!=null&&a.rotate(b.rotation,true);if(b.translation){d=Z(b.translation).split(r);
La.call(a,d[0],d[1]);if(a._.rt.cx!=null){a._.rt.cx+=+d[0];a._.rt.cy+=+d[1];a.setBox(a.attrs,d[0],d[1])}}if(b.scale){d=Z(b.scale).split(r);a.scale(+d[0]||1,+d[1]||+d[0]||1,+d[2]||null,+d[3]||null)}if("clip-rect"in b){d=Z(b["clip-rect"]).split(r);if(d[n]==4){d[2]=+d[2]+ +d[0];d[3]=+d[3]+ +d[1];h=c.clipRect||E.createElement("div");var j=h.style,k=c.parentNode;j.clip=g.format("rect({1}px {2}px {3}px {0}px)",d);if(!c.clipRect){j.position="absolute";j.top=0;j.left=0;j.width=a.paper.width+"px";j.height=
a.paper.height+"px";k.parentNode.insertBefore(h,k);h.appendChild(k);c.clipRect=h}}b["clip-rect"]||c.clipRect&&(c.clipRect.style.clip="")}a.type=="image"&&b.src&&(c.src=b.src);if(a.type=="image"&&b.opacity){c.filterOpacity=" progid:DXImageTransform.Microsoft.Alpha(opacity="+b.opacity*100+")";f.filter=(c.filterMatrix||"")+(c.filterOpacity||"")}b.font&&(f.font=b.font);b["font-family"]&&(f.fontFamily='"'+b["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"');b["font-size"]&&(f.fontSize=b["font-size"]);
b["font-weight"]&&(f.fontWeight=b["font-weight"]);b["font-style"]&&(f.fontStyle=b["font-style"]);if(b.opacity!=null||b["stroke-width"]!=null||b.fill!=null||b.stroke!=null||b["stroke-width"]!=null||b["stroke-opacity"]!=null||b["fill-opacity"]!=null||b["stroke-dasharray"]!=null||b["stroke-miterlimit"]!=null||b["stroke-linejoin"]!=null||b["stroke-linecap"]!=null){c=a.shape||c;d=c.getElementsByTagName("fill")&&c.getElementsByTagName("fill")[0];h=false;!d&&(h=d=ma("fill"));if("fill-opacity"in b||"opacity"in
b){f=((+e["fill-opacity"]+1||2)-1)*((+e.opacity+1||2)-1)*((+g.getRGB(b.fill).o+1||2)-1);f=N(G(f,0),1);d.opacity=f}b.fill&&(d.on=true);if(d.on==null||b.fill=="none")d.on=false;if(d.on&&b.fill)if(f=b.fill.match(ha)){d.src=f[1];d.type="tile"}else{d.color=g.getRGB(b.fill).hex;d.src="";d.type="solid";if(g.getRGB(b.fill).error&&(a.type in{circle:1,ellipse:1}||Z(b.fill).charAt()!="r")&&Ca(a,b.fill)){e.fill="none";e.gradient=b.fill}}h&&c.appendChild(d);d=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0];
h=false;!d&&(h=d=ma("stroke"));if(b.stroke&&b.stroke!="none"||b["stroke-width"]||b["stroke-opacity"]!=null||b["stroke-dasharray"]||b["stroke-miterlimit"]||b["stroke-linejoin"]||b["stroke-linecap"])d.on=true;(b.stroke=="none"||d.on==null||b.stroke==0||b["stroke-width"]==0)&&(d.on=false);f=g.getRGB(b.stroke);d.on&&b.stroke&&(d.color=f.hex);f=((+e["stroke-opacity"]+1||2)-1)*((+e.opacity+1||2)-1)*((+f.o+1||2)-1);j=(M(b["stroke-width"])||1)*0.75;f=N(G(f,0),1);b["stroke-width"]==null&&(j=e["stroke-width"]);
b["stroke-width"]&&(d.weight=j);j&&j<1&&(f*=j)&&(d.weight=1);d.opacity=f;b["stroke-linejoin"]&&(d.joinstyle=b["stroke-linejoin"]||"miter");d.miterlimit=b["stroke-miterlimit"]||8;b["stroke-linecap"]&&(d.endcap=b["stroke-linecap"]=="butt"?"flat":b["stroke-linecap"]=="square"?"square":"round");if(b["stroke-dasharray"]){f={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};d.dashstyle=
f[v](b["stroke-dasharray"])?f[b["stroke-dasharray"]]:""}h&&c.appendChild(d)}if(a.type=="text"){f=a.paper.span.style;e.font&&(f.font=e.font);e["font-family"]&&(f.fontFamily=e["font-family"]);e["font-size"]&&(f.fontSize=e["font-size"]);e["font-weight"]&&(f.fontWeight=e["font-weight"]);e["font-style"]&&(f.fontStyle=e["font-style"]);a.node.string&&(a.paper.span.innerHTML=Z(a.node.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));a.W=e.w=a.paper.span.offsetWidth;a.H=e.h=a.paper.span.offsetHeight;
a.X=e.x;a.Y=e.y+T(a.H/2);switch(e["text-anchor"]){case "start":a.node.style["v-text-align"]="left";a.bbx=T(a.W/2);break;case "end":a.node.style["v-text-align"]="right";a.bbx=-T(a.W/2);break;default:a.node.style["v-text-align"]="center"}}};Ca=function(a,b){a.attrs=a.attrs||{};var c,e="linear",f=".5 .5";a.attrs.gradient=b;b=Z(b).replace($a,function(u,z,A){e="radial";if(z&&A){z=M(z);A=M(A);H(z-0.5,2)+H(A-0.5,2)>0.25&&(A=B.sqrt(0.25-H(z-0.5,2))*((A>0.5)*2-1)+0.5);f=z+fa+A}return""});b=b.split(/\s*\-\s*/);
if(e=="linear"){var d=b.shift();d=-M(d);if(isNaN(d))return null}var h=db(b);if(!h)return null;a=a.shape||a.node;c=a.getElementsByTagName("fill")[0]||ma("fill");!c.parentNode&&a.appendChild(c);if(h[n]){c.on=true;c.method="none";c.color=h[0].color;c.color2=h[h[n]-1].color;for(var j=[],k=0,l=h[n];k<l;k++)h[k].offset&&j[Y](h[k].offset+fa+h[k].color);c.colors&&(c.colors.value=j[n]?j[q]():"0% "+c.color);if(e=="radial"){c.type="gradientradial";c.focus="100%";c.focussize=f;c.focusposition=f}else{c.type="gradient";
c.angle=(270-d)%360}}return 1};ea=function(a,b,c){this[0]=a;this.id=g._oid++;this.node=a;a.raphael=this;this.Y=this.X=0;this.attrs={};this.Group=b;this.paper=c;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!c.bottom&&(c.bottom=this);(this.prev=c.top)&&(c.top.next=this);c.top=this;this.next=null};ca=ea[D];ca.rotate=function(a,b,c){if(this.removed)return this;if(a==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][q](fa);return this._.rt.deg}a=Z(a).split(r);if(a[n]-1){b=M(a[1]);c=M(a[2])}a=
M(a[0]);b!=null?this._.rt.deg=a:this._.rt.deg+=a;c==null&&(b=null);this._.rt.cx=b;this._.rt.cy=c;this.setBox(this.attrs,b,c);this.Group.style.rotation=this._.rt.deg;return this};ca.setBox=function(a,b,c){if(this.removed)return this;var e=this.Group.style,f=this.shape&&this.shape.style||this.node.style;a=a||{};for(var d in a)a[v](d)&&(this.attrs[d]=a[d]);b=b||this._.rt.cx;c=c||this._.rt.cy;var h=this.attrs,j;switch(this.type){case "circle":a=h.cx-h.r;d=h.cy-h.r;j=h=h.r*2;break;case "ellipse":a=h.cx-
h.rx;d=h.cy-h.ry;j=h.rx*2;h=h.ry*2;break;case "image":a=+h.x;d=+h.y;j=h.width||0;h=h.height||0;break;case "text":this.textpath.v=["m",T(h.x),", ",T(h.y-2),"l",T(h.x)+1,", ",T(h.y-2)][q]("");a=h.x-T(this.W/2);d=h.y-this.H/2;j=this.W;h=this.H;break;case "rect":case "path":if(this.attrs.path){h=Ja(this.attrs.path);a=h.x;d=h.y;j=h.width;h=h.height}else{d=a=0;j=this.paper.width;h=this.paper.height}break;default:d=a=0;j=this.paper.width;h=this.paper.height}b=(b==null?a+j/2:b)-this.paper.width/2;c=(c==null?
d+h/2:c)-this.paper.height/2;var k;e.left!=(k=b+"px")&&(e.left=k);e.top!=(k=c+"px")&&(e.top=k);this.X=Ea[v](this.type)?-b:a;this.Y=Ea[v](this.type)?-c:d;this.W=j;this.H=h;if(Ea[v](this.type)){f.left!=(k=-b*10+"px")&&(f.left=k);f.top!=(k=-c*10+"px")&&(f.top=k)}else if(this.type=="text"){f.left!=(k=-b+"px")&&(f.left=k);f.top!=(k=-c+"px")&&(f.top=k)}else{e.width!=(k=this.paper.width+"px")&&(e.width=k);e.height!=(k=this.paper.height+"px")&&(e.height=k);f.left!=(k=a-b+"px")&&(f.left=k);f.top!=(k=d-c+"px")&&
(f.top=k);f.width!=(k=j+"px")&&(f.width=k);f.height!=(k=h+"px")&&(f.height=k)}};ca.hide=function(){!this.removed&&(this.Group.style.display="none");return this};ca.show=function(){!this.removed&&(this.Group.style.display="block");return this};ca.getBBox=function(){if(this.removed)return this;if(Ea[v](this.type))return Ja(this.attrs.path);return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};ca.remove=function(){if(!this.removed){Aa(this,this.paper);this.node.parentNode.removeChild(this.node);
this.Group.parentNode.removeChild(this.Group);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)delete this[a];this.removed=true}};ca.attr=function(a,b){if(this.removed)return this;if(a==null){var c={},e;for(e in this.attrs)this.attrs[v](e)&&(c[e]=this.attrs[e]);this._.rt.deg&&(c.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(c.scale=this.scale());c.gradient&&c.fill=="none"&&(c.fill=c.gradient)&&delete c.gradient;return c}if(b==null&&g.is(a,"string")){if(a=="translation")return La.call(this);
if(a=="rotation")return this.rotate();if(a=="scale")return this.scale();if(a=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[a]}if(this.attrs&&b==null&&g.is(a,R)){var f={};e=0;for(c=a[n];e<c;e++)f[a[e]]=this.attr(a[e]);return f}if(b!=null){c={};c[a]=b}b==null&&g.is(a,"object")&&(c=a);if(c){for(f in this.paper.customAttributes)if(this.paper.customAttributes[v](f)&&c[v](f)&&g.is(this.paper.customAttributes[f],"function")){e=this.paper.customAttributes[f].apply(this,
[].concat(c[f]));this.attrs[f]=c[f];for(var d in e)e[v](d)&&(c[d]=e[d])}c.text&&this.type=="text"&&(this.node.string=c.text);ya(this,c);c.gradient&&({circle:1,ellipse:1}[v](this.type)||Z(c.gradient).charAt()!="r")&&Ca(this,c.gradient);(!Ea[v](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};ca.toFront=function(){!this.removed&&this.Group.parentNode.appendChild(this.Group);this.paper.top!=this&&fb(this,this.paper);return this};ca.toBack=function(){if(this.removed)return this;if(this.Group.parentNode.firstChild!=
this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);gb(this,this.paper)}return this};ca.insertAfter=function(a){if(this.removed)return this;a.constructor==pa&&(a=a[a.length-1]);a.Group.nextSibling?a.Group.parentNode.insertBefore(this.Group,a.Group.nextSibling):a.Group.parentNode.appendChild(this.Group);hb(this,a,this.paper);return this};ca.insertBefore=function(a){if(this.removed)return this;a.constructor==pa&&(a=a[0]);a.Group.parentNode.insertBefore(this.Group,
a.Group);ib(this,a,this.paper);return this};ca.blur=function(a){var b=this.node.runtimeStyle,c=b.filter;c=c.replace(Hb,"");if(+a!==0){this.attrs.blur=a;b.filter=c+fa+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+a||1.5)+")";b.margin=g.format("-{0}px 0 0 -{0}px",T(+a||1.5))}else{b.filter=c;b.margin=0;delete this.attrs.blur}};mb=function(a,b,c,e){var f=ma("group"),d=ma("oval");f.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";f.coordsize=Da;f.coordorigin=
a.coordorigin;f.appendChild(d);d=new ea(d,f,a);d.type="circle";ya(d,{stroke:"#000",fill:"none"});d.attrs.cx=b;d.attrs.cy=c;d.attrs.r=e;d.setBox({x:b-e,y:c-e,width:e*2,height:e*2});a.canvas.appendChild(f);return d};var tb=function(a,b,c,e,f){return f?g.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",a+f,b,c-f*2,f,-f,e-f*2,f*2-c,f*2-e):g.format("M{0},{1}l{2},0,0,{3},{4},0z",a,b,c,e,-c)};nb=function(a,b,c,e,f,d){var h=
tb(b,c,e,f,d);a=a.path(h);var j=a.attrs;a.X=j.x=b;a.Y=j.y=c;a.W=j.width=e;a.H=j.height=f;j.r=d;j.path=h;a.type="rect";return a};ob=function(a,b,c,e,f){var d=ma("group"),h=ma("oval");d.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";d.coordsize=Da;d.coordorigin=a.coordorigin;d.appendChild(h);h=new ea(h,d,a);h.type="ellipse";ya(h,{stroke:"#000"});h.attrs.cx=b;h.attrs.cy=c;h.attrs.rx=e;h.attrs.ry=f;h.setBox({x:b-e,y:c-f,width:e*2,height:f*2});a.canvas.appendChild(d);
return h};pb=function(a,b,c,e,f,d){var h=ma("group"),j=ma("image");h.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";h.coordsize=Da;h.coordorigin=a.coordorigin;j.src=b;h.appendChild(j);j=new ea(j,h,a);j.type="image";j.attrs.src=b;j.attrs.x=c;j.attrs.y=e;j.attrs.w=f;j.attrs.h=d;j.setBox({x:c,y:e,width:f,height:d});a.canvas.appendChild(h);return j};qb=function(a,b,c,e){var f=ma("group"),d=ma("shape"),h=d.style,j=ma("path"),k=ma("textpath");f.style.cssText="position:absolute;left:0;top:0;width:"+
a.width+"px;height:"+a.height+"px";f.coordsize=Da;f.coordorigin=a.coordorigin;j.v=g.format("m{0},{1}l{2},{1}",T(b*10),T(c*10),T(b*10)+1);j.textpathok=true;h.width=a.width;h.height=a.height;k.string=Z(e);k.on=true;d.appendChild(k);d.appendChild(j);f.appendChild(d);h=new ea(k,f,a);h.shape=d;h.textpath=j;h.type="text";h.attrs.text=e;h.attrs.x=b;h.attrs.y=c;h.attrs.w=1;h.attrs.h=1;ya(h,{font:Fa.font,stroke:"none",fill:"#000"});h.setBox();a.canvas.appendChild(f);return h};rb=function(a,b){var c=this.canvas.style;
a==+a&&(a+="px");b==+b&&(b+="px");c.width=a;c.height=b;c.clip="rect(0 "+a+" "+b+" 0)";return this};var ma;E.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!E.namespaces.rvml&&E.namespaces.add("rvml","urn:schemas-microsoft-com:vml");ma=function(a){return E.createElement("<rvml:"+a+' class="rvml">')}}catch(Qb){ma=function(a){return E.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}Oa=function(){var a=eb[aa](0,arguments),b=a.container,c=a.height,e=a.width,
f=a.x;a=a.y;if(!b)throw Error("VML container not found.");var d=new S,h=d.canvas=E.createElement("div"),j=h.style;f=f||0;a=a||0;e=e||512;c=c||342;e==+e&&(e+="px");c==+c&&(c+="px");d.width=1E3;d.height=1E3;d.coordsize=1E4+fa+1E4;d.coordorigin="0 0";d.span=E.createElement("span");d.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";h.appendChild(d.span);j.cssText=g.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",
e,c);if(b==1){E.body.appendChild(h);j.left=f+"px";j.top=a+"px";j.position="absolute"}else b.firstChild?b.insertBefore(h,b.firstChild):b.appendChild(h);Sa.call(d,d,g.fn);return d};X.clear=function(){this.canvas.innerHTML="";this.span=E.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};X.remove=function(){this.canvas.parentNode.removeChild(this.canvas);
for(var a in this)this[a]=jb(a);return true}}sa=navigator.userAgent.match(/Version\\x2f(.*?)\s/);navigator.vendor=="Apple Computer, Inc."&&(sa&&sa[1]<4||navigator.platform.slice(0,2)=="iP")?X.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});K.setTimeout(function(){a.remove()})}:X.safari=function(){};var Kb=function(){this.returnValue=false},Lb=function(){return this.originalEvent.preventDefault()},Mb=function(){this.cancelBubble=true},Nb=function(){return this.originalEvent.stopPropagation()},
Ob=function(){if(E.addEventListener)return function(a,b,c,e){var f=ra&&qa[b]?qa[b]:b,d=function(h){if(ra&&qa[v](b))for(var j=0,k=h.targetTouches&&h.targetTouches.length;j<k;j++)if(h.targetTouches[j].target==a){k=h;h=h.targetTouches[j];h.originalEvent=k;h.preventDefault=Lb;h.stopPropagation=Nb;break}return c.call(e,h)};a.addEventListener(f,d,false);return function(){a.removeEventListener(f,d,false);return true}};if(E.attachEvent)return function(a,b,c,e){var f=function(d){d=d||K.event;d.preventDefault=
d.preventDefault||Kb;d.stopPropagation=d.stopPropagation||Mb;return c.call(e,d)};a.attachEvent("on"+b,f);return function(){a.detachEvent("on"+b,f);return true}}}(),ta=[],Ua=function(a){for(var b=a.clientX,c=a.clientY,e=E.documentElement.scrollTop||E.body.scrollTop,f=E.documentElement.scrollLeft||E.body.scrollLeft,d,h=ta.length;h--;){d=ta[h];if(ra)for(var j=a.touches.length,k;j--;){k=a.touches[j];if(k.identifier==d.el._drag.id){b=k.clientX;c=k.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();
break}}else a.preventDefault();b+=f;c+=e;d.move&&d.move.call(d.move_scope||d.el,b-d.el._drag.x,c-d.el._drag.y,b,c,a)}},Va=function(a){g.unmousemove(Ua).unmouseup(Va);for(var b=ta.length,c;b--;){c=ta[b];c.el._drag={};c.end&&c.end.call(c.end_scope||c.start_scope||c.move_scope||c.el,a)}ta=[]};for(sa=va[n];sa--;)(function(a){g[a]=ea[D][a]=function(b,c){if(g.is(b,"function")){this.events=this.events||[];this.events.push({name:a,f:b,unbind:Ob(this.shape||this.node||E,a,b,c||this)})}return this};g["un"+
a]=ea[D]["un"+a]=function(b){for(var c=this.events,e=c[n];e--;)if(c[e].name==a&&c[e].f==b){c[e].unbind();c.splice(e,1);!c.length&&delete this.events;break}return this}})(va[sa]);ca.hover=function(a,b,c,e){return this.mouseover(a,c).mouseout(b,e||c)};ca.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};ca.drag=function(a,b,c,e,f,d){this._drag={};this.mousedown(function(h){(h.originalEvent||h).preventDefault();var j=E.documentElement.scrollTop||E.body.scrollTop,k=E.documentElement.scrollLeft||
E.body.scrollLeft;this._drag.x=h.clientX+k;this._drag.y=h.clientY+j;this._drag.id=h.identifier;b&&b.call(f||e||this,h.clientX+k,h.clientY+j,h);!ta.length&&g.mousemove(Ua).mouseup(Va);ta.push({el:this,move:a,end:c,move_scope:e,start_scope:f,end_scope:d})});return this};ca.undrag=function(a,b,c){for(b=ta.length;b--;)ta[b].el==this&&ta[b].move==a&&ta[b].end==c&&ta.splice(b++,1);!ta.length&&g.unmousemove(Ua).unmouseup(Va)};X.circle=function(a,b,c){return mb(this,a||0,b||0,c||0)};X.rect=function(a,b,c,
e,f){return nb(this,a||0,b||0,c||0,e||0,f||0)};X.ellipse=function(a,b,c,e){return ob(this,a||0,b||0,c||0,e||0)};X.path=function(a){a&&!g.is(a,"string")&&!g.is(a[0],R)&&(a+="");return kb(g.format[aa](g,arguments),this)};X.image=function(a,b,c,e,f){return pb(this,a||"about:blank",b||0,c||0,e||0,f||0)};X.text=function(a,b,c){return qb(this,a||0,b||0,Z(c))};X.set=function(a){arguments[n]>1&&(a=Array[D].splice.call(arguments,0,arguments[n]));return new pa(a)};X.setSize=rb;X.top=X.bottom=null;X.raphael=
g;ca.resetScale=function(){if(this.removed)return this;this._.sx=1;this._.sy=1;this.attrs.scale="1 1"};ca.scale=function(a,b,c,e){if(this.removed)return this;if(a==null&&b==null)return{x:this._.sx,y:this._.sy,toString:o};b=b||a;!+b&&(b=a);var f,d,h=this.attrs;if(a!=0){var j=this.getBBox(),k=j.x+j.width/2,l=j.y+j.height/2;f=J(a/this._.sx);d=J(b/this._.sy);c=+c||c==0?c:k;e=+e||e==0?e:l;var u=this._.sx>0,z=this._.sy>0;j=~~(a/J(a));var A=~~(b/J(b)),I=f*j,W=d*A,L=this.node.style;k=c+J(k-c)*I*(k>c==u?1:
-1);l=e+J(l-e)*W*(l>e==z?1:-1);var F=a*j>b*A?d:f;switch(this.type){case "rect":case "image":var P=h.width*f,ga=h.height*d;this.attr({height:ga,r:h.r*F,width:P,x:k-P/2,y:l-ga/2});break;case "circle":case "ellipse":this.attr({rx:h.rx*f,ry:h.ry*d,r:h.r*F,cx:k,cy:l});break;case "text":this.attr({x:k,y:l});break;case "path":F=Ra(h.path);var ka=true;u=u?I:f;z=z?W:d;W=0;for(I=F[n];W<I;W++){var la=F[W],ia=xa.call(la[0]);if(!(ia=="M"&&ka)){ka=false;if(ia=="A"){la[F[W][n]-2]*=u;la[F[W][n]-1]*=z;la[1]*=f;la[2]*=
d;la[5]=+(j+A?!!+la[5]:!+la[5])}else if(ia=="H"){ia=1;for(var za=la[n];ia<za;ia++)la[ia]*=u}else if(ia=="V"){ia=1;for(za=la[n];ia<za;ia++)la[ia]*=z}else{ia=1;for(za=la[n];ia<za;ia++)la[ia]*=ia%2?u:z}}}d=Ja(F);f=k-d.x-d.width/2;d=l-d.y-d.height/2;F[0][1]+=f;F[0][2]+=d;this.attr({path:F})}if(this.type in{text:1,image:1}&&(j!=1||A!=1))if(this.transformations){this.transformations[2]="scale(".concat(j,",",A,")");this.node.setAttribute("transform",this.transformations[q](fa));f=j==-1?-h.x-(P||0):h.x;d=
A==-1?-h.y-(ga||0):h.y;this.attr({x:f,y:d});h.fx=j-1;h.fy=A-1}else{this.node.filterMatrix=" progid:DXImageTransform.Microsoft"+".Matrix(M11=".concat(j,", M12=0, M21=0, M22=",A,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')");L.filter=(this.node.filterMatrix||"")+(this.node.filterOpacity||"")}else if(this.transformations){this.transformations[2]="";this.node.setAttribute("transform",this.transformations[q](fa));h.fx=0;h.fy=0}else{this.node.filterMatrix="";L.filter=(this.node.filterMatrix||
"")+(this.node.filterOpacity||"")}h.scale=[a,b,c,e][q](fa);this._.sx=a;this._.sy=b}return this};ca.clone=function(){if(this.removed)return null;var a=this.attr();delete a.scale;delete a.translation;return this.paper[this.type]().attr(a)};var Wa={},Ma=function(a,b,c,e,f,d,h,j,k){var l=0,u=100,z=[a,b,c,e,f,d,h,j].join(),A=Wa[z],I,W;!A&&(Wa[z]=A={data:[]});A.timer&&clearTimeout(A.timer);A.timer=setTimeout(function(){delete Wa[z]},2E3);if(k!=null)u=~~Ma(a,b,c,e,f,d,h,j)*10;for(var L=0;L<u+1;L++){if(A.data[k]>
L)W=A.data[L*u];else{W=g.findDotsAtSegment(a,b,c,e,f,d,h,j,L/u);A.data[L]=W}L&&(l+=H(H(I.x-W.x,2)+H(I.y-W.y,2),0.5));if(k!=null&&l>=k)return W;I=W}if(k==null)return l};va=function(a,b){return function(c,e,f){c=Ia(c);for(var d,h,j,k,l="",u={},z=0,A=0,I=c.length;A<I;A++){j=c[A];if(j[0]=="M"){d=+j[1];h=+j[2]}else{k=Ma(d,h,j[1],j[2],j[3],j[4],j[5],j[6]);if(z+k>e){if(b&&!u.start){d=Ma(d,h,j[1],j[2],j[3],j[4],j[5],j[6],e-z);l+=["C",d.start.x,d.start.y,d.m.x,d.m.y,d.x,d.y];if(f)return l;u.start=l;l=["M",
d.x,d.y+"C",d.n.x,d.n.y,d.end.x,d.end.y,j[5],j[6]][q]();z+=k;d=+j[5];h=+j[6];continue}if(!a&&!b){d=Ma(d,h,j[1],j[2],j[3],j[4],j[5],j[6],e-z);return{x:d.x,y:d.y,alpha:d.alpha}}}z+=k;d=+j[5];h=+j[6]}l+=j}u.end=l;d=a?z:b?u:g.findDotsAtSegment(d,h,j[1],j[2],j[3],j[4],j[5],j[6],1);d.alpha&&(d={x:d.x,y:d.y,alpha:d.alpha});return d}};var ub=va(1),Na=va(),Xa=va(0,1);ca.getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return ub(this.attrs.path)}};
ca.getPointAtLength=function(a){if(this.type=="path")return Na(this.attrs.path,a)};ca.getSubpath=function(a,b){if(this.type=="path"){if(J(this.getTotalLength()-b)<"1e-6")return Xa(this.attrs.path,a).end;var c=Xa(this.attrs.path,b,1);return a?Xa(c,a).end:c}};g.easing_formulas={linear:function(a){return a},"<":function(a){return H(a,3)},">":function(a){return H(a-1,3)+1},"<>":function(a){a*=2;if(a<1)return H(a,3)/2;a-=2;return(H(a,3)+2)/2},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=
1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){if(a==0||a==1)return a;return H(2,-10*a)*B.sin((a-0.075)*2*O/0.3)+1},bounce:function(a){if(a<1/2.75)a*=7.5625*a;else if(a<2/2.75){a-=1.5/2.75;a=7.5625*a*a+0.75}else if(a<2.5/2.75){a-=2.25/2.75;a=7.5625*a*a+0.9375}else{a-=2.625/2.75;a=7.5625*a*a+0.984375}return a}};var ua=[],vb=function(){for(var a=+new Date,b=0;b<ua[n];b++){var c=ua[b];if(!(c.stop||c.el.removed)){var e=a-c.start,f=c.ms,d=c.easing,h=c.from,j=c.diff,k=c.to,l=c.t,u=c.el;c={};var z;
if(e<f){e=d(e/f);for(var A in h)if(h[v](A)){switch(Pa[A]){case "along":z=e*f*j[A];k.back&&(z=k.len-z);d=Na(k[A],z);u.translate(j.sx-j.x||0,j.sy-j.y||0);j.x=d.x;j.y=d.y;u.translate(d.x-j.sx,d.y-j.sy);k.rot&&u.rotate(j.r+d.alpha,d.x,d.y);break;case V:z=+h[A]+e*f*j[A];break;case "colour":z="rgb("+[Ya(T(h[A].r+e*f*j[A].r)),Ya(T(h[A].g+e*f*j[A].g)),Ya(T(h[A].b+e*f*j[A].b))][q](",")+")";break;case "path":z=[];d=0;for(var I=h[A][n];d<I;d++){z[d]=[h[A][d][0]];for(var W=1,L=h[A][d][n];W<L;W++)z[d][W]=+h[A][d][W]+
e*f*j[A][d][W];z[d]=z[d][q](fa)}z=z[q](fa);break;case "csv":switch(A){case "translation":z=e*f*j[A][0]-l.x;d=e*f*j[A][1]-l.y;l.x+=z;l.y+=d;z=z+fa+d;break;case "rotation":z=+h[A][0]+e*f*j[A][0];h[A][1]&&(z+=","+h[A][1]+","+h[A][2]);break;case "scale":z=[+h[A][0]+e*f*j[A][0],+h[A][1]+e*f*j[A][1],2 in k[A]?k[A][2]:"",3 in k[A]?k[A][3]:""][q](fa);break;case "clip-rect":z=[];for(d=4;d--;)z[d]=+h[A][d]+e*f*j[A][d]}break;default:I=[].concat(h[A]);z=[];for(d=u.paper.customAttributes[A].length;d--;)z[d]=+I[d]+
e*f*j[A][d]}c[A]=z}u.attr(c);u._run&&u._run.call(u)}else{if(k.along){d=Na(k.along,k.len*!k.back);u.translate(j.sx-(j.x||0)+d.x-j.sx,j.sy-(j.y||0)+d.y-j.sy);k.rot&&u.rotate(j.r+d.alpha,d.x,d.y)}(l.x||l.y)&&u.translate(-l.x,-l.y);k.scale&&(k.scale+="");u.attr(k);ua.splice(b--,1)}}}g.svg&&u&&u.paper&&u.paper.safari();ua[n]&&setTimeout(vb)},Pb=function(a,b,c,e,f){var d=c-e;b.timeouts.push(setTimeout(function(){g.is(f,"function")&&f.call(b);b.animate(a,d,a.easing)},e))},Ya=function(a){return G(N(a,255),
0)},La=function(a,b){if(a==null)return{x:this._.tx,y:this._.ty,toString:o};this._.tx+=+a;this._.ty+=+b;switch(this.type){case "circle":case "ellipse":this.attr({cx:+a+this.attrs.cx,cy:+b+this.attrs.cy});break;case "rect":case "image":case "text":this.attr({x:+a+this.attrs.x,y:+b+this.attrs.y});break;case "path":var c=Ra(this.attrs.path);c[0][1]+=+a;c[0][2]+=+b;this.attr({path:c})}return this};ca.animateWith=function(a,b,c,e,f){for(var d=0,h=ua.length;d<h;d++)ua[d].el.id==a.id&&(b.start=ua[d].start);
return this.animate(b,c,e,f)};ca.animateAlong=C();ca.animateAlongBack=C(1);ca.onAnimation=function(a){this._run=a||0;return this};ca.animate=function(a,b,c,e){var f=this;f.timeouts=f.timeouts||[];if(g.is(c,"function")||!c)e=c||null;if(f.removed){e&&e.call(f);return f}var d={},h={},j=false,k={},l;for(l in a)if(a[v](l))if(Pa[v](l)||f.paper.customAttributes[v](l)){j=true;d[l]=f.attr(l);d[l]==null&&(d[l]=Fa[l]);h[l]=a[l];switch(Pa[l]){case "along":var u=ub(a[l]),z=Na(a[l],u*!!a.back),A=f.getBBox();k[l]=
u/b;k.tx=A.x;k.ty=A.y;k.sx=z.x;k.sy=z.y;h.rot=a.rot;h.back=a.back;h.len=u;a.rot&&(k.r=M(f.rotate())||0);break;case V:k[l]=(h[l]-d[l])/b;break;case "colour":d[l]=g.getRGB(d[l]);u=g.getRGB(h[l]);k[l]={r:(u.r-d[l].r)/b,g:(u.g-d[l].g)/b,b:(u.b-d[l].b)/b};break;case "path":u=Ia(d[l],h[l]);d[l]=u[0];A=u[1];k[l]=[];u=0;for(z=d[l][n];u<z;u++){k[l][u]=[0];for(var I=1,W=d[l][u][n];I<W;I++)k[l][u][I]=(A[u][I]-d[l][u][I])/b}break;case "csv":z=Z(a[l]).split(r);A=Z(d[l]).split(r);switch(l){case "translation":d[l]=
[0,0];k[l]=[z[0]/b,z[1]/b];break;case "rotation":d[l]=A[1]==z[1]&&A[2]==z[2]?A:[0,z[1],z[2]];k[l]=[(z[0]-d[l][0])/b,0,0];break;case "scale":a[l]=z;d[l]=Z(d[l]).split(r);k[l]=[(z[0]-d[l][0])/b,(z[1]-d[l][1])/b,0,0];break;case "clip-rect":d[l]=Z(d[l]).split(r);k[l]=[];for(u=4;u--;)k[l][u]=(z[u]-d[l][u])/b}h[l]=z;break;default:z=[].concat(a[l]);A=[].concat(d[l]);k[l]=[];for(u=f.paper.customAttributes[l][n];u--;)k[l][u]=((z[u]||0)-(A[u]||0))/b}}if(j){l=g.easing_formulas[c];if(!l)if((l=Z(c).match(oa))&&
l[n]==5){var L=l;l=function(ga){return m(ga,+L[1],+L[2],+L[3],+L[4],b)}}else l=function(ga){return ga};ua.push({start:a.start||+new Date,ms:b,easing:l,from:d,diff:k,to:h,el:f,t:{x:0,y:0}});g.is(e,"function")&&(f._ac=setTimeout(function(){e.call(f)},b));ua[n]==1&&setTimeout(vb)}else{c=[];var F,P;for(P in a)if(a[v](P)&&wb.test(P)){l={value:a[P]};P=="from"&&(P=0);P=="to"&&(P=100);l.key=ja(P,10);c.push(l)}c.sort(Bb);c[0].key&&c.unshift({key:0,value:f.attrs});u=0;for(z=c[n];u<z;u++)Pb(c[u].value,f,b/100*
c[u].key,b/100*(c[u-1]&&c[u-1].key||0),c[u-1]&&c[u-1].value.callback);(F=c[c[n]-1].value.callback)&&f.timeouts.push(setTimeout(function(){F.call(f)},b))}return this};ca.stop=function(){for(var a=0;a<ua.length;a++)ua[a].el.id==this.id&&ua.splice(a--,1);a=0;for(ii=this.timeouts&&this.timeouts.length;a<ii;a++)clearTimeout(this.timeouts[a]);this.timeouts=[];clearTimeout(this._ac);delete this._ac;return this};ca.translate=function(a,b){return this.attr({translation:a+" "+b})};ca[ba]=function(){return"Rapha\u00ebl\u2019s object"};
g.ae=ua;var pa=function(a){this.items=[];this[n]=0;this.type="set";if(a)for(var b=0,c=a[n];b<c;b++)if(a[b]&&(a[b].constructor==ea||a[b].constructor==pa)){this[this.items[n]]=this.items[this.items[n]]=a[b];this[n]++}};pa[D][Y]=function(){for(var a,b,c=0,e=arguments[n];c<e;c++)if((a=arguments[c])&&(a.constructor==ea||a.constructor==pa)){b=this.items[n];this[b]=this.items[b]=a;this[n]++}return this};pa[D].pop=function(){delete this[this[n]--];return this.items.pop()};for(var Za in ca)ca[v](Za)&&(pa[D][Za]=
function(a){return function(){for(var b=0,c=this.items[n];b<c;b++)this.items[b][a][aa](this.items[b],arguments);return this}}(Za));pa[D].attr=function(a,b){if(a&&g.is(a,R)&&g.is(a[0],"object"))for(var c=0,e=a[n];c<e;c++)this.items[c].attr(a[c]);else{c=0;for(e=this.items[n];c<e;c++)this.items[c].attr(a,b)}return this};pa[D].animate=function(a,b,c,e){(g.is(c,"function")||!c)&&(e=c||null);var f=this.items[n],d=f,h,j=this,k;e&&(k=function(){!--f&&e.call(j)});c=g.is(c,"string")?c:k;for(h=this.items[--d].animate(a,
b,c,k);d--;)this.items[d]&&!this.items[d].removed&&this.items[d].animateWith(h,a,b,c,k);return this};pa[D].insertAfter=function(a){for(var b=this.items[n];b--;)this.items[b].insertAfter(a);return this};pa[D].getBBox=function(){for(var a=[],b=[],c=[],e=[],f=this.items[n];f--;){var d=this.items[f].getBBox();a[Y](d.x);b[Y](d.y);c[Y](d.x+d.width);e[Y](d.y+d.height)}a=N[aa](0,a);b=N[aa](0,b);return{x:a,y:b,width:G[aa](0,c)-a,height:G[aa](0,e)-b}};pa[D].clone=function(a){a=new pa;for(var b=0,c=this.items[n];b<
c;b++)a[Y](this.items[b].clone());return a};g.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"],e;for(e in a.face)a.face[v](e)&&(b.face[e]=a.face[e]);this.fonts[c]?this.fonts[c][Y](b):this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=ja(a.face["units-per-em"],10);for(var f in a.glyphs)if(a.glyphs[v](f)){c=a.glyphs[f];b.glyphs[f]={w:c.w,k:{},d:c.d&&"M"+c.d.replace(/[mlcxtrv]/g,function(h){return{l:"L",c:"C",x:"z",t:"m",
r:"l",v:"c"}[h]||"M"})+"z"};if(c.k)for(var d in c.k)c[v](d)&&(b.glyphs[f].k[d]=c.k[d])}}return a};X.getFont=function(a,b,c,e){e=e||"normal";c=c||"normal";b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400;if(g.fonts){var f=g.fonts[a];if(!f){a=RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i");for(var d in g.fonts)if(g.fonts[v](d))if(a.test(d)){f=g.fonts[d];break}}var h;if(f){d=0;for(a=f[n];d<a;d++){h=f[d];if(h.face["font-weight"]==b&&(h.face["font-style"]==c||!h.face["font-style"])&&
h.face["font-stretch"]==e)break}}return h}};X.print=function(a,b,c,e,f,d,h){d=d||"middle";h=G(N(h||0,1),-1);var j=this.set(),k=Z(c).split(""),l=0;g.is(e,c)&&(e=this.getFont(e));if(e){c=(f||16)/e.face["units-per-em"];var u=e.face.bbox.split(r);f=+u[0];d=+u[1]+(d=="baseline"?u[3]-u[1]+ +e.face.descent:(u[3]-u[1])/2);u=0;for(var z=k[n];u<z;u++){var A=u&&e.glyphs[k[u-1]]||{},I=e.glyphs[k[u]];l+=u?(A.w||e.w)+(A.k&&A.k[k[u]]||0)+e.w*h:0;I&&I.d&&j[Y](this.path(I.d).attr({fill:"#000",stroke:"none",translation:[l,
0]}))}j.scale(c,c,f,d).translate(a-f,b-d)}return j};g.format=function(a,b){var c=g.is(b,R)?[0].concat(b):arguments;a&&g.is(a,"string")&&c[n]-1&&(a=a.replace(y,function(e,f){return c[++f]==null?"":c[f]}));return a||""};g.ninja=function(){Q.was?K.Raphael=Q.is:delete Raphael;return g};g.el=ca;g.st=pa[D];Q.was?K.Raphael=g:Raphael=g})();(function(){function g(q){return(q+"").replace(ra,"")}function x(q,n,w){for(var B=q.length;B<n;B++)q=w?"0"+q:q+"0";return q}function p(q){return qa.call(q)==="[object Array]"}function o(q,n){if(q.indexOf)return q.indexOf(n);for(var w=0,B=q.length;w<B;w++)if(q[w]===n)return w;return-1}function C(q,n,w){var B=n["-"];n=n["+"];var G;switch(w){case "n -":B=" "+B;n=" "+n;case "n-":if(q.substr(q.length-B.length)===B)G=["-",q.substr(0,q.length-B.length)];else if(q.substr(q.length-n.length)===n)G=["+",q.substr(0,
q.length-n.length)];break;case "- n":B+=" ";n+=" ";case "-n":if(q.indexOf(B)===0)G=["-",q.substr(B.length)];else if(q.indexOf(n)===0)G=["+",q.substr(n.length)];break;case "(n)":if(q.indexOf("(")===0&&q.substr(q.length-1)===")")G=["-",q.substr(1,q.length-2)]}return G||["",q]}function m(q,n){if(!n)return 0;for(var w,B=q.getTime(),G=0,N=n.length;G<N;G++){w=n[G].start;if(w===null||B>=w)return G}return 0}function r(q){return q.split("\u00a0").join(" ").toUpperCase()}function s(q){for(var n=[],w=0,B=q.length;w<
B;w++)n[w]=r(q[w]);return n}function y(q,n,w,B){q=q.getFullYear();if(!B&&n.eras)q-=n.eras[w].offset;return q}function D(q,n){for(var w=0,B=false,G=0,N=q.length;G<N;G++){var J=q.charAt(G);switch(J){case "'":if(B)n.push("'");else w++;B=false;break;case "\\":B&&n.push("\\");B=!B;break;default:n.push(J);B=false}}return w}function v(q,n){n=n||"F";var w;w=q.patterns;var B=n.length;if(B===1){w=w[n];if(!w)throw"Invalid date format string '"+n+"'.";n=w}else if(B===2&&n.charAt(0)==="%")n=n.charAt(1);return n}
function E(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g}function K(q,n,w){q=g(q);w=w.calendar;a:{var B=w._parseRegExp;if(B){var G=B[n];if(G){n=G;break a}}else w._parseRegExp=B={};G=v(w,n).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");for(var N=["^"],J=[],H=0,O=0,V=E(),R;(R=V.exec(G))!==null;){var ba=G.slice(H,R.index);H=V.lastIndex;O+=D(ba,N);if(O%2)N.push(R[0]);else{ba=R[0];var wa=ba.length;switch(ba){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":ba=
"(\\D+)";break;case "tt":case "t":ba="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":ba="(\\d{"+wa+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":ba="(\\d\\d?)";break;case "zzz":ba="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":ba="([+-]?\\d\\d?)";break;case "/":ba="(\\"+w["/"]+")";break;default:throw"Invalid date format pattern '"+ba+"'.";}ba&&N.push(ba);J.push(R[0])}}D(G.slice(H),N);N.push("$");
G={regExp:N.join("").replace(/\s+/g,"\\s+"),groups:J};n=B[n]=G}O=RegExp(n.regExp).exec(q);if(O===null)return null;V=n.groups;var Y=q=null,ha=null,na=n=null;J=N=G=B=0;R=null;H=false;ba=0;for(wa=V.length;ba<wa;ba++){var da=O[ba+1];if(da){var oa=V[ba],T=oa.length,M=parseInt(da,10);switch(oa){case "dd":case "d":n=M;if(n<1||n>31)return null;break;case "MMM":case "MMMM":ha=w;T=T===3;oa=ha.months;var ja=ha.monthsGenitive||ha.months,xa=ha._upperMonths;M=ha._upperMonthsGen;if(!xa){ha._upperMonths=xa=[s(oa.names),
s(oa.namesAbbr)];ha._upperMonthsGen=M=[s(ja.names),s(ja.namesAbbr)]}da=r(da);ha=o(T?xa[1]:xa[0],da);if(ha<0)ha=o(T?M[1]:M[0],da);if(ha<0||ha>11)return null;break;case "M":case "MM":ha=M-1;if(ha<0||ha>11)return null;break;case "y":case "yy":case "yyyy":if(T<4){Y=w;da=M;M=new Date;oa=m(M);if(da<100){T=Y.twoDigitYearMax;T=typeof T==="string"?(new Date).getFullYear()%100+parseInt(T,10):T;Y=y(M,Y,oa);da+=Y-Y%100;if(da>T)da-=100}Y=da}else Y=M;if(Y<0||Y>9999)return null;break;case "h":case "hh":B=M;if(B===
12)B=0;if(B<0||B>11)return null;break;case "H":case "HH":B=M;if(B<0||B>23)return null;break;case "m":case "mm":G=M;if(G<0||G>59)return null;break;case "s":case "ss":N=M;if(N<0||N>59)return null;break;case "tt":case "t":H=w.PM&&(da===w.PM[0]||da===w.PM[1]||da===w.PM[2]);if(!H&&(!w.AM||da!==w.AM[0]&&da!==w.AM[1]&&da!==w.AM[2]))return null;break;case "f":case "ff":case "fff":J=M*Math.pow(10,3-T);if(J<0||J>999)return null;break;case "ddd":case "dddd":na=da;da=T===3;M=void 0;M=w.days;T=w._upperDays;if(!T)w._upperDays=
T=[s(M.names),s(M.namesAbbr),s(M.namesShort)];na=r(na);if(da){M=o(T[1],na);if(M===-1)M=o(T[2],na)}else M=o(T[0],na);na=M;if(na<0||na>6)return null;break;case "zzz":T=da.split(/:/);if(T.length!==2)return null;R=parseInt(T[0],10);if(R<-12||R>13)return null;T=parseInt(T[1],10);if(T<0||T>59)return null;R=R*60+(da.indexOf("-")===0?-T:T);break;case "z":case "zz":R=M;if(R<-12||R>13)return null;R*=60;break;case "g":case "gg":if(!da||!w.eras)return null;da=g(da.toLowerCase());T=0;for(M=w.eras.length;T<M;T++)if(da===
w.eras[T].name.toLowerCase()){q=T;break}if(q===null)return null}}}O=new Date;V=(ba=w.convert)?ba.fromGregorian(O)[0]:O.getFullYear();if(Y===null)Y=V;else if(w.eras)Y+=w.eras[q||0].offset;if(ha===null)ha=0;if(n===null)n=1;if(ba){O=ba.toGregorian(Y,ha,n);if(O===null)return null}else{O.setFullYear(Y,ha,n);if(O.getDate()!==n)return null;if(na!==null&&O.getDay()!==na)return null}if(H&&B<12)B+=12;O.setHours(B,G,N,J);if(R!==null){w=O.getMinutes()-(R+O.getTimezoneOffset());O.setHours(O.getHours()+parseInt(w/
60,10),w%60)}return O}function Q(q,n,w){function B(T,M){var ja;ja=T+"";if(M>1&&ja.length<M){ja=ba[M-2]+ja;return ja.substr(ja.length-M,M)}return ja}function G(){if(wa||Y)return wa;wa=ha.test(n);Y=true;return wa}function N(T,M){if(oa)return oa[M];switch(M){case 0:return T.getFullYear();case 1:return T.getMonth();case 2:return T.getDate()}}var J=w.calendar,H=J.convert;if(!n||!n.length||n==="i"){if(w&&w.name.length)if(H)w=Q(q,J.patterns.F,w);else{w=new Date(q.getTime());var O=m(q,J.eras);w.setFullYear(y(q,
J,O));w=w.toLocaleString()}else w=q.toString();return w}O=J.eras;var V=n==="s";n=v(J,n);w=[];var R,ba=["0","00","000"],wa,Y,ha=/([^d]|^)(d|dd)([^d]|$)/g,na=0,da=E(),oa;if(!V&&H)oa=H.fromGregorian(q);for(;;){R=da.lastIndex;H=da.exec(n);R=n.slice(R,H?H.index:n.length);na+=D(R,w);if(!H)break;if(na%2)w.push(H[0]);else{R=H[0];H=R.length;switch(R){case "ddd":case "dddd":names=H===3?J.days.namesAbbr:J.days.names;w.push(names[q.getDay()]);break;case "d":case "dd":wa=true;w.push(B(N(q,2),H));break;case "MMM":case "MMMM":R=
N(q,1);w.push(J.monthsGenitive&&G()?J.monthsGenitive[H===3?"namesAbbr":"names"][R]:J.months[H===3?"namesAbbr":"names"][R]);break;case "M":case "MM":w.push(B(N(q,1)+1,H));break;case "y":case "yy":case "yyyy":R=oa?oa[0]:y(q,J,m(q,O),V);if(H<4)R%=100;w.push(B(R,H));break;case "h":case "hh":R=q.getHours()%12;if(R===0)R=12;w.push(B(R,H));break;case "H":case "HH":w.push(B(q.getHours(),H));break;case "m":case "mm":w.push(B(q.getMinutes(),H));break;case "s":case "ss":w.push(B(q.getSeconds(),H));break;case "t":case "tt":R=
q.getHours()<12?J.AM?J.AM[0]:" ":J.PM?J.PM[0]:" ";w.push(H===1?R.charAt(0):R);break;case "f":case "ff":case "fff":w.push(B(q.getMilliseconds(),3).substr(0,H));break;case "z":case "zz":R=q.getTimezoneOffset()/60;w.push((R<=0?"+":"-")+B(Math.floor(Math.abs(R)),H));break;case "zzz":R=q.getTimezoneOffset()/60;w.push((R<=0?"+":"-")+B(Math.floor(Math.abs(R)),2)+":"+B(Math.abs(q.getTimezoneOffset()%60),2));break;case "g":case "gg":J.eras&&w.push(J.eras[m(q,O)].name);break;case "/":w.push(J["/"]);break;default:throw"Invalid date format pattern '"+
R+"'.";}}}return w.join("")}var S={},X={en:{}};X["default"]=X.en;S.extend=function(q){for(var n=arguments[1]||{},w=2,B=arguments.length;w<B;w++){var G=arguments[w];if(G)for(var N in G){var J=G[N];if(typeof J!=="undefined")if(q&&(qa.call(J)==="[object Object]"||p(J))){var H=n[N];H=H&&(qa.call(H)==="[object Object]"||p(H))?H:p(J)?[]:{};n[N]=this.extend(true,H,J)}else n[N]=J}}return n};S.findClosestCulture=function(q){var n;if(!q)return this.culture||this.cultures["default"];if(qa.call(q)==="[object String]")q=
q.split(",");if(p(q)){for(var w,B=this.cultures,G=q,N=G.length,J=[],H=0;H<N;H++){q=g(G[H]);q=q.split(";");w=g(q[0]);if(q.length===1)q=1;else{q=g(q[1]);if(q.indexOf("q=")===0){q=q.substr(2);q=parseFloat(q,10);q=isNaN(q)?0:q}else q=1}J.push({lang:w,pri:q})}J.sort(function(O,V){return O.pri<V.pri?1:-1});for(H=0;H<N;H++){w=J[H].lang;if(n=B[w])return n}for(H=0;H<N;H++){w=J[H].lang;do{G=w.lastIndexOf("-");if(G===-1)break;w=w.substr(0,G);if(n=B[w])return n}while(1)}}else if(typeof q==="object")return q;
return n||null};S.preferCulture=function(q){this.culture=this.findClosestCulture(q)||this.cultures["default"]};S.localize=function(q,n,w){if(typeof n==="string"){n=n||"default";n=this.cultures[n]||{name:n}}var B=X[n.name];if(arguments.length===3){B||(B=X[n.name]={});B[q]=w}else{if(B)w=B[q];if(typeof w==="undefined"){if(B=X[n.language])w=B[q];if(typeof w==="undefined")w=X["default"][q]}}return typeof w==="undefined"?null:w};S.format=function(q,n,w){w=this.findClosestCulture(w);if(typeof q==="number"){var B=
q;if(!n||n==="i")q=w.name.length?B.toLocaleString():B.toString();else{n=n||"D";w=w.numberFormat;q=Math.abs(B);var G=-1;if(n.length>1)G=parseInt(n.slice(1),10);var N=n.charAt(0).toUpperCase(),J;switch(N){case "D":n="n";if(G!==-1)q=x(""+q,G,true);if(B<0)q=-q;break;case "N":J=w;case "C":J=J||w.currency;case "P":J=J||w.percent;n=B<0?J.pattern[0]:J.pattern[1]||"n";if(G===-1)G=J.decimals;b:{var H=q*(N==="P"?100:1);N=J;J=N.groupSizes;q=J[0];B=1;var O=Math.pow(10,G),V=Math.round(H*O)/O;isFinite(V)||(V=H);
O="";O=(V+"").split(/e/i);V=O.length>1?parseInt(O[1],10):0;H=O[0];O=H.split(".");H=O[0];O=O.length>1?O[1]:"";if(V>0){O=x(O,V,false);H+=O.slice(0,V);O=O.substr(V)}else if(V<0){V=-V;H=x(H,V+1);O=H.slice(-V,H.length)+O;H=H.slice(0,-V)}O=G>0?N["."]+(O.length>G?O.slice(0,G):x(O,G)):"";G=H.length-1;N=N[","];for(V="";G>=0;){if(q===0||q>G){q=H.slice(0,G+1)+(V.length?N+V+O:O);break b}V=H.slice(G-q+1,G+1)+(V.length?N+V:"");G-=q;if(B<J.length){q=J[B];B++}}q=H.slice(0,G+1)+N+V+O}break;default:throw"Bad number format specifier: "+
N;}J=/n|\$|-|%/g;for(B="";;){G=J.lastIndex;N=J.exec(n);B+=n.slice(G,N?N.index:n.length);if(!N)break;switch(N[0]){case "n":B+=q;break;case "$":B+=w.currency.symbol;break;case "-":if(/[1-9]/.test(q))B+=w["-"];break;case "%":B+=w.percent.symbol}}q=B}}else if(q instanceof Date)q=Q(q,n,w);return q};S.parseInt=function(q,n,w){return Math.floor(this.parseFloat(q,n,w))};S.parseFloat=function(q,n,w){w=this.findClosestCulture(w);var B=NaN;w=w.numberFormat;q=g(q);if(fa.test(q))B=parseFloat(q,n);else if(!n&&
Z.test(q))B=parseInt(q,16);else{var G=C(q,w,w.pattern[0]);n=G[0];G=G[1];if(n===""&&w.pattern[0]!=="-n"){G=C(q,w,"-n");n=G[0];G=G[1]}n=n||"+";var N;q=G.indexOf("e");if(q<0)q=G.indexOf("E");if(q<0){N=G;q=null}else{N=G.substr(0,q);q=G.substr(q+1)}var J=w["."],H=N.indexOf(J);if(H<0){G=N;N=null}else{G=N.substr(0,H);N=N.substr(H+J.length)}J=w[","];G=G.split(J).join("");H=J.replace(/\u00A0/g," ");if(J!==H)G=G.split(H).join("");n+=G;if(N!==null)n+="."+N;if(q!==null){w=C(q,w,"-n");n+="e"+(w[0]||"+")+w[1]}if(va.test(n))B=
parseFloat(n)}return B};S.parseDate=function(q,n,w){w=this.findClosestCulture(w);var B,G;if(n){if(typeof n==="string")n=[n];if(n.length){G=0;for(var N=n.length;G<N;G++){var J=n[G];if(J)if(B=K(q,J,w))break}}}else{n=w.calendar.patterns;for(G in n)if(B=K(q,n[G],w))break}return B||null};var aa=S.cultures=S.cultures||{};aa=aa["default"]=aa.en=S.extend(true,{name:"en",englishName:"English",nativeName:"English",isRTL:false,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],
"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April",
"May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},aa.en);aa.calendar=aa.calendar||
aa.calendars.standard;var ra=/^\s+|\s+$/g,fa=/^[+-]?infinity$/i,Z=/^0x[a-f0-9]+$/i,va=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,qa=Object.prototype.toString;jQuery.findClosestCulture=S.findClosestCulture;jQuery.culture=S.culture;jQuery.cultures=S.cultures;jQuery.preferCulture=S.preferCulture;jQuery.localize=S.localize;jQuery.format=S.format;jQuery.parseInt=S.parseInt;jQuery.parseFloat=S.parseFloat;jQuery.parseDate=S.parseDate})();(function(g){var x=g({});g.subscribe=function(){x.bind.apply(x,arguments)};g.unsubscribe=function(){x.unbind.apply(x,arguments)};g.publish=function(){x.trigger.apply(x,arguments)}})(jQuery);var timeglider={};
timeglider.TGDate={monthNamesFull:["","January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesAbbr:["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsDayNums:[0,31,28,31,30,31,30,31,31,30,31,30,31,29],monthNamesLet:["","J","F","M","A","M","J","J","A","S","O","N","D"],dayNamesFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri",
"Sat"],dayNamesLet:["S","M","T","W","T","F","S"],units:["da","mo","ye","de","ce","thou"],isLeapYear:function(g){return g%100==0&&g%400!=0?false:g%4==0?true:false},boil:function(g){return parseInt(g,10)},getTimeUnitSerial:function(g,x){switch(x){case "ye":return g.ye;case "mo":return this.getMonthNum(g);case "da":return this.getRataDie(g);case "de":return Math.ceil(g.ye/10);case "ce":return Math.ceil(g.ye/100);case "thou":return Math.ceil(g.ye/1E3);case "tenthou":return Math.ceil(g.ye/1E4);case "hundredthou":return Math.ceil(g.ye/
1E5);case "mill":return Math.ceil(g.ye/1E6);case "tenmill":return Math.ceil(g.ye/1E7);case "hundredmill":return Math.ceil(g.ye/1E8);case "bill":return Math.ceil(g.ye/1E9)}},validateEventDates:function(g,x){var p,o;if(RegExp(/[0-9-: ]/).test(g))p=this.makeDateObject(g);else{trace("start:"+g);p="false"}o=this.makeDateObject(x);return{s:p,e:o}},makeDateObject:function(g){g=jQuery.trim(g);g=g.replace(",","");var x;g.substr(0,1)=="-"?x=1:x=0;x==1&&(g=g.substr(1));g=g.replace(/[^0-9]/g,"-");g=g.split("-");
x={ye:this.boil(g[0]),mo:this.boil(g[1]),da:this.boil(g[2]),ho:this.boil(g[3]),mi:this.boil(g[4]),se:this.boil(g[5]),bce:x};x.rd=this.getRataDie(x);x.sec=this.getSec(x);return x},getMonthDays:function(g,x){return this.isLeapYear(x)==true&&g==2?29:this.monthsDayNums[g]},isValidDate:function(g,x,p){var o=this.getMonthDays(x,g);if(p>o||p<=0)return false;if(x>12||x<0)return false;if(g==0)return false;if(g.match(Math.abs(RegExp(/([0-9]+)/)))==false)return false;return true},formatFocusDate:function(g){return g.ye+
"-"+g.mo+"-"+g.da+" "+g.ho+":"+g.mi+":00"},getSec:function(g){var x=Math.abs(g.rd)*86400,p=g.ho*3600,o=(g.mi-1)*60,C=1;if(g.rd<0)C=-1;return C*(x+p+o)},twentyFourToTwelve:function(g){var x={};x.ye=g.ye;x.mo=g.mo;x.da=g.da;x.ho=g.ho;x.mi=g.mi;x.ampm="am";if(g.ho)if(g.ho>=12){x.ampm="pm";x.ho=g.ho>12?g.ho-12:12}else if(g.ho==0){x.ho=12;x.ampm="am"}else x.ho=g.ho;else{x.ho=12;x.mi=0;x.ampm="am"}return x},getMonthNum:function(g){return g.ye>0?(g.ye-1)*12+g.mo:this.getBCMonthNum(g)},getMonthAdj:function(g,
x){var p=this.getDateFromMonthNum(g);switch(p.mo){case 1:case 3:case 5:case 7:case 8:case 10:case 12:p=Math.floor(x+x/28*3);return{width:p,days:31};case 2:if(this.isLeapYear(p.ye)==true){p=Math.floor(x+x/28);return{width:p,days:29}}else return{width:x,days:28};default:p=Math.floor(x+x/28*2);return{width:p,days:30}}},getBCMonthNum:function(g){return-1*((Math.abs(g.ye)-1)*12+(12-(g.mo-1)))},getDateFromMonthNum:function(g){var x=0;if(g>0){x=g%12;if(x==0)x=12;g=Math.ceil(g/12)}else{x=Math.abs(g)%12;x=
12-x+1;if(x==13)x=1;g=-1*Math.ceil(Math.abs(g)/12)}return{ye:g,mo:x}},getMonthWidth:function(g,x,p){x=t/28;var o;switch(g){case 1:case 3:case 5:case 7:case 8:case 10:case 12:o=3;break;case 4:case 6:case 9:case 11:o=2;break;case 2:o=this.isLeapYear(yr)==true?1:0}return{width:Math.floor(p+x*o),numDays:28+o}},getRataDie:function(g){var x=g.ye,p=g.mo;g=g.da;var o=0;if(x>=0){if(x==0)x=1;o=Math.floor(x/400)*146097;var C=parseInt(this.getDaysInYearSpan(x-x%400,x));x=parseInt(this.getDaysSoFar(p,x));o=o+
C+x+g-366}else if(x<0)o=this.getBCRataDie({ye:x,mo:p,da:g});return o},getBCRataDie:function(g){var x=g.ye,p=g.mo;g=g.da;if(p==0)p=1;if(g==0)g=1;return-1*((Math.abs(x)-1)*366+[0,335,306,275,245,214,184,153,122,92,61,31,0][p]+(this.monthsDayNums[p]-g+1))},getDateFromRD:function(g){for(var x=Math.floor(g),p=Math.floor(x/146097)*400,o=x-Math.floor(x/146097)*146097,C=1,m=p+1,r=m+400;m<=r;m++)if(o>365){o-=365;if(this.isLeapYear(m))o-=1;C++}else m=r;p+=C;if(o==0)o=1;o=this.getMonthFromRemDays(o,p);x=(g-
x)*1440;g=Math.floor(x%60);x=Math.floor(x/60);if(this.isLeapYear(p)&&o.mo==2)o.da+=1;return{ye:p,mo:o.mo,da:o.da,ho:x,mi:g}},getDateFromSec:function(g){return this.getDateFromRD(g/86400)},getMonthFromRemDays:function(g,x){var p=0;var o=p=0;p=this.isLeapYear(x)?1:0;if(g<=31){o=1;p=g}else if(g>31&&g<=59+p){o=2;p=g-(31+p)}else if(g>59+p&&g<=90+p){o=3;p=g-(59+p)}else if(g>90+p&&g<=120+p){o=4;p=g-(90+p)}else if(g>120+p&&g<=151+p){o=5;p=g-(120+p)}else if(g>151+p&&g<=181+p){o=6;p=g-(151+p)}else if(g>181+
p&&g<=212+p){o=7;p=g-(181+p)}else if(g>212+p&&g<=243+p){o=8;p=g-(212+p)}else if(g>243+p&&g<=273+p){o=9;p=g-(243+p)}else if(g>273+p&&g<=304+p){o=10;p=g-(273+p)}else if(g>304+p&&g<=334+p){o=11;p=g-(304+p)}else{o=12;p=g-(334+p)}return{mo:o,da:p}},getDaysInYearSpan:function(g,x){for(var p=0,o=g;o<x;o++)p+=this.isLeapYear(o)?366:365;return p},getDaysSoFar:function(g,x){var p;switch(g){case 1:p=0;break;case 2:p=31;break;case 3:p=59;break;case 4:p=90;break;case 5:p=120;break;case 6:p=151;break;case 7:p=
181;break;case 8:p=212;break;case 9:p=243;break;case 10:p=273;break;case 11:p=304;break;case 12:p=334}if(g>2&&this.isLeapYear(x))p+=1;return p},getToday:function(){var g=jQuery.format(new Date,"S");g=g.replace("T"," ");debug.log("df:"+g);return g}};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.ltrim=function(){return this.replace(/^\s+/,"")};String.prototype.rtrim=function(){return this.replace(/\s+$/,"")};function output(g,x){$("#"+x).text(g)};(function(g){g.levelHeight=8;var x=g.levelHeight;g.TGOrg=function(){this.blocks=[];this.ids=[];this.vis=[];this.tree=[];var p=this;this.addBlock=function(m,r){m.right=m.left+m.width;m.bottom=m.top+m.height;m.tickScope=r;p.blocks.push(m)};this.getBorg=function(){return this};this.getBlocks=function(){return this.blocks};this.getHTML=function(m){if(m=="sweep"){p.tree=[];for(var r=0;r<300;r++)p.tree[r]=[];this.vis=[]}this.blocks.sort(o);for(var s,y="",D="",v={},E=this.blocks.length,K=0,Q=0;Q<E;Q++){v=
this.blocks[Q];if(v.tickScope==m)if(jQuery.inArray(v.id,this.vis)==-1){this.vis.push(v.id);K=0;if(v.image){if(v.image_class=="layout")K=v.image_size.height+4;y="<div class='timeglider-event-image-"+v.image_class+"'><img src='"+v.image+"'></div>"}else y="";C(v,0);v.fontsize<10?v.opacity=v.fontsize/10:v.opacity=1;if(v.span==true){r="timeglider-event-spanning";s="<div class='timeglider-event-spanner' style='height:"+v.fontsize+"px;width:"+v.spanwidth+"px'></div>"}else s=r="";D+="<div class='timeglider-timeline-event "+
r+"' id='ev_"+v.id+"' style='width:"+v.width+"px;height:"+v.height+"px;left:"+v.left+"px;opacity:"+v.opacity+";top:"+v.top+"px;font-size:"+v.fontsize+"px;'><img class='timeglider-event-icon' src='"+v.icon+"' style='height:"+v.fontsize+"px;left:-"+(v.fontsize+2)+"px; top:"+K+"px'>"+y+s+"<div class='timeglider-event-title' style='top:"+K+"px'>"+v.title+"</div></div>"}}return D};var o=function(m,r){var s=r.importance,y=m.importance;return s<y?-1:s>y?1:0},C=function(m,r){var s=false,y=p.tree,D=y[r],v=
r+1,E=false,K=2;bump_ht=x;if(D!=undefined){for(K=0;K<D.length;K++){a:{s=D[K];if(!(m.left>s.right||m.right<s.left))if(m.left>=s.left&&m.left<=s.right||m.right>=s.left&&m.right<=s.right||m.right>=s.right&&m.left<=s.left||m.right<=s.right&&m.left>=s.left)if(m.bottom<=s.bottom&&m.bottom>=s.top||m.top<=s.bottom&&m.top>=s.top||m.top==s.bottom&&m.top==s.top){s=true;break a}s=false}if(s==true){m.top-=bump_ht;m.bottom-=bump_ht;C(m,v);E=true;break}}if(E==false){m.top-=m.fontsize;D.push(m);K=Math.ceil(m.height/
x);D=0;for(D=1;D<=K;D++){v=r+D;y[v].push(m)}}}}}})(timeglider);(function(g){var x=g.TGDate,p,o=jQuery;g.TimegliderTimelineView=function(m,r){var s=m.options,y="#"+m._id,D=o(y).height(),v=this;p=r;this._views={PLACE:y,CONTAINER:y+" .timeglider-container",MENU:y+" .timeglider-timeline-menu",MENU_UL:y+" .timeglider-timeline-menu ul",MENU_HANDLE:y+" .timeglider-timeline-menu-handle",SLIDER_CONTAINER:y+" .timeglider-slider-container",SLIDER:y+" .timeglider-slider",TRUCK:y+" .timeglider-truck",CENTERLINE:y+" .timeglider-centerline",TICKS:y+" .timeglider-ticks",HANDLE:y+
" .timeglider-handle",FILTER_BT:y+" .timeglider-filter-bt",FILTER_BOX:y+" .timeglider-filter-box"};o(this._views.CONTAINER).css("height",D);this.basicFontSize=s.basic_fontsize;p.max_zoom=s.max_zoom;p.min_zoom=s.min_zoom;p.initial_timeline_id=s.initial_timeline_id;p.setZoomLevel(s.initial_zoom);this.dragSpeed=0;this.dimensions=this.getWidgetDimensions();this.ticksHandleOffset=this.rightside=this.leftside=this.tickNum=0;this.timeoout_id=1;this.timelineMenuOpen=this.sliderActive=false;this.ztop=1E3;
this.filterBoxActivated=false;this.buildSlider();this.castTicks();o.subscribe("mediator.ticksOffsetChange",function(){v.tickHangies();v.registerTitles();v.registerDragging()});o.subscribe("mediator.zoomLevelChange",function(){v.tickNum=0;v.leftside=0;v.castTicks();o(v._views.SLIDER).slider("value",v.invSliderVal(p.getZoomLevel()))});o.subscribe("mediator.ticksReadySignal",function(){p.getTicksReady()===true&&v.freshTimelines()});o.subscribe("mediator.refreshSignal",function(){v.castTicks()});o.subscribe("mediator.ticksArrayChange",
function(){});o.subscribe("mediator.focusDateChange",function(){});o.subscribe("mediator.timelineListChangeSignal",function(){var E,K=p.timelinePool;o(v._views.MENU_UL+" li").remove();for(E in K)if(K.hasOwnProperty(E)){var Q=K[E];o(v._views.MENU_UL).append("<li class='timelineList' id='"+E+"'>"+Q.title+"</li>");o("li#"+E).click(function(){p.toggleTimeline(o(this).attr("id"))})}});o.subscribe("mediator.activeTimelinesChange",function(){o(v._views.MENU_UL+" li").each(function(){var E=o(this).attr("id");
o.inArray(E,p._activeTimelines)!=-1?o(this).addClass("activeTimeline"):o(this).removeClass("activeTimeline")})});o(this._views.FILTER_BT).click(function(){o(this);var E=v._views.FILTER_BOX;if(v.filterBoxActivated==false){o(E).append(C);v.filterBoxActivated=true;var K=o(E+" .timeglider-filter-apply"),Q=o(E+" .timeglider-filter-close"),S=o(E+" .timeglider-filter-clear"),X="",aa="";K.click(function(){X=o(E+" .timeglider-filter-include").val();aa=o(E+" .timeglider-filter-exclude").val();p.setFilterObject({include:X,
exclude:aa});o(E).toggleClass("box-visible")});Q.click(function(){o(E).toggleClass("box-visible")});S.click(function(){p.setFilterObject({include:"",exclude:""});o(E+" .timeglider-filter-include").val("");o(E+" .timeglider-filter-exclude").val("");o(E).toggleClass("box-visible")})}o(v._views.FILTER_BOX).toggleClass("box-visible").css("z-index",v.ztop++)});o.subscribe("mediator.filterObjectChange",function(){});o(this._views.TRUCK).dblclick(function(E){var K=E.pageX-v.dimensions.container.offset.left-
v.dimensions.container.width/2,Q=p.getZoomInfo().spp;E=p.getFocusDate().sec;K=x.getDateFromSec(Math.floor(E+K*Q));E=x.getDateFromSec(E);output("DBLCLICK:"+E.mo+"-"+E.ye+" dblclick:"+K.mo+"-"+K.ye,"note")}).bind("mousewheel",function(E,K){var Q=Math.ceil(-1*K*3),S=p.getZoomLevel();p.setZoomLevel(S+Q);return false});o(this._views.TICKS).draggable({axis:"x",drag:function(){p.setTicksOffset(o(this).position().left)},stop:function(){v.resetTicksHandle();v.easeOutTicks();v.registerDragging()}}).delegate(".timeglider-timeline-event",
"click",function(){var E=o(this).attr("id");v.eventModal(E)}).delegate(".timeglider-timeline-event","hover",function(){var E=o(this).attr("id");output("hover, title:"+p.eventPool[E].title,"note")}).delegate(".evCollapsed","hover",function(){var E=o(this).attr("id");output("collapsed, title:"+p.eventPool[E].title,"note")});o(".TimegliderEvModal .closeBt").live("click",function(){o(this).parent().remove()});o(".TimegliderEvVideoModal .closeBt").live("click",function(){o(this).parent().remove()});o(this._views.MENU_HANDLE).click(function(){v.toggleMenu()});
s.show_centerline===true?o(this._views.CENTERLINE).css({height:v.dimensions.container.height,left:v.dimensions.container.centerx}):o(this._views.CENTERLINE).css({display:"none"})};g.TimegliderTimelineView.prototype={getWidgetDimensions:function(){var m=o(this._views.CONTAINER),r=m.width(),s=Math.floor(r/2)+1,y=m.height(),D=Math.floor(y/2),v=m.position().left;m=m.offset();r={width:r,height:y,centerx:s,centery:D,left:v,offset:m};s={height:o(this._views.CONTAINER+" .timeglider-footer").height()};return{container:r,
tick:{top:y-s.height-30},footer:s}},scaleToImportance:function(m,r){return m/r},invSliderVal:function(m){return Math.abs(m-101)},registerTitles:function(){var m,r,s,y,D,v,E,K,Q,S,X,aa=o(this._views.CONTAINER).offset().left;o(".timeglider-event-spanning").each(function(){m=o(this).offset().left-aa;r=o(this).outerWidth();E=o(".timeglider-event-title",this);s=E.outerWidth()+5;y=E.siblings(".timeglider-event-spanner").outerWidth();y>s&&m<0&&Math.abs(m)<r-s&&E.css({marginLeft:-1*m+5})});o(".TGTimelineEnvelope").each(function(){K=
o(this).offset().left-aa;Q=o(".titleBar",this);S=o(".titleBar .timeline-title",this);D=Q.position().left;X=D+K;Q.outerWidth();s=Q.outerWidth();v=-1*X;X<0&&S.css({marginLeft:v+5})})},registerDragging:function(){var m=p._startSec,r=o(this._views.TICKS).position().left,s=p.getZoomInfo().spp;m=x.getDateFromSec(m-r*s);output("ticks x:"+r,"tickpos");output("FD: "+x.formatFocusDate(m),"focusdate");p.setFocusDate(m)},buildSlider:function(){var m=this,r=m.invSliderVal(p.getZoomLevel()),s=p.max_zoom,y=p.min_zoom;
o(this._views.SLIDER).css("height",(1+s-y)*3).slider({steps:100,handle:o(".knob"),animate:500,orientation:"vertical",min:m.invSliderVal(s),max:m.invSliderVal(y),value:r,start:function(){m.sliderActive=true},stop:function(){m.sliderActive=false},change:function(){},slide:function(D,v){p.setZoomLevel(m.invSliderVal(v.value))}})},clearTicks:function(){this.tickNum=0;o(this._views.TICKS).css("left",0).html("<div class='timeglider-handle'></div>")},castTicks:function(){p.getZoomLevel();var m=p.getFocusDate(),
r=p.getZoomInfo().width;r=Math.ceil(this.dimensions.container.width/r)+4;var s="l";this.clearTicks();p.setTicksReady(false);this.addTick({type:"init",focus_date:m});for(m=1;m<=r;m+=1){this.addTick({type:s});s=s=="l"?"r":"l"}p.setTicksReady(true)},addTick:function(m){var r=0,s=0,y=s=0,D=0,v=0,E="";v={};y={};var K={},Q={};v={};K=p.getZoomInfo().unit;Q=p.getZoomInfo().width;D=p.getFocusDate();y=parseInt(this.dimensions.tick.top);D=p.addToTicksArray({type:m.type,unit:K},D);if(K=="mo"){v=x.getMonthAdj(D,
Q);Q=v.width;r=v.days}this.tickNum++;if(m.type=="init"){v=this.tickOffsetFromDate(p.getZoomInfo(),p.getFocusDate(),Q);this.leftside=s=Math.ceil(this.dimensions.container.centerx+v);this.rightside=s+Q}else if(m.type=="l")this.leftside=s=Math.floor(this.leftside-Q);else if(m.type=="r"){s=Math.floor(this.rightside);this.rightside+=Q}p.getTickBySerial(D).width=Q;p.getTickBySerial(D).left=s;E=this._views.PLACE+"_"+K+"_"+D+"-"+this.tickNum;v=o("<div class='timeglider-tick' id='"+E+"'><div class='timeglider-tick-label' id='label'></div></div>").appendTo(this._views.TICKS);
v.css({width:Q,left:s,top:y});y=this.getTickMarksInfo({unit:K,width:Q});y=r>0?r:y.tperu;s=Q/y;if(s>5){m=Raphael(E,Q,30);var S="";for(r=0;r<y;++r){E=r*s;S+="M"+E+" 20 L"+E+" 30"}m.path(S).attr({stroke:"#333","stroke-width":1})}K={unit:K,width:Q,serial:D};Q=this.getDateLabelForTick(K);v.children("#label").text(Q);return K},getTickMarksInfo:function(m){switch(m.unit){case "da":m=24;break;case "mo":m=30;break;case "ye":m=12;break;default:m=10}return{tperu:m}},getDateLabelForTick:function(m){switch(m.unit){case "bill":if(m.serial==
1)return"1";return m.serial-1+" bya";case "hundredmill":if(m.serial==1)return"1";return(m.serial-1)*100+" mya";case "tenmill":if(m.serial==1)return"1";return(m.serial-1)*10+" mya";case "mill":if(m.serial==1)return"1";return m.serial-1+" mya";case "hundredthou":if(m.serial==1)return"1";return m.serial-1+"00,000";case "tenthou":if(m.serial==1)return"1";return m.serial-1+"0000";case "thou":if(m.serial==1)return"1";return m.serial-1+"000";case "ce":if(m.serial==1)return"1";return m.serial-1+"00";case "de":return(m.serial-
1)*10+"s";case "ye":return m.serial;case "mo":m=x.getDateFromMonthNum(m.serial);return x.monthNamesFull[m.mo]+", "+m.ye;case "da":m=x.getDateFromRD(m.serial);return x.monthNamesAbbr[m.mo]+" "+m.da+", "+m.ye;default:return m.unit+":"+m.serial+":"+m.width}},tickHangies:function(){var m=o(this._views.TICKS).position().left,r=this.rightside+m-this.dimensions.container.width;if(this.leftside+m>-100){m=this.addTick({type:"l"});this.appendTimelines(m)}else if(r<100){m=this.addTick({type:"r"});this.appendTimelines(m)}},
tickOffsetFromDate:function(m,r,s){switch(m.unit){case "da":r=r.ho/24+r.mi/1440;s*=r;break;case "mo":m=x.getMonthDays(r.mo,r.ye);r=(r.da-1)/m+r.ho/(24*m)+r.mi/(1440*m);s*=r;break;case "ye":r=((r.mo-1)*30+r.da)/365;s*=r;break;case "de":r=r.ye%10/10+r.mo/120;s*=r;break;case "ce":r=r.ye%100/100+r.mo/1200;s*=r;break;case "thou":r=r.ye%1E3/1E3;s*=r;break;case "tenthou":r=r.ye%1E4/1E4;s*=r;break;case "hundredthou":r=r.ye%1E5/1E5;s*=r;break;default:s=0}return-1*s},resetTicksHandle:function(){o(this._views.HANDLE).offset({left:o(this._views.CONTAINER).offset().left})},
easeOutTicks:function(){Math.abs(this.dragSpeed)>5&&output("ticks stopped!")},toggleMenu:function(){var m=o(this._views.MENU).width();if(p.timelineMenuOpen===false){o(this._views.MENU).animate({left:"+="+m},50);o(this._views.MENU_HANDLE).text("<<");p.timelineMenuOpen=true}else{o(this._views.MENU).animate({left:"-="+m},100);o(this._views.MENU_HANDLE).text("timelines >>");p.timelineMenuOpen=false}},getTimelineEventsByTick:function(m){var r=m.tick.unit,s=m.tick.serial;m=m.timeline.dateHash;return m[r][s]&&
m[r][s].length>0?m[r][s]:0},setTimelineProp:function(m,r,s){p.timelinePool[m][r]=s},passesFilters:function(m,r){var s=true,y="",D=[],v;y="";D=[];if(r<m.low_threshold||r>m.high_threshold)return false;if(y=p.filterObject.include){D=y.split(",");s=false;for(v=0;v<D.length;v++){y=RegExp(D[v].trim(),"i");if(m.title.match(y))s=true}}if(y=p.filterObject.exclude){D=y.split(",");for(v=0;v<D.length;v++){y=RegExp(D[v].trim(),"i");if(m.title.match(y))s=false}}return s},freshTimelines:function(){var m,r,s,y,D=
p._activeTimelines,v=p._ticksArray,E="",K,Q=this,S="",X=0,aa=Q.dimensions.container.centerx,ra=Q.dimensions.container.width,fa=p.getFocusDate().sec,Z=p.getZoomInfo().spp,va=p.getZoomInfo().level;m=[];var qa=[];ra=fa-Math.floor(Z*(ra/2));var q;s=0;for(var n=Q.dimensions.container.height,w=0;w<D.length;w++){r=p.timelinePool[D[w]];q=r.display;s=r.top||n-80;$tl=o("<div class='TGTimelineEnvelope' id='"+r.id+"'><div class='titleBar'><div class='timeline-title'>"+r.title+" <span id='clps'>expand/collapse</span></div></div></div>").appendTo(this._views.TICKS);
$tl.draggable({axis:"y",handle:".titleBar",stop:function(){Q.setTimelineProp(r.id,"top",o(this).css("top"))}}).css("top",s);s=$tl.height();o(".TGTimelineEnvelope#"+r.id+" .titleBar #clps").click(function(){Q.expandCollapseTimeline(r.id)});K=$tl.children(".titleBar");m=aa+(r.bounds.first-fa)/Z;y=aa+(r.bounds.last-fa)/Z;K.css({top:s,left:m,width:y-m});if(q=="expanded")E=new timeglider.TGOrg;for(y=0;y<v.length;y++){m=this.getTimelineEventsByTick({tick:v[y],timeline:r});o.merge(qa,m)}for(y=0;y<r.spans.length;y++){m=
r.spans[y];m.start<ra&&m.end>ra&&o.inArray(m.id,qa)==-1&&qa.unshift(m.id)}for(m=0;m<qa.length;m++){y=p.eventPool["ev_"+qa[m]];if(this.passesFilters(y,va)==true){X=aa+(y.startdateObj.sec-fa)/Z;K=this.scaleToImportance(y.importance,va);if(q=="expanded"){y.width=y.titleWidth*K+18;if(y.span==true){y.spanwidth=(y.enddateObj.sec-y.startdateObj.sec)/Z;if(y.spanwidth>y.width)y.width=y.spanwidth}else y.spanwidth=0;y.fontsize=this.basicFontSize*K;y.left=X;K=0;if(y.image&&y.image_class=="layout"){K=y.image_size.height+
2;y.width=y.image_size.width+2}y.height=Math.ceil(y.fontsize)+K;y.top=s-y.height;E.addBlock(y,"sweep")}else if(q=="collapsed")S+="<div id='ev_"+y.id+"' class='evCollapsed' style='top:"+(s-2)+"px;left:"+X+"px'></div>"}}if(q=="expanded"){S=E.getHTML("sweep");r.borg=E.getBorg()}S!="undefined"&&$tl.append(S);o(".timeglider-event-image-bar").each(function(){o(this).position({my:"top",at:"bottom",of:$tl,offset:"0, 0"}).css("left",0)})}Q.registerTitles()},appendTimelines:function(m){for(var r=p._activeTimelines,
s=this.dimensions.container.centerx,y,D,v,E,K,Q,S,X,aa=p._startSec,ra=p.getZoomInfo().spp,fa=p.getZoomInfo().level,Z=0;Z<r.length;Z++){y=p.timelinePool[r[Z]];Q=y.borg;$tl=o(".TGTimelineEnvelope#"+y.id);K=$tl.height();idArr=this.getTimelineEventsByTick({tick:m,timeline:y});X=idArr.length;E=y.display;S="";for(i=0;i<X;i++){D=p.eventPool["ev_"+idArr[i]];v=s+(D.startdateObj.sec-aa)/ra;if(this.passesFilters(D,fa)==true)if(E=="expanded"){D.left=v;v=this.scaleToImportance(D.importance,fa);D.fontsize=this.basicFontSize*
v;D.width=D.titleWidth*v+18;if(D.span==true){D.spanwidth=(D.enddateObj.sec-D.startdateObj.sec)/ra;if(D.spanwidth>D.width)D.width=D.spanwidth}else D.spanwidth=0;D.top=K-timeglider.levelHeight;D.height=18;Q.addBlock(D,m.serial)}else if(E=="collapsed")S+="<div id='ev_"+D.id+"' class='evCollapsed' style='top:"+(K-2)+"px;left:"+v+"px'></div>"}if(E=="expanded"){y.borg=Q.getBorg();S=Q.getHTML(m.serial)}$tl.append(S)}},expandCollapseTimeline:function(m){m=p.timelinePool[m];m.display=m.display=="expanded"?
"collapsed":"expanded";p.refresh()},eventModal:function(m){o("#"+m+"_modal").remove();var r=o("#"+m),s=p.eventPool[m],y="<div class='TimegliderEvModal ui-widget-content shadow' id='"+m+"_modal'><div class='closeBt'><img src='img/close.png'></div><div class='startdate'>"+s.startdate+"</div><h4 id='title'>"+s.title+"</h4><p>"+(s.image?"<img src='"+s.image+"'>":"")+s.description+"</p><ul class='TimegliderModalLink'><li><a target='_blank' href='"+s.link+"'>link</a></li></ul></div>";if(s.video)y="<div class='TimegliderEvVideoModal ui-widget-content shadow' id='"+
m+"_modal'><div class='closeBt'><img src='img/close.png'></div><iframe width = '100%' height='300' src='"+s.video+"'></iframe></div>";o(y).appendTo(this._views.TICKS).css("z-index",this.ztop++).position({my:"left bottom",at:"left top",of:r,offset:"0, -12",collision:"flip fit"})},parseHTMLTable:function(m){var r={},s=+new Date,y=[];o("#"+m).find("tr").each(function(D){var v=o(this).children(),E;if(D===0)y=v.map(function(){return o(this).attr("class").replace(/^.*?\btg-(\S+)\b.*?$/,"$1")}).get();else{E=
{};v.each(function(K){E[y[K]]=o(this).text()});r["prefix"+s++]=E}});return r}};g.zoomTree=[{},{unit:"da",width:35E3,level:1,label:"5 hours"},{unit:"da",width:17600,level:2,label:"7 hours"},{unit:"da",width:8800,level:3,label:"10 hours"},{unit:"da",width:4400,level:4,label:"12 hours"},{unit:"da",width:2200,level:5,label:"14 hours"},{unit:"da",width:1100,level:6,label:"17 hours"},{unit:"da",width:550,level:7,label:"22 hours"},{unit:"da",width:432,level:8,label:"1 DAY"},{unit:"da",width:343,level:9,
label:"1.5 days"},{unit:"da",width:272,level:10,label:"2 days"},{unit:"da",width:216,level:11,label:"2.5 days"},{unit:"da",width:171,level:12,label:"3 days"},{unit:"da",width:136,level:13,label:"3.5 days"},{unit:"da",width:108,level:14,label:"4 days"},{unit:"mo",width:2509,level:15,label:"6 days"},{unit:"mo",width:1945,level:16,label:"1 WEEK"},{unit:"mo",width:1508,level:17,label:"10 days"},{unit:"mo",width:1169,level:18,label:"2 weeks"},{unit:"mo",width:913,level:19,label:"2.5 weeks"},{unit:"mo",
width:719,level:20,label:"3 weeks"},{unit:"mo",width:566,level:21,label:"3.5 weeks"},{unit:"mo",width:453,level:22,label:"1 MONTH"},{unit:"mo",width:362,level:23,label:"5.5 weeks"},{unit:"mo",width:290,level:24,label:"7 weeks"},{unit:"mo",width:232,level:25,label:"2 months"},{unit:"mo",width:186,level:26,label:"2.5 months"},{unit:"mo",width:148,level:27,label:"3 months"},{unit:"mo",width:119,level:28,label:"4 months"},{unit:"mo",width:95,level:29,label:"5 months"},{unit:"mo",width:76,level:30,label:"6 months"},
{unit:"ye",width:723,level:31,label:"9 months"},{unit:"ye",width:573,level:32,label:"1 YEAR"},{unit:"ye",width:455,level:33,label:"1.25 years"},{unit:"ye",width:361,level:34,label:"1.5 years"},{unit:"ye",width:286,level:35,label:"2 years"},{unit:"ye",width:227,level:36,label:"2.5 years"},{unit:"ye",width:179,level:37,label:"3 years"},{unit:"ye",width:142,level:38,label:"4 years"},{unit:"ye",width:113,level:39,label:"5 years"},{unit:"ye",width:89,level:40,label:"6 years"},{unit:"de",width:705,level:41,
label:"8 years"},{unit:"de",width:559,level:42,label:"10 years"},{unit:"de",width:443,level:43,label:"13 years"},{unit:"de",width:302,level:44,label:"16 years"},{unit:"de",width:240,level:45,label:"20 years"},{unit:"de",width:190,level:46,label:"25 years"},{unit:"de",width:150,level:47,label:"30 years"},{unit:"de",width:120,level:48,label:"40 years"},{unit:"de",width:95,level:49,label:"50 years"},{unit:"de",width:76,level:50,label:"65 years"},{unit:"ce",width:600,level:51,label:"80 years"},{unit:"ce",
width:480,level:52,label:"100 years"},{unit:"ce",width:381,level:53,label:"130 years"},{unit:"ce",width:302,level:54,label:"160 years"},{unit:"ce",width:240,level:55,label:"200 years"},{unit:"ce",width:190,level:56,label:"250 years"},{unit:"ce",width:150,level:57,label:"300 years"},{unit:"ce",width:120,level:58,label:"400 years"},{unit:"ce",width:95,level:59,label:"500 years"},{unit:"ce",width:76,level:60,label:"600 years"},{unit:"thou",width:603,level:61,label:"1000 years"},{unit:"thou",width:478,
level:62,label:"1200 years"},{unit:"thou",width:379,level:63,label:"1800 years"},{unit:"thou",width:301,level:64,label:"160 years"},{unit:"thou",width:239,level:65,label:"xxx years"},{unit:"thou",width:190,level:66,label:"xxx years"},{unit:"thou",width:150,level:67,label:"xxx years"},{unit:"thou",width:120,level:68,label:"xxx years"},{unit:"thou",width:95,level:69,label:"8,000 years"},{unit:"thou",width:76,level:70,label:"10,000 years"},{unit:"tenthou",width:603,level:71,label:"15,000 years"},{unit:"tenthou",
width:358,level:72,label:"20,000 years"},{unit:"tenthou",width:213,level:73,label:"30,000 years"},{unit:"tenthou",width:126,level:74,label:"60,000 years"},{unit:"tenthou",width:76,level:75,label:"100,000 years"},{unit:"hundredthou",width:603,level:76,label:"180,000 years"},{unit:"hundredthou",width:358,level:77,label:"300,000 years"},{unit:"hundredthou",width:213,level:78,label:"500,000 years"},{unit:"hundredthou",width:126,level:79,label:"800,000 years"},{unit:"hundredthou",width:76,level:80,label:"1 million years"},
{unit:"mill",width:603,level:81,label:"1.2 million years"},{unit:"mill",width:358,level:82,label:"2 million years"},{unit:"mill",width:213,level:83,label:"3 million years"},{unit:"mill",width:126,level:84,label:"5 million years"},{unit:"mill",width:76,level:85,label:"10 million years"},{unit:"tenmill",width:603,level:86,label:"15 million years"},{unit:"tenmill",width:358,level:87,label:"30 million years"},{unit:"tenmill",width:213,level:88,label:"50 million years"},{unit:"tenmill",width:126,level:89,
label:"80 million years"},{unit:"tenmill",width:76,level:90,label:"100 million years"},{unit:"hundredmill",width:603,level:91,label:"120 million years"},{unit:"hundredmill",width:358,level:92,label:"200 million years"},{unit:"hundredmill",width:213,level:93,label:"300 million years"},{unit:"hundredmill",width:126,level:94,label:"500 million years"},{unit:"hundredmill",width:76,level:95,label:"1 billion years"},{unit:"bill",width:603,level:96,label:"15 million years"},{unit:"bill",width:358,level:97,
label:"30 million years"},{unit:"bill",width:213,level:98,label:"50 million years"},{unit:"bill",width:126,level:99,label:"80 million years"},{unit:"bill",width:76,level:100,label:"100 billion years"}];g.calculateSecPerPx=function(m){for(var r=1;r<m.length;r++){var s=m[r],y=0;switch(s.unit){case "da":y=86400;break;case "mo":y=2419200;break;case "ye":y=31536E3;break;case "de":y=31536E4;break;case "ce":y=31536E5;break;case "thou":y=31536E6;break;case "tenthou":y=31536E7;break;case "hundredthou":y=31536E8;
break;case "mill":y=31536E9;break;case "tenmill":y=31536E10;break;case "hundredmill":y=31536E11;break;case "bill":y=31536E12}s.spp=y/parseInt(s.width)}}(g.zoomTree);var C="<div class='miniForm formLine'>show: <input type='text' class='timeglider-filter-include'></div><div class='miniForm formLine'>hide: <input type='text' class='timeglider-filter-exclude'></div><ul class='miniForm formBottom'><li class='timeglider-filter-clear'>clear</li><li class='timeglider-filter-close'>close</li><li class='timeglider-filter-apply'>apply</li></ul>"})(timeglider);(function(g){var x=g.TGDate,p={},o=jQuery;g.TimegliderTimeline=function(C){return C};g.TimegliderMediator=function(C){this.options=p;p=C;this.anonEventId=0;this._focusDate={};this._zoomInfo={};this._ticksReady=false;this._ticksArray=[];this._startSec=0;this._activeTimelines=[];this.max_zoom=100;this.min_zoom=1;this.gesturing=false;this.gestureStartZoom=0;this.filterObject={};this.eventPool=[];this.timelinePool={}};g.TimegliderMediator.prototype={loadTimelineData:function(C){var m=this;typeof C===
"object"?m.parseData(C):jQuery.getJSON(C,function(r){m.parseData(r)})},parseData:function(C){for(var m=0,r=C.length,s={},y={},D=0;D<r;D++){y=new timeglider.TimegliderTimeline(C[D]);s=this.chewTimeline(y);y.id.length>0&&m++;this.swallowTimeline(s)}m===0?alert("ERROR loading data: Check JSON with jsonLint"):this.setInitialTimelines()},chewTimeline:function(C){var m={da:[],mo:[],ye:[],de:[],ce:[],thou:[],tenthou:[],hundredthou:[],mill:[],tenmill:[],hundredmill:[],bill:[]},r=x.units;C.startSeconds=[];
C.endSeconds=[];C.spans=[];if(!C.color)C.color="#333333";if(C.events){for(var s,y,D,v,E=C.events.length,K=0;K<E;K++){s=C.events[K];if(s.id)y=s.id;else s.id=y="anon"+this.anonEventId++;D=x.validateEventDates(s.startdate,s.enddate);s.startdateObj=D.s;s.enddateObj=D.e;s.icon=p.icon_folder+(s.icon||"triangle_orange.png");s.titleWidth=g.getStringWidth(s.title)+20;if(s.image)if(!s.image_class){s.image_class="layout";s.image_size=g.getImageSize(s.image);debug.log("image height:"+s.image_size.height)}C.startSeconds.push(s.startdateObj.sec);
C.endSeconds.push(s.enddateObj.sec);if(s.enddateObj.sec>s.startdateObj.sec){s.span=true;C.spans.push({id:s.id,start:s.startdateObj.sec,end:s.enddateObj.sec})}else s.span=false;for(var Q=r.length,S=0;S<Q;S++){D=r[S];v=x.getTimeUnitSerial(s.startdateObj,D);if(m[D][v]!==undefined)m[D][v].push(y);else m[D][v]=[y]}this.eventPool["ev_"+y]=s}r=o.merge(C.startSeconds,C.endSeconds);r=timeglider.getLowHigh(r);C.bounds={first:r.low,last:r.high}}C.display="expanded";C.dateHash=m;return C},swallowTimeline:function(C){this.timelinePool[C.id]=
C;o.publish("mediator.timelineListChangeSignal")},setInitialTimelines:function(){var C=this,m=this.initial_timeline_id;m&&setTimeout(function(){C.toggleTimeline(m)},500)},refresh:function(){o.publish("mediator.refreshSignal")},setTicksReady:function(C){this._ticksReady=C;C===true&&o.publish("mediator.ticksReadySignal")},getTicksReady:function(){return this._ticksReady},getFocusDate:function(){return this._focusDate},setFocusDate:function(C){if(C!=this._focusDate){C.mo_num=x.getMonthNum(C);C.rd=x.getRataDie(C);
C.sec=x.getSec(C);this._focusDate=C}},getZoomLevel:function(){return Number(this._zoomLevel)},setZoomLevel:function(C){if(C<=this.max_zoom&&C>=this.min_zoom){this._startSec=this._focusDate.sec;if(C!=this._zoomLevel){this._zoomLevel=C;this._zoomInfo=timeglider.zoomTree[C];o.publish("mediator.zoomLevelChange")}output("z:"+this._zoomLevel+" / "+this._zoomInfo.label,"zoomlevel")}else return false},getZoomInfo:function(){return this._zoomInfo},setFilterObject:function(C){this.filterObject={include:C.include,
exclude:C.exclude};o.publish("mediator.filterObjectChange");this.refresh()},setGestureStart:function(){alert("z:"+this.getZoomLevel());this.gestureStartZoom=this.getZoomLevel()},getTicksOffset:function(){return this._ticksOffset},setTicksOffset:function(C){this._ticksOffset=C;o.publish("mediator.ticksOffsetChange")},getTickBySerial:function(C){for(var m=this._ticksArray,r=m.length,s=0;s<r;s++){var y=m[s];if(y.serial==C)return y}return false},addToTicksArray:function(C,m){if(C.type=="init"){C.serial=
x.getTimeUnitSerial(m,C.unit);this._ticksArray=[C]}else if(C.type=="l"){C.serial=this._ticksArray[0].serial-1;this._ticksArray.unshift(C)}else{C.serial=this._ticksArray[this._ticksArray.length-1].serial+1;this._ticksArray.push(C)}o.publish("mediator.ticksArrayChange");return C.serial},toggleTimeline:function(C){var m=this.timelinePool[C],r=o.inArray(C,this._activeTimelines);if(r==-1){this._activeTimelines.push(C);this.setFocusDate(x.makeDateObject(m.focus_date));this.setZoomLevel(m.initial_zoom)}else{this._activeTimelines.splice(r,
1);this.refresh()}o.publish("mediator.activeTimelinesChange")}};g.getLowHigh=function(C){var m,r,s=parseFloat(C[0]),y=s;for(m=0;m<C.length;m++){r=parseFloat(C[m]);if(r<y)y=r;if(r>s)s=r}return{high:s,low:y}};g.getStringWidth=function(C){var m=o("#TimegliderMeasureSpan").html("");m.html(C+"");C=m.width()+4;m.html("");return C};g.getImageSize=function(C){var m=o("#TimegliderMeasureSpan").html("");m.append("<img id='test_img' src='"+C+"'>");C=o("#test_img").width();var r=o("#test_img").height();m.html("");
return{width:C,height:r}};g.validateOptions=function(C){this.optionsMaster={initial_focus:{type:"date"},editor:{type:"string"},backgroundColor:{type:"color"},backgroundImage:{type:"color"},min_zoom:{type:"number",min:1,max:100},max_zoom:{type:"number",min:1,max:100},initial_zoom:{type:"number",min:1,max:100},show_centerline:{type:"boolean"},data_source:{type:"url"},basic_fontsize:{type:"number",min:9,max:100},mouse_wheel:{type:"string",possible:["zoom","pan"]},initial_timeline_id:{type:"string"}};
var m=this;msg="";lb="\n";o.each(C,function(r,s){if(m.optionsMaster[r])switch(m.optionsMaster[r].type){case "string":if(typeof s!="string")msg+=r+" needs to be a string."+lb;if(m.optionsMaster[r].possible)if(o.inArray(s,m.optionsMaster[r].possible)==-1)msg+=r+" must be: "+m.optionsMaster[r].possible.join(" or ");break;case "number":if(typeof s!="number")msg+=s+" needs to be a number."+lb;if(m.optionsMaster[r].min)if(s<m.optionsMaster[r].min)msg+=r+" must be greater than or equal to "+m.optionsMaster[r].min+
lb;if(m.optionsMaster[r].max)if(s>m.optionsMaster[r].max)msg+=r+" must be less than or equal to "+m.optionsMaster[r].max+lb;break;case "date":break;case "boolean":if(typeof s!="boolean")msg+=s+" needs to be a number."+lb;break;case "url":break;case "color":break;default:trace("is there a default for validating options?")}});return msg}})(timeglider);(function(g){g.widget("timeglider.timeline",{_tg:this,_element:this.element,options:{initial_focus:timeglider.TGDate.getToday(),editor:"none",min_zoom:1,max_zoom:100,initial_zoom:20,show_centerline:true,data_source:"",basic_fontsize:12,mouse_wheel:"zoom",initial_timeline_id:"",icon_folder:"js/timeglider/icons/"},_create:function(){this._id=g(this.element).attr("id");this.element.html("<div class='timeglider-container'><div class='timeglider-centerline'></div><div class='timeglider-truck'><div class='timeglider-ticks'><div class='timeglider-handle'></div></div></div><div class='timeglider-slider-container'><div class='timeglider-slider'></div></div><div class='timeglider-timeline-menu'><div class='timeglider-timeline-menu-handle'>timelines >></div><h3>timelines</h3><ul></ul></div><div class='timeglider-footer'>Timeglider jQuery Widget<div class='timeglider-filter-bt'><img title='filter' src='js/timeglider/buttons/filter.png'></div></div><div class='timeglider-filter-box'></div></div><span id='TimegliderMeasureSpan'></span>")},
_init:function(){var x=timeglider.validateOptions(this.options);if(x==""){x=new timeglider.TimegliderMediator(this.options);x.setFocusDate(timeglider.TGDate.makeDateObject(this.options.initial_focus));var p=new timeglider.TimegliderTimelineView(this,x);x.loadTimelineData(this.options.data_source);p.toggleMenu()}else alert("There's a problem with your widget settings:"+x)},destroy:function(){g.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);
