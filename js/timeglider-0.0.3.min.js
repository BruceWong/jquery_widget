(function(){var f=this,B=f._,C={},w=Array.prototype,L=Object.prototype,s=w.slice,S=w.unshift,N=L.toString,r=L.hasOwnProperty,y=w.forEach,p=w.map,G=w.reduce,J=w.reduceRight,i=w.filter,v=w.every,H=w.some,K=w.indexOf,aa=w.lastIndexOf;L=Array.isArray;var ba=Object.keys,x=function(h){return new u(h)};if(typeof module!=="undefined"&&module.exports){module.exports=x;x._=x}else f._=x;x.VERSION="1.1.4";var fa=x.each=x.forEach=function(h,l,q){if(h!=null)if(y&&h.forEach===y)h.forEach(l,q);else if(x.isNumber(h.length))for(var z=
0,O=h.length;z<O;z++){if(l.call(q,h[z],z,h)===C)break}else for(z in h)if(r.call(h,z))if(l.call(q,h[z],z,h)===C)break};x.map=function(h,l,q){var z=[];if(h==null)return z;if(p&&h.map===p)return h.map(l,q);fa(h,function(O,Q,W){z[z.length]=l.call(q,O,Q,W)});return z};x.reduce=x.foldl=x.inject=function(h,l,q,z){var O=q!==void 0;if(h==null)h=[];if(G&&h.reduce===G){if(z)l=x.bind(l,z);return O?h.reduce(l,q):h.reduce(l)}fa(h,function(Q,W,ja){if(!O&&W===0){q=Q;O=true}else q=l.call(z,q,Q,W,ja)});if(!O)throw new TypeError("Reduce of empty array with no initial value");
return q};x.reduceRight=x.foldr=function(h,l,q,z){if(h==null)h=[];if(J&&h.reduceRight===J){if(z)l=x.bind(l,z);return q!==void 0?h.reduceRight(l,q):h.reduceRight(l)}h=(x.isArray(h)?h.slice():x.toArray(h)).reverse();return x.reduce(h,l,q,z)};x.find=x.detect=function(h,l,q){var z;ha(h,function(O,Q,W){if(l.call(q,O,Q,W)){z=O;return true}});return z};x.filter=x.select=function(h,l,q){var z=[];if(h==null)return z;if(i&&h.filter===i)return h.filter(l,q);fa(h,function(O,Q,W){if(l.call(q,O,Q,W))z[z.length]=
O});return z};x.reject=function(h,l,q){var z=[];if(h==null)return z;fa(h,function(O,Q,W){l.call(q,O,Q,W)||(z[z.length]=O)});return z};x.every=x.all=function(h,l,q){l=l||x.identity;var z=true;if(h==null)return z;if(v&&h.every===v)return h.every(l,q);fa(h,function(O,Q,W){if(!(z=z&&l.call(q,O,Q,W)))return C});return z};var ha=x.some=x.any=function(h,l,q){l=l||x.identity;var z=false;if(h==null)return z;if(H&&h.some===H)return h.some(l,q);fa(h,function(O,Q,W){if(z=l.call(q,O,Q,W))return C});return z};
x.include=x.contains=function(h,l){var q=false;if(h==null)return q;if(K&&h.indexOf===K)return h.indexOf(l)!=-1;ha(h,function(z){if(q=z===l)return true});return q};x.invoke=function(h,l){var q=s.call(arguments,2);return x.map(h,function(z){return(l?z[l]:z).apply(z,q)})};x.pluck=function(h,l){return x.map(h,function(q){return q[l]})};x.max=function(h,l,q){if(!l&&x.isArray(h))return Math.max.apply(Math,h);var z={computed:-Infinity};fa(h,function(O,Q,W){Q=l?l.call(q,O,Q,W):O;Q>=z.computed&&(z={value:O,
computed:Q})});return z.value};x.min=function(h,l,q){if(!l&&x.isArray(h))return Math.min.apply(Math,h);var z={computed:Infinity};fa(h,function(O,Q,W){Q=l?l.call(q,O,Q,W):O;Q<z.computed&&(z={value:O,computed:Q})});return z.value};x.sortBy=function(h,l,q){return x.pluck(x.map(h,function(z,O,Q){return{value:z,criteria:l.call(q,z,O,Q)}}).sort(function(z,O){var Q=z.criteria,W=O.criteria;return Q<W?-1:Q>W?1:0}),"value")};x.sortedIndex=function(h,l,q){q=q||x.identity;for(var z=0,O=h.length;z<O;){var Q=z+
O>>1;q(h[Q])<q(l)?z=Q+1:O=Q}return z};x.toArray=function(h){if(!h)return[];if(h.toArray)return h.toArray();if(x.isArray(h))return h;if(x.isArguments(h))return s.call(h);return x.values(h)};x.size=function(h){return x.toArray(h).length};x.first=x.head=function(h,l,q){return l&&!q?s.call(h,0,l):h[0]};x.rest=x.tail=function(h,l,q){return s.call(h,x.isUndefined(l)||q?1:l)};x.last=function(h){return h[h.length-1]};x.compact=function(h){return x.filter(h,function(l){return!!l})};x.flatten=function(h){return x.reduce(h,
function(l,q){if(x.isArray(q))return l.concat(x.flatten(q));l[l.length]=q;return l},[])};x.without=function(h){var l=s.call(arguments,1);return x.filter(h,function(q){return!x.include(l,q)})};x.uniq=x.unique=function(h,l){return x.reduce(h,function(q,z,O){if(0==O||(l===true?x.last(q)!=z:!x.include(q,z)))q[q.length]=z;return q},[])};x.intersect=function(h){var l=s.call(arguments,1);return x.filter(x.uniq(h),function(q){return x.every(l,function(z){return x.indexOf(z,q)>=0})})};x.zip=function(){for(var h=
s.call(arguments),l=x.max(x.pluck(h,"length")),q=Array(l),z=0;z<l;z++)q[z]=x.pluck(h,""+z);return q};x.indexOf=function(h,l,q){if(h==null)return-1;if(q){q=x.sortedIndex(h,l);return h[q]===l?q:-1}if(K&&h.indexOf===K)return h.indexOf(l);q=0;for(var z=h.length;q<z;q++)if(h[q]===l)return q;return-1};x.lastIndexOf=function(h,l){if(h==null)return-1;if(aa&&h.lastIndexOf===aa)return h.lastIndexOf(l);for(var q=h.length;q--;)if(h[q]===l)return q;return-1};x.range=function(h,l,q){var z=s.call(arguments),O=z.length<=
1;h=O?0:z[0];l=O?z[0]:z[1];q=z[2]||1;z=Math.max(Math.ceil((l-h)/q),0);O=0;for(var Q=Array(z);O<z;){Q[O++]=h;h+=q}return Q};x.bind=function(h,l){var q=s.call(arguments,2);return function(){return h.apply(l||{},q.concat(s.call(arguments)))}};x.bindAll=function(h){var l=s.call(arguments,1);if(l.length==0)l=x.functions(h);fa(l,function(q){h[q]=x.bind(h[q],h)});return h};x.memoize=function(h,l){var q={};l=l||x.identity;return function(){var z=l.apply(this,arguments);return z in q?q[z]:q[z]=h.apply(this,
arguments)}};x.delay=function(h,l){var q=s.call(arguments,2);return setTimeout(function(){return h.apply(h,q)},l)};x.defer=function(h){return x.delay.apply(x,[h,1].concat(s.call(arguments,1)))};var A=function(h,l,q){var z;return function(){var O=this,Q=arguments,W=function(){z=null;h.apply(O,Q)};q&&clearTimeout(z);if(q||!z)z=setTimeout(W,l)}};x.throttle=function(h,l){return A(h,l,false)};x.debounce=function(h,l){return A(h,l,true)};x.wrap=function(h,l){return function(){var q=[h].concat(s.call(arguments));
return l.apply(this,q)}};x.compose=function(){var h=s.call(arguments);return function(){for(var l=s.call(arguments),q=h.length-1;q>=0;q--)l=[h[q].apply(this,l)];return l[0]}};x.keys=ba||function(h){if(x.isArray(h))return x.range(0,h.length);var l=[],q;for(q in h)if(r.call(h,q))l[l.length]=q;return l};x.values=function(h){return x.map(h,x.identity)};x.functions=x.methods=function(h){return x.filter(x.keys(h),function(l){return x.isFunction(h[l])}).sort()};x.extend=function(h){fa(s.call(arguments,1),
function(l){for(var q in l)h[q]=l[q]});return h};x.clone=function(h){return x.isArray(h)?h.slice():x.extend({},h)};x.tap=function(h,l){l(h);return h};x.isEqual=function(h,l){if(h===l)return true;var q=typeof h;if(q!=typeof l)return false;if(h==l)return true;if(!h&&l||h&&!l)return false;if(h._chain)h=h._wrapped;if(l._chain)l=l._wrapped;if(h.isEqual)return h.isEqual(l);if(x.isDate(h)&&x.isDate(l))return h.getTime()===l.getTime();if(x.isNaN(h)&&x.isNaN(l))return false;if(x.isRegExp(h)&&x.isRegExp(l))return h.source===
l.source&&h.global===l.global&&h.ignoreCase===l.ignoreCase&&h.multiline===l.multiline;if(q!=="object")return false;if(h.length&&h.length!==l.length)return false;q=x.keys(h);var z=x.keys(l);if(q.length!=z.length)return false;for(var O in h)if(!(O in l)||!x.isEqual(h[O],l[O]))return false;return true};x.isEmpty=function(h){if(x.isArray(h)||x.isString(h))return h.length===0;for(var l in h)if(r.call(h,l))return false;return true};x.isElement=function(h){return!!(h&&h.nodeType==1)};x.isArray=L||function(h){return N.call(h)===
"[object Array]"};x.isArguments=function(h){return!!(h&&r.call(h,"callee"))};x.isFunction=function(h){return!!(h&&h.constructor&&h.call&&h.apply)};x.isString=function(h){return!!(h===""||h&&h.charCodeAt&&h.substr)};x.isNumber=function(h){return!!(h===0||h&&h.toExponential&&h.toFixed)};x.isNaN=function(h){return h!==h};x.isBoolean=function(h){return h===true||h===false};x.isDate=function(h){return!!(h&&h.getTimezoneOffset&&h.setUTCFullYear)};x.isRegExp=function(h){return!!(h&&h.test&&h.exec&&(h.ignoreCase||
h.ignoreCase===false))};x.isNull=function(h){return h===null};x.isUndefined=function(h){return h===void 0};x.noConflict=function(){f._=B;return this};x.identity=function(h){return h};x.times=function(h,l,q){for(var z=0;z<h;z++)l.call(q,z)};x.mixin=function(h){fa(x.functions(h),function(l){E(l,x[l]=h[l])})};var k=0;x.uniqueId=function(h){var l=k++;return h?h+l:l};x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};x.template=function(h,l){var q=x.templateSettings;q="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+
h.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(q.interpolate,function(z,O){return"',"+O.replace(/\\'/g,"'")+",'"}).replace(q.evaluate||null,function(z,O){return"');"+O.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";q=new Function("obj",q);return l?q(l):q};var u=function(h){this._wrapped=h};x.prototype=u.prototype;var D=function(h,l){return l?x(h).chain():h},E=function(h,l){u.prototype[h]=function(){var q=
s.call(arguments);S.call(q,this._wrapped);return D(l.apply(x,q),this._chain)}};x.mixin(x);fa(["pop","push","reverse","shift","sort","splice","unshift"],function(h){var l=w[h];u.prototype[h]=function(){l.apply(this._wrapped,arguments);return D(this._wrapped,this._chain)}});fa(["concat","join","slice"],function(h){var l=w[h];u.prototype[h]=function(){return D(l.apply(this._wrapped,arguments),this._chain)}});u.prototype.chain=function(){this._chain=true;return this};u.prototype.value=function(){return this._wrapped}})();(function(){var f;f=typeof exports!=="undefined"?exports:this.Backbone={};f.VERSION="0.3.3";var B=this._;if(!B&&typeof require!=="undefined")B=require("underscore")._;var C=this.jQuery||this.Zepto;f.emulateHTTP=false;f.emulateJSON=false;f.Events={bind:function(i,v){this._callbacks||(this._callbacks={});(this._callbacks[i]||(this._callbacks[i]=[])).push(v);return this},unbind:function(i,v){var H;if(i){if(H=this._callbacks)if(v){H=H[i];if(!H)return this;for(var K=0,aa=H.length;K<aa;K++)if(v===H[K]){H.splice(K,
1);break}}else H[i]=[]}else this._callbacks={};return this},trigger:function(i){var v,H,K,aa;if(!(H=this._callbacks))return this;if(v=H[i]){K=0;for(aa=v.length;K<aa;K++)v[K].apply(this,Array.prototype.slice.call(arguments,1))}if(v=H.all){K=0;for(aa=v.length;K<aa;K++)v[K].apply(this,arguments)}return this}};f.Model=function(i,v){i||(i={});if(this.defaults)i=B.extend({},this.defaults,i);this.attributes={};this._escapedAttributes={};this.cid=B.uniqueId("c");this.set(i,{silent:true});this._previousAttributes=
B.clone(this.attributes);if(v&&v.collection)this.collection=v.collection;this.initialize(i,v)};B.extend(f.Model.prototype,f.Events,{_previousAttributes:null,_changed:false,initialize:function(){},toJSON:function(){return B.clone(this.attributes)},get:function(i){return this.attributes[i]},escape:function(i){var v;if(v=this._escapedAttributes[i])return v;v=this.attributes[i];return this._escapedAttributes[i]=(v==null?"":v).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,
"&quot;")},set:function(i,v){v||(v={});if(!i)return this;if(i.attributes)i=i.attributes;var H=this.attributes,K=this._escapedAttributes;if(!v.silent&&this.validate&&!this._performValidation(i,v))return false;if("id"in i)this.id=i.id;for(var aa in i){var ba=i[aa];if(!B.isEqual(H[aa],ba)){H[aa]=ba;delete K[aa];if(!v.silent){this._changed=true;this.trigger("change:"+aa,this,ba,v)}}}!v.silent&&this._changed&&this.change(v);return this},unset:function(i,v){v||(v={});var H={};H[i]=void 0;if(!v.silent&&
this.validate&&!this._performValidation(H,v))return false;delete this.attributes[i];delete this._escapedAttributes[i];if(!v.silent){this._changed=true;this.trigger("change:"+i,this,void 0,v);this.change(v)}return this},clear:function(i){i||(i={});var v=this.attributes,H={};for(attr in v)H[attr]=void 0;if(!i.silent&&this.validate&&!this._performValidation(H,i))return false;this.attributes={};this._escapedAttributes={};if(!i.silent){this._changed=true;for(attr in v)this.trigger("change:"+attr,this,
void 0,i);this.change(i)}return this},fetch:function(i){i||(i={});var v=this,H=J(i.error,v,i);(this.sync||f.sync)("read",this,function(K){if(!v.set(v.parse(K),i))return false;i.success&&i.success(v,K)},H);return this},save:function(i,v){v||(v={});if(i&&!this.set(i,v))return false;var H=this,K=J(v.error,H,v),aa=this.isNew()?"create":"update";(this.sync||f.sync)(aa,this,function(ba){if(!H.set(H.parse(ba),v))return false;v.success&&v.success(H,ba)},K);return this},destroy:function(i){i||(i={});var v=
this,H=J(i.error,v,i);(this.sync||f.sync)("delete",this,function(K){v.collection&&v.collection.remove(v);i.success&&i.success(v,K)},H);return this},url:function(){var i=G(this.collection);if(this.isNew())return i;return i+(i.charAt(i.length-1)=="/"?"":"/")+this.id},parse:function(i){return i},clone:function(){return new this.constructor(this)},isNew:function(){return!this.id},change:function(i){this.trigger("change",this,i);this._previousAttributes=B.clone(this.attributes);this._changed=false},hasChanged:function(i){if(i)return this._previousAttributes[i]!=
this.attributes[i];return this._changed},changedAttributes:function(i){i||(i=this.attributes);var v=this._previousAttributes,H=false,K;for(K in i)if(!B.isEqual(v[K],i[K])){H=H||{};H[K]=i[K]}return H},previous:function(i){if(!i||!this._previousAttributes)return null;return this._previousAttributes[i]},previousAttributes:function(){return B.clone(this._previousAttributes)},_performValidation:function(i,v){var H=this.validate(i);if(H){v.error?v.error(this,H):this.trigger("error",this,H,v);return false}return true}});
f.Collection=function(i,v){v||(v={});if(v.comparator){this.comparator=v.comparator;delete v.comparator}this._boundOnModelEvent=B.bind(this._onModelEvent,this);this._reset();i&&this.refresh(i,{silent:true});this.initialize(i,v)};B.extend(f.Collection.prototype,f.Events,{model:f.Model,initialize:function(){},toJSON:function(){return this.map(function(i){return i.toJSON()})},add:function(i,v){if(B.isArray(i))for(var H=0,K=i.length;H<K;H++)this._add(i[H],v);else this._add(i,v);return this},remove:function(i,
v){if(B.isArray(i))for(var H=0,K=i.length;H<K;H++)this._remove(i[H],v);else this._remove(i,v);return this},get:function(i){if(i==null)return null;return this._byId[i.id!=null?i.id:i]},getByCid:function(i){return i&&this._byCid[i.cid||i]},at:function(i){return this.models[i]},sort:function(i){i||(i={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");this.models=this.sortBy(this.comparator);i.silent||this.trigger("refresh",this,i);return this},pluck:function(i){return B.map(this.models,
function(v){return v.get(i)})},refresh:function(i,v){i||(i=[]);v||(v={});this._reset();this.add(i,{silent:true});v.silent||this.trigger("refresh",this,v);return this},fetch:function(i){i||(i={});var v=this,H=J(i.error,v,i);(this.sync||f.sync)("read",this,function(K){v.refresh(v.parse(K));i.success&&i.success(v,K)},H);return this},create:function(i,v){var H=this;v||(v={});if(i instanceof f.Model)i.collection=H;else i=new this.model(i,{collection:H});return i.save(null,{success:function(K,aa){H.add(K);
v.success&&v.success(K,aa)},error:v.error})},parse:function(i){return i},chain:function(){return B(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_add:function(i,v){v||(v={});i instanceof f.Model||(i=new this.model(i,{collection:this}));var H=this.getByCid(i);if(H)throw Error(["Can't add the same model to a set twice",H.id]);this._byId[i.id]=i;this._byCid[i.cid]=i;i.collection=this;this.models.splice(this.comparator?this.sortedIndex(i,this.comparator):
this.length,0,i);i.bind("all",this._boundOnModelEvent);this.length++;v.silent||i.trigger("add",i,this,v);return i},_remove:function(i,v){v||(v={});i=this.getByCid(i)||this.get(i);if(!i)return null;delete this._byId[i.id];delete this._byCid[i.cid];delete i.collection;this.models.splice(this.indexOf(i),1);this.length--;v.silent||i.trigger("remove",i,this,v);i.unbind("all",this._boundOnModelEvent);return i},_onModelEvent:function(i,v){if(i==="change:id"){delete this._byId[v.previous("id")];this._byId[v.id]=
v}this.trigger.apply(this,arguments)}});B.each(["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty"],function(i){f.Collection.prototype[i]=function(){return B[i].apply(B,[this.models].concat(B.toArray(arguments)))}});f.Controller=function(i){i||(i={});if(i.routes)this.routes=i.routes;this._bindRoutes();
this.initialize(i)};var w=/:([\w\d]+)/g,L=/\*([\w\d]+)/g;B.extend(f.Controller.prototype,f.Events,{initialize:function(){},route:function(i,v,H){f.history||(f.history=new f.History);B.isRegExp(i)||(i=this._routeToRegExp(i));f.history.route(i,B.bind(function(K){K=this._extractParameters(i,K);H.apply(this,K);this.trigger.apply(this,["route:"+v].concat(K))},this))},saveLocation:function(i){f.history.saveLocation(i)},_bindRoutes:function(){if(this.routes)for(var i in this.routes){var v=this.routes[i];
this.route(i,v,this[v])}},_routeToRegExp:function(i){i=i.replace(w,"([^/]*)").replace(L,"(.*?)");return RegExp("^"+i+"$")},_extractParameters:function(i,v){return i.exec(v).slice(1)}});f.History=function(){this.handlers=[];this.fragment=this.getFragment();B.bindAll(this,"checkUrl")};var s=/^#*/;B.extend(f.History.prototype,{interval:50,getFragment:function(i){return(i||window.location).hash.replace(s,"")},start:function(){var i=document.documentMode;if(i=C.browser.msie&&(!i||i<=7))this.iframe=C('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;
"onhashchange"in window&&!i?C(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval);return this.loadUrl()},route:function(i,v){this.handlers.push({route:i,callback:v})},checkUrl:function(){var i=this.getFragment();if(i==this.fragment&&this.iframe)i=this.getFragment(this.iframe.location);if(i==this.fragment||i==decodeURIComponent(this.fragment))return false;if(this.iframe)window.location.hash=this.iframe.location.hash=i;this.loadUrl()},loadUrl:function(){var i=this.fragment=
this.getFragment();return B.any(this.handlers,function(v){if(v.route.test(i)){v.callback(i);return true}})},saveLocation:function(i){i=(i||"").replace(s,"");if(this.fragment!=i){window.location.hash=this.fragment=i;if(this.iframe&&i!=this.getFragment(this.iframe.location)){this.iframe.document.open().close();this.iframe.location.hash=i}}}});f.View=function(i){this._configure(i||{});this._ensureElement();this.delegateEvents();this.initialize(i)};var S=/^(\w+)\s*(.*)$/;B.extend(f.View.prototype,f.Events,
{tagName:"div",$:function(i){return C(i,this.el)},initialize:function(){},render:function(){return this},remove:function(){C(this.el).remove();return this},make:function(i,v,H){i=document.createElement(i);v&&C(i).attr(v);H&&C(i).html(H);return i},delegateEvents:function(i){if(i||(i=this.events)){C(this.el).unbind();for(var v in i){var H=i[v],K=v.match(S),aa=K[1];K=K[2];H=B.bind(this[H],this);K===""?C(this.el).bind(aa,H):C(this.el).delegate(K,aa,H)}}},_configure:function(i){if(this.options)i=B.extend({},
this.options,i);if(i.model)this.model=i.model;if(i.collection)this.collection=i.collection;if(i.el)this.el=i.el;if(i.id)this.id=i.id;if(i.className)this.className=i.className;if(i.tagName)this.tagName=i.tagName;this.options=i},_ensureElement:function(){if(!this.el){var i={};if(this.id)i.id=this.id;if(this.className)i["class"]=this.className;this.el=this.make(this.tagName,i)}}});var N=function(i,v){var H=p(this,i,v);H.extend=N;return H};f.Model.extend=f.Collection.extend=f.Controller.extend=f.View.extend=
N;var r={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};f.sync=function(i,v,H,K){var aa=r[i];i=i==="create"||i==="update"?JSON.stringify(v.toJSON()):null;v={url:G(v),type:aa,contentType:"application/json",data:i,dataType:"json",processData:false,success:H,error:K};if(f.emulateJSON){v.contentType="application/x-www-form-urlencoded";v.processData=true;v.data=i?{model:i}:{}}if(f.emulateHTTP)if(aa==="PUT"||aa==="DELETE"){if(f.emulateJSON)v.data._method=aa;v.type="POST";v.beforeSend=function(ba){ba.setRequestHeader("X-HTTP-Method-Override",
aa)}}C.ajax(v)};var y=function(){},p=function(i,v,H){var K;K=v&&v.hasOwnProperty("constructor")?v.constructor:function(){return i.apply(this,arguments)};y.prototype=i.prototype;K.prototype=new y;v&&B.extend(K.prototype,v);H&&B.extend(K,H);K.prototype.constructor=K;K.__super__=i.prototype;return K},G=function(i){if(!(i&&i.url))throw Error("A 'url' property or function must be specified");return B.isFunction(i.url)?i.url():i.url},J=function(i,v,H){return function(K){i?i(v,K):v.trigger("error",v,K,H)}}})();window.debug=function(){function f(J){if(s&&(S||!w||!w.log))s.apply(B,J)}for(var B=this,C=Array.prototype.slice,w=B.console,L={},s,S,N=9,r=["error","warn","info","debug","log"],y="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),p=y.length,G=[];--p>=0;)(function(J){L[J]=function(){N!==0&&w&&w[J]&&w[J].apply(w,arguments)}})(y[p]);for(p=r.length;--p>=0;)(function(J,i){L[i]=function(){var v=C.call(arguments),H=[i].concat(v);
G.push(H);f(H);if(w&&(N>0?N>J:r.length+N<=J))w.firebug?w[i].apply(B,v):w[i]?w[i](v):w.log(v)}})(p,r[p]);L.setLevel=function(J){N=typeof J==="number"?J:9};L.setCallback=function(){var J=C.call(arguments),i=G.length,v=i;s=J.shift()||null;S=typeof J[0]==="boolean"?J.shift():false;for(v-=typeof J[0]==="number"?J.shift():i;v<i;)f(G[v++])};return L}();(function(f){function B(k,u,D,E){E={data:E||E===0||E===false?E:u?u.data:{},_wrap:u?u._wrap:null,tmpl:null,parent:u||null,nodes:[],calls:r,nest:y,wrap:p,html:G,update:J};k&&f.extend(E,k,{nodes:[],parent:u});if(D){E.tmpl=D;E._ctnt=E._ctnt||E.tmpl(f,E);E.key=++fa;(A.length?aa:K)[fa]=E}return E}function C(k,u,D){var E;D=D?f.map(D,function(h){return typeof h==="string"?k.key?h.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+v+'="'+k.key+'" $2'):h:C(h,k,h._ctnt)}):k;if(u)return D;D=D.join("");
D.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(h,l,q,z){E=f(q).get();N(E);if(l)E=w(l).concat(E);if(z)E=E.concat(w(z))});return E?E:w(D)}function w(k){var u=document.createElement("div");u.innerHTML=k;return f.makeArray(u.childNodes)}function L(k){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+f.trim(k).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,
function(u,D,E,h,l,q,z){u=f.tmpl.tag[E];if(!u)throw"Unknown template tag: "+E;E=u._default||[];if(q&&!/\w$/.test(l)){l+=q;q=""}if(l){l=S(l);z=z?","+S(z)+")":q?")":"";z=q?l.indexOf(".")>-1?l+S(q):"("+l+").call($item"+z:l;q=q?z:"(typeof("+l+")==='function'?("+l+").call($item):("+l+"))"}else q=z=E.$1||"null";h=S(h);return"');"+u[D?"close":"open"].split("$notnull_1").join(l?"typeof("+l+")!=='undefined' && ("+l+")!=null":"true").split("$1a").join(q).split("$1").join(z).split("$2").join(h||E.$2||"")+"__.push('"})+
"');}return __;")}function s(k,u){k._wrap=C(k,true,f.isArray(u)?u:[H.test(u)?u:f(u).html()]).join("")}function S(k){return k?k.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function N(k){function u(Q){function W(da){da+=D;ca=l[da]=l[da]||B(ca,K[ca.parent.key+D]||ca.parent)}var ja,X=Q,ca,ka;if(ka=Q.getAttribute(v)){for(;X.parentNode&&(X=X.parentNode).nodeType===1&&!(ja=X.getAttribute(v)););if(ja!==ka){X=X.parentNode?X.nodeType===11?0:X.getAttribute(v)||0:0;if(!(ca=K[ka])){ca=aa[ka];ca=B(ca,K[X]||
aa[X]);ca.key=++fa;K[fa]=ca}ha&&W(ka)}Q.removeAttribute(v)}else if(ha&&(ca=f.data(Q,"tmplItem"))){W(ca.key);K[ca.key]=ca;X=(X=f.data(Q.parentNode,"tmplItem"))?X.key:0}if(ca){for(ja=ca;ja&&ja.key!=X;){ja.nodes.push(Q);ja=ja.parent}delete ca._ctnt;delete ca._wrap;f.data(Q,"tmplItem",ca)}}var D="_"+ha,E,h,l={},q,z,O;q=0;for(z=k.length;q<z;q++)if((E=k[q]).nodeType===1){h=E.getElementsByTagName("*");for(O=h.length-1;O>=0;O--)u(h[O]);u(E)}}function r(k,u,D,E){if(!k)return A.pop();A.push({_:k,tmpl:u,item:this,
data:D,options:E})}function y(k,u,D){return f.tmpl(f.template(k),u,D,this)}function p(k,u){var D=k.options||{};D.wrapped=u;return f.tmpl(f.template(k.tmpl),k.data,D,k.item)}function G(k,u){var D=this._wrap;return f.map(f(f.isArray(D)?D.join(""):D).filter(k||"*"),function(E){if(u)E=E.innerText||E.textContent;else{var h;if(!(h=E.outerHTML)){h=document.createElement("div");h.appendChild(E.cloneNode(true));h=h.innerHTML}E=h}return E})}function J(){var k=this.nodes;f.tmpl(null,null,null,this).insertBefore(k[0]);
f(k).remove()}var i=f.fn.domManip,v="_tmplitem",H=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,K={},aa={},ba,x={key:0,data:{}},fa=0,ha=0,A=[];f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(k,u){f.fn[k]=function(D){var E=[];D=f(D);var h,l,q;h=this.length===1&&this[0].parentNode;ba=K||{};if(h&&h.nodeType===11&&h.childNodes.length===1&&D.length===1){D[u](this[0]);E=this}else{l=0;for(q=D.length;l<q;l++){ha=l;h=(l>0?this.clone(true):this).get();
f(D[l])[u](h);E=E.concat(h)}ha=0;E=this.pushStack(E,k,D.selector)}D=ba;ba=null;f.tmpl.complete(D);return E}});f.fn.extend({tmpl:function(k,u,D){return f.tmpl(this[0],k,u,D)},tmplItem:function(){return f.tmplItem(this[0])},template:function(k){return f.template(k,this[0])},domManip:function(k,u,D){if(k[0]&&f.isArray(k[0])){for(var E=f.makeArray(arguments),h=k[0],l=h.length,q=0,z;q<l&&!(z=f.data(h[q++],"tmplItem")););if(z&&ha)E[2]=function(O){f.tmpl.afterManip(this,O,D)};i.apply(this,E)}else i.apply(this,
arguments);ha=0;ba||f.tmpl.complete(K);return this}});f.extend({tmpl:function(k,u,D,E){var h=!E;if(h){E=x;k=f.template[k]||f.template(null,k);aa={}}else if(!k){k=E.tmpl;K[E.key]=E;E.nodes=[];E.wrapped&&s(E,E.wrapped);return f(C(E,null,E.tmpl(f,E)))}if(!k)return[];if(typeof u==="function")u=u.call(E||{});D&&D.wrapped&&s(D,D.wrapped);u=f.isArray(u)?f.map(u,function(l){return l?B(D,E,k,l):null}):[B(D,E,k,u)];return h?f(C(E,null,u)):u},tmplItem:function(k){var u;if(k instanceof f)k=k[0];for(;k&&k.nodeType===
1&&!(u=f.data(k,"tmplItem"))&&(k=k.parentNode););return u||x},template:function(k,u){if(u){if(typeof u==="string")u=L(u);else if(u instanceof f)u=u[0]||{};if(u.nodeType)u=f.data(u,"tmpl")||f.data(u,"tmpl",L(u.innerHTML));return typeof k==="string"?f.template[k]=u:u}return k?typeof k!=="string"?f.template(null,k):f.template[k]||f.template(null,H.test(k)?k:f(k)):null},encode:function(k){return(""+k).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});
f.extend(f.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},
"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){K={}},afterManip:function(k,u,D){var E=u.nodeType===11?f.makeArray(u.childNodes):u.nodeType===1?[u]:[];D.call(k,u);N(E);ha++}})})(jQuery);(function(f){function B(w){var L=w||window.event,s=[].slice.call(arguments,1),S=0,N=0,r=0;w=f.event.fix(L);w.type="mousewheel";if(w.wheelDelta)S=w.wheelDelta/120;if(w.detail)S=-w.detail/3;r=S;if(L.axis!==undefined&&L.axis===L.HORIZONTAL_AXIS){r=0;N=-1*S}if(L.wheelDeltaY!==undefined)r=L.wheelDeltaY/120;if(L.wheelDeltaX!==undefined)N=-1*L.wheelDeltaX/120;s.unshift(w,S,N,r);return f.event.handle.apply(this,s)}var C=["DOMMouseScroll","mousewheel"];f.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var w=
C.length;w;)this.addEventListener(C[--w],B,false);else this.onmousewheel=B},teardown:function(){if(this.removeEventListener)for(var w=C.length;w;)this.removeEventListener(C[--w],B,false);else this.onmousewheel=null}};f.fn.extend({mousewheel:function(w){return w?this.bind("mousewheel",w):this.trigger("mousewheel")},unmousewheel:function(w){return this.unbind("mousewheel",w)}})})(jQuery);(function(f){function B(){if(N){window.clearTimeout(r);N=false}}function C(){if(!N){N=true;r=window.setTimeout("doRightClick();",800)}}function w(p){var G="";if(!(p.touches.length>1)){switch(p.type){case "gesturestart":alert("gesturestart");p.preventDefault();break;case "touchstart":if(f(p.changedTouches[0].target).is("select"))return;G=p.changedTouches[0];var J="mouseover",i=document.createEvent("MouseEvent");i.initMouseEvent(J,true,true,window,1,G.screenX,G.screenY,G.clientX,G.clientY,false,false,
false,false,0,null);G.target.dispatchEvent(i);J="mousedown";i=document.createEvent("MouseEvent");i.initMouseEvent(J,true,true,window,1,G.screenX,G.screenY,G.clientX,G.clientY,false,false,false,false,0,null);G.target.dispatchEvent(i);if(s){window.clearTimeout(S);if(G.target==L){L=null;s=false;J="click";i=document.createEvent("MouseEvent");i.initMouseEvent(J,true,true,window,1,G.screenX,G.screenY,G.clientX,G.clientY,false,false,false,false,0,null);G.target.dispatchEvent(i);J="dblclick";i=document.createEvent("MouseEvent");
i.initMouseEvent(J,true,true,window,1,G.screenX,G.screenY,G.clientX,G.clientY,false,false,false,false,0,null);G.target.dispatchEvent(i)}else{L=G.target;s=true;S=window.setTimeout("cancelTap();",600);C(p)}}else{L=G.target;s=true;S=window.setTimeout("cancelTap();",600);C(p)}p.preventDefault();return false;case "touchmove":B();G="mousemove";p.preventDefault();break;case "touchend":if(y){y=false;p.preventDefault();return false}B();G="mouseup";break;default:return}p=p.changedTouches[0];J=document.createEvent("MouseEvent");
J.initMouseEvent(G,true,true,window,1,p.screenX,p.screenY,p.clientX,p.clientY,false,false,false,false,0,null);p.target.dispatchEvent(J);if(G=="mouseup"&&s&&p.target==L){J=document.createEvent("MouseEvent");J.initMouseEvent("click",true,true,window,1,p.screenX,p.screenY,p.clientX,p.clientY,false,false,false,false,0,null);p.target.dispatchEvent(J)}}}f.extend(f.support,{touch:typeof Touch=="object"});f.fn.addTouch=function(){f.support.touch&&this.each(function(p,G){G.addEventListener("touchstart",w,
false);G.addEventListener("touchmove",w,false);G.addEventListener("touchend",w,false);G.addEventListener("touchcancel",w,false)})};var L=null,s=false,S=null,N=false,r=null,y=false})(jQuery);(function(){function f(){if(f.is(arguments[0],Q)){for(var a=arguments[0],b=Ma[K](f,a.splice(0,3+f.is(a[0],O))),c=b.set(),e=0,g=a[k];e<g;e++){var d=a[e]||{};N[p](d.type)&&c[X](b[d.type]().attr(d))}return c}return Ma[K](f,arguments)}function B(){for(var a=[],b=0;b<32;b++)a[b]=(~~(D.random()*16))[W](16);a[12]=4;a[16]=(a[16]&3|8)[W](16);return"r-"+a[A]("")}function C(a,b,c){function e(){var g=Array[y].slice.call(arguments,0),d=g[A]("\u25ba"),j=e.cache=e.cache||{},m=e.count=e.count||[];if(j[p](d))return c?
c(j[d]):j[d];m[k]>=1E3&&delete j[m.shift()];m[X](d);j[d]=a[K](b,g);return c?c(j[d]):j[d]}return e}function w(){return this.x+ba+this.y}function L(a){return function(b,c,e,g){var d={back:a};f.is(e,"function")?g=e:d.rot=e;b&&b.constructor==ga&&(b=b.attrs.path);b&&(d.along=b);return this.animate(d,c,g)}}function s(a,b,c,e,g,d){function j(R,$){var T,P,V,ia;V=R;for(P=0;P<8;P++){ia=((o*V+n)*V+m)*V-R;if(l(ia)<$)return V;T=(3*o*V+2*n)*V+m;if(l(T)<1.0E-6)break;V-=ia/T}T=0;P=1;V=R;if(V<T)return T;if(V>P)return P;
for(;T<P;){ia=((o*V+n)*V+m)*V;if(l(ia-R)<$)break;R>ia?T=V:P=V;V=(P-T)/2+T}return V}var m=3*b,n=3*(e-b)-m,o=1-m-n,F=3*c,I=3*(g-c)-F,M=1-F-I;return function(R,$){var T=j(R,$);return((M*T+I)*T+F)*T}(a,1/(200*d))}f.version="1.5.2";var S=/[, ]+/,N={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},r=/\{(\d+)\}/g,y="prototype",p="hasOwnProperty",G=document,J=window,i={was:Object[y][p].call(J,"Raphael"),is:J.Raphael},v=function(){this.customAttributes={}},H,K="apply",aa="createTouch"in G,ba=" ",x=String,
fa="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend".split(ba),ha={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},A="join",k="length",u=x[y].toLowerCase,D=Math,E=D.max,h=D.min,l=D.abs,q=D.pow,z=D.PI,O="number",Q="array",W="toString",ja=Object[y][W],X="push",ca=/^url\(['"]?([^\)]+?)['"]?\)$/i,ka=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
da={NaN:1,Infinity:1,"-Infinity":1},qa=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Y=D.round,U=parseFloat,ma=parseInt,va=x[y].toUpperCase,Da={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt",
"stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},Na={along:"along",blur:O,"clip-rect":"csv",cx:O,cy:O,fill:"colour","fill-opacity":O,"font-size":O,height:O,opacity:O,path:"path",r:O,rotation:"csv",rx:O,ry:O,scale:"csv",stroke:"colour","stroke-opacity":O,"stroke-width":O,translation:"csv",width:O,x:O,y:O},tb=/^(from|to|\d+%?)$/,Oa=/\s*,\s*/,ub={hs:1,rg:1},vb=/,?([achlmqrstvxz]),?/gi,
wb=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,xb=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,Ya=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,yb=function(a,b){return a.key-b.key};f.type=J.SVGAngle||G.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(f.type=="VML"){var sa=G.createElement("div");sa.innerHTML='<v:shape adj="1"/>';sa=sa.firstChild;sa.style.behavior="url(#default#VML)";if(!(sa&&typeof sa.adj=="object"))return f.type=null;sa=null}f.svg=
!(f.vml=f.type=="VML");v[y]=f[y];H=v[y];f._id=0;f._oid=0;f.fn={};f.is=function(a,b){b=u.call(b);if(b=="finite")return!da[p](+a);return b=="null"&&a===null||b==typeof a||b=="object"&&a===Object(a)||b=="array"&&Array.isArray&&Array.isArray(a)||ja.call(a).slice(8,-1).toLowerCase()==b};f.angle=function(a,b,c,e,g,d){if(g==null){a-=c;b-=e;if(!a&&!b)return 0;return((a<0)*180+D.atan(-b/-a)*180/z+360)%360}return f.angle(a,b,g,d)-f.angle(c,e,g,d)};f.rad=function(a){return a%360*z/180};f.deg=function(a){return a*
180/z%360};f.snapTo=function(a,b,c){c=f.is(c,"finite")?c:10;if(f.is(a,Q))for(var e=a.length;e--;){if(l(a[e]-b)<=c)return a[e]}else{a=+a;e=b%a;if(e<c)return b-e;if(e>a-c)return b-e+a}return b};f.setWindow=function(a){J=a;G=J.document};var Ea=function(a){if(f.vml){var b=/^\s+|\s+$/g,c;try{var e=new ActiveXObject("htmlfile");e.write("<body>");e.close();c=e.body}catch(g){c=createPopup().document.body}var d=c.createTextRange();Ea=C(function(m){try{c.style.color=x(m).replace(b,"");var n=d.queryCommandValue("ForeColor");
return"#"+("000000"+((n&255)<<16|n&65280|(n&16711680)>>>16)[W](16)).slice(-6)}catch(o){return"none"}})}else{var j=G.createElement("i");j.title="Rapha\u00ebl Colour Picker";j.style.display="none";G.body.appendChild(j);Ea=C(function(m){j.style.color=m;return G.defaultView.getComputedStyle(j,"").getPropertyValue("color")})}return Ea(a)},Za=function(){return"hsb("+[this.h,this.s,this.b]+")"},zb=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ab=function(){return this.hex};f.hsb2rgb=function(a,b,c,
e){if(f.is(a,"object")&&"h"in a&&"s"in a&&"b"in a){c=a.b;b=a.s;a=a.h;e=a.o}return f.hsl2rgb(a,b,c/2,e)};f.hsl2rgb=function(a,b,c,e){if(f.is(a,"object")&&"h"in a&&"s"in a&&"l"in a){c=a.l;b=a.s;a=a.h}if(a>1||b>1||c>1){a/=360;b/=100;c/=100}var g={},d=["r","g","b"],j;if(b){c<0.5?j=c*(1+b):j=c+b-c*b;b=2*c-j;for(var m=0;m<3;m++){c=a+1/3*-(m-1);c<0&&c++;c>1&&c--;c*6<1?g[d[m]]=b+(j-b)*6*c:c*2<1?g[d[m]]=j:c*3<2?g[d[m]]=b+(j-b)*(2/3-c)*6:g[d[m]]=b}}else g={r:c,g:c,b:c};g.r*=255;g.g*=255;g.b*=255;g.hex="#"+
(16777216|g.b|g.g<<8|g.r<<16).toString(16).slice(1);f.is(e,"finite")&&(g.opacity=e);g.toString=Ab;return g};f.rgb2hsb=function(a,b,c){if(b==null&&f.is(a,"object")&&"r"in a&&"g"in a&&"b"in a){c=a.b;b=a.g;a=a.r}if(b==null&&f.is(a,"string")){c=f.getRGB(a);a=c.r;b=c.g;c=c.b}if(a>1||b>1||c>1){a/=255;b/=255;c/=255}var e=E(a,b,c),g=h(a,b,c),d;if(g==e)return{h:0,s:0,b:e,toString:Za};g=e-g;a==e?d=(b-c)/g:b==e?d=2+(c-a)/g:d=4+(a-b)/g;d/=6;d<0&&d++;d>1&&d--;return{h:d,s:g/e,b:e,toString:Za}};f.rgb2hsl=function(a,
b,c){if(b==null&&f.is(a,"object")&&"r"in a&&"g"in a&&"b"in a){c=a.b;b=a.g;a=a.r}if(b==null&&f.is(a,"string")){c=f.getRGB(a);a=c.r;b=c.g;c=c.b}if(a>1||b>1||c>1){a/=255;b/=255;c/=255}var e=E(a,b,c),g=h(a,b,c),d,j=(e+g)/2;if(g==e)a={h:0,s:0,l:j};else{var m=e-g;a==e?d=(b-c)/m:b==e?d=2+(c-a)/m:d=4+(a-b)/m;d/=6;d<0&&d++;d>1&&d--;a={h:d,s:j<0.5?m/(e+g):m/(2-e-g),l:j}}a.toString=zb;return a};f._path2string=function(){return this.join(",").replace(vb,"$1")};f.getRGB=C(function(a){if(!a||(a=x(a)).indexOf("-")+
1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if(a=="none")return{r:-1,g:-1,b:-1,hex:"none"};!(ub[p](a.toLowerCase().substring(0,2))||a.charAt()=="#")&&(a=Ea(a));var b,c,e,g,d;if(a=a.match(ka)){if(a[2]){e=ma(a[2].substring(5),16);c=ma(a[2].substring(3,5),16);b=ma(a[2].substring(1,3),16)}if(a[3]){e=ma((d=a[3].charAt(3))+d,16);c=ma((d=a[3].charAt(2))+d,16);b=ma((d=a[3].charAt(1))+d,16)}if(a[4]){d=a[4].split(Oa);b=U(d[0]);d[0].slice(-1)=="%"&&(b*=2.55);c=U(d[1]);d[1].slice(-1)=="%"&&(c*=2.55);e=U(d[2]);
d[2].slice(-1)=="%"&&(e*=2.55);a[1].toLowerCase().slice(0,4)=="rgba"&&(g=U(d[3]));d[3]&&d[3].slice(-1)=="%"&&(g/=100)}if(a[5]){d=a[5].split(Oa);b=U(d[0]);d[0].slice(-1)=="%"&&(b*=2.55);c=U(d[1]);d[1].slice(-1)=="%"&&(c*=2.55);e=U(d[2]);d[2].slice(-1)=="%"&&(e*=2.55);(d[0].slice(-3)=="deg"||d[0].slice(-1)=="\u00b0")&&(b/=360);a[1].toLowerCase().slice(0,4)=="hsba"&&(g=U(d[3]));d[3]&&d[3].slice(-1)=="%"&&(g/=100);return f.hsb2rgb(b,c,e,g)}if(a[6]){d=a[6].split(Oa);b=U(d[0]);d[0].slice(-1)=="%"&&(b*=
2.55);c=U(d[1]);d[1].slice(-1)=="%"&&(c*=2.55);e=U(d[2]);d[2].slice(-1)=="%"&&(e*=2.55);(d[0].slice(-3)=="deg"||d[0].slice(-1)=="\u00b0")&&(b/=360);a[1].toLowerCase().slice(0,4)=="hsla"&&(g=U(d[3]));d[3]&&d[3].slice(-1)=="%"&&(g/=100);return f.hsl2rgb(b,c,e,g)}a={r:b,g:c,b:e};a.hex="#"+(16777216|e|c<<8|b<<16).toString(16).slice(1);f.is(g,"finite")&&(a.opacity=g);return a}return{r:-1,g:-1,b:-1,hex:"none",error:1}},f);f.getColor=function(a){a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75};
var b=this.hsb2rgb(a.h,a.s,a.b);a.h+=0.075;if(a.h>1){a.h=0;a.s-=0.2;a.s<=0&&(this.getColor.start={h:0,s:1,b:a.b})}return b.hex};f.getColor.reset=function(){delete this.start};f.parsePathString=C(function(a){if(!a)return null;var b={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=[];f.is(a,Q)&&f.is(a[0],Q)&&(c=Fa(a));c[k]||x(a).replace(wb,function(e,g,d){var j=[];e=u.call(g);d.replace(xb,function(m,n){n&&j[X](+n)});if(e=="m"&&j[k]>2){c[X]([g].concat(j.splice(0,2)));e="l";g=g=="m"?"l":"L"}for(;j[k]>=b[e];){c[X]([g].concat(j.splice(0,
b[e])));if(!b[e])break}});c[W]=f._path2string;return c});f.findDotsAtSegment=function(a,b,c,e,g,d,j,m,n){var o=1-n,F=q(o,3)*a+q(o,2)*3*n*c+o*3*n*n*g+q(n,3)*j;o=q(o,3)*b+q(o,2)*3*n*e+o*3*n*n*d+q(n,3)*m;var I=a+2*n*(c-a)+n*n*(g-2*c+a),M=b+2*n*(e-b)+n*n*(d-2*e+b),R=c+2*n*(g-c)+n*n*(j-2*g+c),$=e+2*n*(d-e)+n*n*(m-2*d+e);a=(1-n)*a+n*c;b=(1-n)*b+n*e;g=(1-n)*g+n*j;d=(1-n)*d+n*m;m=90-D.atan((I-R)/(M-$))*180/z;(I>R||M<$)&&(m+=180);return{x:F,y:o,m:{x:I,y:M},n:{x:R,y:$},start:{x:a,y:b},end:{x:g,y:d},alpha:m}};
var Ha=C(function(a){if(!a)return{x:0,y:0,width:0,height:0};a=Ga(a);for(var b=0,c=0,e=[],g=[],d,j=0,m=a[k];j<m;j++){d=a[j];if(d[0]=="M"){b=d[1];c=d[2];e[X](b);g[X](c)}else{b=Bb(b,c,d[1],d[2],d[3],d[4],d[5],d[6]);e=e.concat(b.min.x,b.max.x);g=g.concat(b.min.y,b.max.y);b=d[5];c=d[6]}}a=h[K](0,e);d=h[K](0,g);return{x:a,y:d,width:E[K](0,e)-a,height:E[K](0,g)-d}}),Fa=function(a){var b=[];if(!f.is(a,Q)||!f.is(a&&a[0],Q))a=f.parsePathString(a);for(var c=0,e=a[k];c<e;c++){b[c]=[];for(var g=0,d=a[c][k];g<
d;g++)b[c][g]=a[c][g]}b[W]=f._path2string;return b},Pa=C(function(a){if(!f.is(a,Q)||!f.is(a&&a[0],Q))a=f.parsePathString(a);var b=[],c=0,e=0,g=0,d=0,j=0;if(a[0][0]=="M"){c=a[0][1];e=a[0][2];g=c;d=e;j++;b[X](["M",c,e])}for(var m=a[k];j<m;j++){var n=b[j]=[],o=a[j];if(o[0]!=u.call(o[0])){n[0]=u.call(o[0]);switch(n[0]){case "a":n[1]=o[1];n[2]=o[2];n[3]=o[3];n[4]=o[4];n[5]=o[5];n[6]=+(o[6]-c).toFixed(3);n[7]=+(o[7]-e).toFixed(3);break;case "v":n[1]=+(o[1]-e).toFixed(3);break;case "m":g=o[1];d=o[2];default:for(var F=
1,I=o[k];F<I;F++)n[F]=+(o[F]-(F%2?c:e)).toFixed(3)}}else{b[j]=[];if(o[0]=="m"){g=o[1]+c;d=o[2]+e}n=0;for(F=o[k];n<F;n++)b[j][n]=o[n]}o=b[j][k];switch(b[j][0]){case "z":c=g;e=d;break;case "h":c+=+b[j][o-1];break;case "v":e+=+b[j][o-1];break;default:c+=+b[j][o-2];e+=+b[j][o-1]}}b[W]=f._path2string;return b},0,Fa),za=C(function(a){if(!f.is(a,Q)||!f.is(a&&a[0],Q))a=f.parsePathString(a);var b=[],c=0,e=0,g=0,d=0,j=0;if(a[0][0]=="M"){c=+a[0][1];e=+a[0][2];g=c;d=e;j++;b[0]=["M",c,e]}for(var m=a[k];j<m;j++){var n=
b[j]=[],o=a[j];if(o[0]!=va.call(o[0])){n[0]=va.call(o[0]);switch(n[0]){case "A":n[1]=o[1];n[2]=o[2];n[3]=o[3];n[4]=o[4];n[5]=o[5];n[6]=+(o[6]+c);n[7]=+(o[7]+e);break;case "V":n[1]=+o[1]+e;break;case "H":n[1]=+o[1]+c;break;case "M":g=+o[1]+c;d=+o[2]+e;default:for(var F=1,I=o[k];F<I;F++)n[F]=+o[F]+(F%2?c:e)}}else{F=0;for(I=o[k];F<I;F++)b[j][F]=o[F]}switch(n[0]){case "Z":c=g;e=d;break;case "H":c=n[1];break;case "V":e=n[1];break;case "M":g=b[j][b[j][k]-2];d=b[j][b[j][k]-1];default:c=b[j][b[j][k]-2];e=
b[j][b[j][k]-1]}}b[W]=f._path2string;return b},null,Fa),$a=function(a,b,c,e,g,d){var j=1/3,m=2/3;return[j*a+m*c,j*b+m*e,j*g+m*c,j*d+m*e,g,d]},ab=function(a,b,c,e,g,d,j,m,n,o){var F=z*120/180,I=z/180*(+g||0),M=[],R,$=C(function(na,oa,la){var xa=na*D.cos(la)-oa*D.sin(la);na=na*D.sin(la)+oa*D.cos(la);return{x:xa,y:na}});if(o){V=o[0];R=o[1];d=o[2];P=o[3]}else{R=$(a,b,-I);a=R.x;b=R.y;R=$(m,n,-I);m=R.x;n=R.y;D.cos(z/180*g);D.sin(z/180*g);R=(a-m)/2;V=(b-n)/2;P=R*R/(c*c)+V*V/(e*e);if(P>1){P=D.sqrt(P);c*=
P;e*=P}P=c*c;var T=e*e;P=(d==j?-1:1)*D.sqrt(l((P*T-P*V*V-T*R*R)/(P*V*V+T*R*R)));d=P*c*V/e+(a+m)/2;var P=P*-e*R/c+(b+n)/2,V=D.asin(((b-P)/e).toFixed(9));R=D.asin(((n-P)/e).toFixed(9));V=a<d?z-V:V;R=m<d?z-R:R;V<0&&(V=z*2+V);R<0&&(R=z*2+R);j&&V>R&&(V-=z*2);!j&&R>V&&(R-=z*2)}if(l(R-V)>F){M=R;T=m;var ia=n;R=V+F*(j&&R>V?1:-1);m=d+c*D.cos(R);n=P+e*D.sin(R);M=ab(m,n,c,e,g,0,j,T,ia,[R,M,d,P])}d=R-V;g=D.cos(V);F=D.sin(V);j=D.cos(R);R=D.sin(R);d=D.tan(d/4);c=4/3*c*d;d*=4/3*e;e=[a,b];a=[a+c*F,b-d*g];b=[m+c*R,
n-d*j];m=[m,n];a[0]=2*e[0]-a[0];a[1]=2*e[1]-a[1];if(o)return[a,b,m].concat(M);M=[a,b,m].concat(M)[A]().split(",");o=[];m=0;for(n=M[k];m<n;m++)o[m]=m%2?$(M[m-1],M[m],I).y:$(M[m],M[m+1],I).x;return o},Ia=function(a,b,c,e,g,d,j,m,n){var o=1-n;return{x:q(o,3)*a+q(o,2)*3*n*c+o*3*n*n*g+q(n,3)*j,y:q(o,3)*b+q(o,2)*3*n*e+o*3*n*n*d+q(n,3)*m}},Bb=C(function(a,b,c,e,g,d,j,m){var n=g-2*c+a-(j-2*g+c),o=2*(c-a)-2*(g-c),F=a-c,I=(-o+D.sqrt(o*o-4*n*F))/2/n;n=(-o-D.sqrt(o*o-4*n*F))/2/n;var M=[b,m],R=[a,j];l(I)>"1e12"&&
(I=0.5);l(n)>"1e12"&&(n=0.5);if(I>0&&I<1){I=Ia(a,b,c,e,g,d,j,m,I);R[X](I.x);M[X](I.y)}if(n>0&&n<1){I=Ia(a,b,c,e,g,d,j,m,n);R[X](I.x);M[X](I.y)}n=d-2*e+b-(m-2*d+e);o=2*(e-b)-2*(d-e);F=b-e;I=(-o+D.sqrt(o*o-4*n*F))/2/n;n=(-o-D.sqrt(o*o-4*n*F))/2/n;l(I)>"1e12"&&(I=0.5);l(n)>"1e12"&&(n=0.5);if(I>0&&I<1){I=Ia(a,b,c,e,g,d,j,m,I);R[X](I.x);M[X](I.y)}if(n>0&&n<1){I=Ia(a,b,c,e,g,d,j,m,n);R[X](I.x);M[X](I.y)}return{min:{x:h[K](0,R),y:h[K](0,M)},max:{x:E[K](0,R),y:E[K](0,M)}}}),Ga=C(function(a,b){var c=za(a),
e=b&&za(b),g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},d={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},j=function(T,P){var V,ia;if(!T)return["C",P.x,P.y,P.x,P.y,P.x,P.y];!(T[0]in{T:1,Q:1})&&(P.qx=P.qy=null);switch(T[0]){case "M":P.X=T[1];P.Y=T[2];break;case "A":T=["C"].concat(ab[K](0,[P.x,P.y].concat(T.slice(1))));break;case "S":V=P.x+(P.x-(P.bx||P.x));ia=P.y+(P.y-(P.by||P.y));T=["C",V,ia].concat(T.slice(1));break;case "T":P.qx=P.x+(P.x-(P.qx||P.x));P.qy=P.y+(P.y-(P.qy||P.y));T=["C"].concat($a(P.x,
P.y,P.qx,P.qy,T[1],T[2]));break;case "Q":P.qx=T[1];P.qy=T[2];T=["C"].concat($a(P.x,P.y,T[1],T[2],T[3],T[4]));break;case "L":T=["C"].concat([P.x,P.y,T[1],T[2],T[1],T[2]]);break;case "H":T=["C"].concat([P.x,P.y,T[1],P.y,T[1],P.y]);break;case "V":T=["C"].concat([P.x,P.y,P.x,T[1],P.x,T[1]]);break;case "Z":T=["C"].concat([P.x,P.y,P.X,P.Y,P.X,P.Y])}return T},m=function(T,P){if(T[P][k]>7){T[P].shift();for(var V=T[P];V[k];)T.splice(P++,0,["C"].concat(V.splice(0,6)));T.splice(P,1);F=E(c[k],e&&e[k]||0)}},n=
function(T,P,V,ia,na){if(T&&P&&T[na][0]=="M"&&P[na][0]!="M"){P.splice(na,0,["M",ia.x,ia.y]);V.bx=0;V.by=0;V.x=T[na][1];V.y=T[na][2];F=E(c[k],e&&e[k]||0)}},o=0,F=E(c[k],e&&e[k]||0);for(;o<F;o++){c[o]=j(c[o],g);m(c,o);e&&(e[o]=j(e[o],d));e&&m(e,o);n(c,e,g,d,o);n(e,c,d,g,o);var I=c[o],M=e&&e[o],R=I[k],$=e&&M[k];g.x=I[R-2];g.y=I[R-1];g.bx=U(I[R-4])||g.x;g.by=U(I[R-3])||g.y;d.bx=e&&(U(M[$-4])||d.x);d.by=e&&(U(M[$-3])||d.y);d.x=e&&M[$-2];d.y=e&&M[$-1]}return e?[c,e]:c},null,Fa),bb=C(function(a){for(var b=
[],c=0,e=a[k];c<e;c++){var g={},d=a[c].match(/^([^:]*):?([\d\.]*)/);g.color=f.getRGB(d[1]);if(g.color.error)return null;g.color=g.color.hex;d[2]&&(g.offset=d[2]+"%");b[X](g)}c=1;for(e=b[k]-1;c<e;c++)if(!b[c].offset){a=U(b[c-1].offset||0);d=0;for(g=c+1;g<e;g++)if(b[g].offset){d=b[g].offset;break}if(!d){d=100;g=e}d=U(d);for(d=(d-a)/(g-c+1);c<g;c++){a+=d;b[c].offset=a+"%"}}return b}),cb=function(a,b,c,e){if(f.is(a,"string")||f.is(a,"object")){a=f.is(a,"string")?G.getElementById(a):a;if(a.tagName)return b==
null?{container:a,width:a.style.pixelWidth||a.offsetWidth,height:a.style.pixelHeight||a.offsetHeight}:{container:a,width:b,height:c}}else return{container:1,x:a,y:b,width:c,height:e}},Qa=function(a,b){var c=this,e;for(e in b)if(b[p](e)&&!(e in a))switch(typeof b[e]){case "function":(function(g){a[e]=a===c?g:function(){return g[K](c,arguments)}})(b[e]);break;case "object":a[e]=a[e]||{};Qa.call(this,a[e],b[e]);break;default:a[e]=b[e]}},ya=function(a,b){a==b.top&&(b.top=a.prev);a==b.bottom&&(b.bottom=
a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)},db=function(a,b){if(b.top!==a){ya(a,b);a.next=null;a.prev=b.top;b.top.next=a;b.top=a}},eb=function(a,b){if(b.bottom!==a){ya(a,b);a.next=b.bottom;a.prev=null;b.bottom.prev=a;b.bottom=a}},fb=function(a,b,c){ya(a,c);b==c.top&&(c.top=a);b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a},gb=function(a,b,c){ya(a,c);b==c.bottom&&(c.bottom=a);b.prev&&(b.prev.next=a);a.prev=b.prev;b.prev=a;a.next=b},hb=function(a){return function(){throw Error("Rapha\u00ebl: you are calling to method \u201c"+
a+"\u201d of removed object");}};f.pathToRelative=Pa;if(f.svg){H.svgns="http://www.w3.org/2000/svg";H.xlink="http://www.w3.org/1999/xlink";Y=function(a){return+a+(~~a===a)*0.5};var Z=function(a,b){if(b)for(var c in b)b[p](c)&&a.setAttribute(c,x(b[c]));else{a=G.createElementNS(H.svgns,a);a.style.webkitTapHighlightColor="rgba(0,0,0,0)";return a}};f[W]=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var ib=function(a,b){var c=Z("path");b.canvas&&b.canvas.appendChild(c);
c=new ga(c,b);c.type="path";wa(c,{fill:"none",stroke:"#000",path:a});return c},Aa=function(a,b,c){var e="linear",g=0.5,d=0.5,j=a.style;b=x(b).replace(Ya,function(F,I,M){e="radial";if(I&&M){g=U(I);d=U(M);F=(d>0.5)*2-1;q(g-0.5,2)+q(d-0.5,2)>0.25&&(d=D.sqrt(0.25-q(g-0.5,2))*F+0.5)&&d!=0.5&&(d=d.toFixed(5)-1.0E-5*F)}return""});b=b.split(/\s*\-\s*/);if(e=="linear"){var m=b.shift();m=-U(m);if(isNaN(m))return null;m=[0,0,D.cos(m*z/180),D.sin(m*z/180)];var n=1/(E(l(m[2]),l(m[3]))||1);m[2]*=n;m[3]*=n;if(m[2]<
0){m[0]=-m[2];m[2]=0}if(m[3]<0){m[1]=-m[3];m[3]=0}}b=bb(b);if(!b)return null;n=a.getAttribute("fill");(n=n.match(/^url\(#(.*)\)$/))&&c.defs.removeChild(G.getElementById(n[1]));n=Z(e+"Gradient");n.id=B();Z(n,e=="radial"?{fx:g,fy:d}:{x1:m[0],y1:m[1],x2:m[2],y2:m[3]});c.defs.appendChild(n);c=0;for(m=b[k];c<m;c++){var o=Z("stop");Z(o,{offset:b[c].offset?b[c].offset:c?"100%":"0%","stop-color":b[c].color||"#fff"});n.appendChild(o)}Z(a,{fill:"url(#"+n.id+")",opacity:1,"fill-opacity":1});j.fill="";j.opacity=
1;return j.fillOpacity=1},Ra=function(a){var b=a.getBBox();Z(a.pattern,{patternTransform:f.format("translate({0},{1})",b.x,b.y)})},wa=function(a,b){var c={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},e=a.node,g=a.attrs,d=a.rotate(),j=function($,T){if(T=c[u.call(T)]){for(var P=$.attrs["stroke-width"]||"1",V={round:P,square:P,butt:0}[$.attrs["stroke-linecap"]||b["stroke-linecap"]]||0,ia=
[],na=T[k];na--;)ia[na]=T[na]*P+(na%2?1:-1)*V;Z(e,{"stroke-dasharray":ia[A](",")})}};b[p]("rotation")&&(d=b.rotation);var m=x(d).split(S);if(m.length-1){m[1]=+m[1];m[2]=+m[2]}else m=null;U(d)&&a.rotate(0,true);for(var n in b)if(b[p](n))if(Da[p](n)){var o=b[n];g[n]=o;switch(n){case "blur":a.blur(o);break;case "rotation":a.rotate(o,true);break;case "href":case "title":case "target":var F=e.parentNode;if(u.call(F.tagName)!="a"){var I=Z("a");F.insertBefore(I,e);I.appendChild(e);F=I}n=="target"&&o=="blank"?
F.setAttributeNS(a.paper.xlink,"show","new"):F.setAttributeNS(a.paper.xlink,n,o);break;case "cursor":e.style.cursor=o;break;case "clip-rect":F=x(o).split(S);if(F[k]==4){a.clip&&a.clip.parentNode.parentNode.removeChild(a.clip.parentNode);var M=Z("clipPath");I=Z("rect");M.id=B();Z(I,{x:F[0],y:F[1],width:F[2],height:F[3]});M.appendChild(I);a.paper.defs.appendChild(M);Z(e,{"clip-path":"url(#"+M.id+")"});a.clip=I}if(!o){(o=G.getElementById(e.getAttribute("clip-path").replace(/(^url\(#|\)$)/g,"")))&&o.parentNode.removeChild(o);
Z(e,{"clip-path":""});delete a.clip}break;case "path":a.type=="path"&&Z(e,{d:o?g.path=za(o):"M0,0"});break;case "width":e.setAttribute(n,o);if(g.fx){n="x";o=g.x}else break;case "x":g.fx&&(o=-g.x-(g.width||0));case "rx":if(n=="rx"&&a.type=="rect")break;case "cx":m&&(n=="x"||n=="cx")&&(m[1]+=o-g[n]);e.setAttribute(n,o);a.pattern&&Ra(a);break;case "height":e.setAttribute(n,o);if(g.fy){n="y";o=g.y}else break;case "y":g.fy&&(o=-g.y-(g.height||0));case "ry":if(n=="ry"&&a.type=="rect")break;case "cy":m&&
(n=="y"||n=="cy")&&(m[2]+=o-g[n]);e.setAttribute(n,o);a.pattern&&Ra(a);break;case "r":a.type=="rect"?Z(e,{rx:o,ry:o}):e.setAttribute(n,o);break;case "src":a.type=="image"&&e.setAttributeNS(a.paper.xlink,"href",o);break;case "stroke-width":e.style.strokeWidth=o;e.setAttribute(n,o);g["stroke-dasharray"]&&j(a,g["stroke-dasharray"]);break;case "stroke-dasharray":j(a,o);break;case "translation":o=x(o).split(S);o[0]=+o[0]||0;o[1]=+o[1]||0;if(m){m[1]+=o[0];m[2]+=o[1]}Ja.call(a,o[0],o[1]);break;case "scale":o=
x(o).split(S);a.scale(+o[0]||1,+o[1]||+o[0]||1,isNaN(U(o[2]))?null:+o[2],isNaN(U(o[3]))?null:+o[3]);break;case "fill":if(F=x(o).match(ca)){M=Z("pattern");var R=Z("image");M.id=B();Z(M,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});Z(R,{x:0,y:0});R.setAttributeNS(a.paper.xlink,"href",F[1]);M.appendChild(R);o=G.createElement("img");o.style.cssText="position:absolute;left:-9999em;top-9999em";o.onload=function(){Z(M,{width:this.offsetWidth,height:this.offsetHeight});Z(R,{width:this.offsetWidth,
height:this.offsetHeight});G.body.removeChild(this);a.paper.safari()};G.body.appendChild(o);o.src=F[1];a.paper.defs.appendChild(M);e.style.fill="url(#"+M.id+")";Z(e,{fill:"url(#"+M.id+")"});a.pattern=M;a.pattern&&Ra(a);break}F=f.getRGB(o);if(F.error)if(({circle:1,ellipse:1}[p](a.type)||x(o).charAt()!="r")&&Aa(e,o,a.paper)){g.gradient=o;g.fill="none";break}else{delete b.gradient;delete g.gradient;!f.is(g.opacity,"undefined")&&f.is(b.opacity,"undefined")&&Z(e,{opacity:g.opacity});!f.is(g["fill-opacity"],
"undefined")&&f.is(b["fill-opacity"],"undefined")&&Z(e,{"fill-opacity":g["fill-opacity"]})}F[p]("opacity")&&Z(e,{"fill-opacity":F.opacity>1?F.opacity/100:F.opacity});case "stroke":F=f.getRGB(o);e.setAttribute(n,F.hex);n=="stroke"&&F[p]("opacity")&&Z(e,{"stroke-opacity":F.opacity>1?F.opacity/100:F.opacity});break;case "gradient":(({circle:1,ellipse:1})[p](a.type)||x(o).charAt()!="r")&&Aa(e,o,a.paper);break;case "opacity":g.gradient&&!g[p]("stroke-opacity")&&Z(e,{"stroke-opacity":o>1?o/100:o});case "fill-opacity":if(g.gradient){if(F=
G.getElementById(e.getAttribute("fill").replace(/^url\(#|\)$/g,""))){F=F.getElementsByTagName("stop");F[F[k]-1].setAttribute("stop-opacity",o)}break}default:n=="font-size"&&(o=ma(o,10)+"px");F=n.replace(/(\-.)/g,function($){return va.call($.substring(1))});e.style[F]=o;e.setAttribute(n,o)}}Cb(a,b);m?a.rotate(m.join(ba)):U(d)&&a.rotate(d,true)},Cb=function(a,b){if(!(a.type!="text"||!(b[p]("text")||b[p]("font")||b[p]("font-size")||b[p]("x")||b[p]("y")))){var c=a.attrs,e=a.node,g=e.firstChild?ma(G.defaultView.getComputedStyle(e.firstChild,
"").getPropertyValue("font-size"),10):10;if(b[p]("text")){for(c.text=b.text;e.firstChild;)e.removeChild(e.firstChild);for(var d=x(b.text).split("\n"),j=0,m=d[k];j<m;j++)if(d[j]){var n=Z("tspan");j&&Z(n,{dy:g*1.2,x:c.x});n.appendChild(G.createTextNode(d[j]));e.appendChild(n)}}else{d=e.getElementsByTagName("tspan");j=0;for(m=d[k];j<m;j++)j&&Z(d[j],{dy:g*1.2,x:c.x})}Z(e,{y:c.y});g=a.getBBox();(g=c.y-(g.y+g.height/2))&&f.is(g,"finite")&&Z(e,{y:c.y+g})}},ga=function(a,b){this[0]=a;this.id=f._oid++;this.node=
a;a.raphael=this;this.paper=b;this.attrs=this.attrs||{};this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);(this.prev=b.top)&&(b.top.next=this);b.top=this;this.next=null},ea=ga[y];ga[y].rotate=function(a,b,c){if(this.removed)return this;if(a==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][A](ba);return this._.rt.deg}var e=this.getBBox();a=x(a).split(S);if(a[k]-1){b=U(a[1]);c=U(a[2])}a=U(a[0]);b!=null&&b!==false?this._.rt.deg=
a:this._.rt.deg+=a;c==null&&(b=null);this._.rt.cx=b;this._.rt.cy=c;b=b==null?e.x+e.width/2:b;c=c==null?e.y+e.height/2:c;if(this._.rt.deg){this.transformations[0]=f.format("rotate({0} {1} {2})",this._.rt.deg,b,c);this.clip&&Z(this.clip,{transform:f.format("rotate({0} {1} {2})",-this._.rt.deg,b,c)})}else{this.transformations[0]="";this.clip&&Z(this.clip,{transform:""})}Z(this.node,{transform:this.transformations[A](ba)});return this};ga[y].hide=function(){!this.removed&&(this.node.style.display="none");
return this};ga[y].show=function(){!this.removed&&(this.node.style.display="");return this};ga[y].remove=function(){if(!this.removed){ya(this,this.paper);this.node.parentNode.removeChild(this.node);for(var a in this)delete this[a];this.removed=true}};ga[y].getBBox=function(){if(this.removed)return this;if(this.type=="path")return Ha(this.attrs.path);if(this.node.style.display=="none"){this.show();var a=true}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}if(this.type=="text"){b={x:b.x,
y:Infinity,width:0,height:0};for(var e=0,g=this.node.getNumberOfChars();e<g;e++){var d=this.node.getExtentOfChar(e);d.y<b.y&&(b.y=d.y);d.y+d.height-b.y>b.height&&(b.height=d.y+d.height-b.y);d.x+d.width-b.x>b.width&&(b.width=d.x+d.width-b.x)}}a&&this.hide();return b};ga[y].attr=function(a,b){if(this.removed)return this;if(a==null){var c={},e;for(e in this.attrs)this.attrs[p](e)&&(c[e]=this.attrs[e]);this._.rt.deg&&(c.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(c.scale=this.scale());c.gradient&&
c.fill=="none"&&(c.fill=c.gradient)&&delete c.gradient;return c}if(b==null&&f.is(a,"string")){if(a=="translation")return Ja.call(this);if(a=="rotation")return this.rotate();if(a=="scale")return this.scale();if(a=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[a]}if(b==null&&f.is(a,Q)){e={};c=0;for(var g=a.length;c<g;c++)e[a[c]]=this.attr(a[c]);return e}if(b!=null){c={};c[a]=b}else a!=null&&f.is(a,"object")&&(c=a);for(g in this.paper.customAttributes)if(this.paper.customAttributes[p](g)&&
c[p](g)&&f.is(this.paper.customAttributes[g],"function")){e=this.paper.customAttributes[g].apply(this,[].concat(c[g]));this.attrs[g]=c[g];for(var d in e)e[p](d)&&(c[d]=e[d])}wa(this,c);return this};ga[y].toFront=function(){if(this.removed)return this;this.node.parentNode.appendChild(this.node);var a=this.paper;a.top!=this&&db(this,a);return this};ga[y].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);
eb(this,this.paper)}return this};ga[y].insertAfter=function(a){if(this.removed)return this;var b=a.node||a[a.length-1].node;b.nextSibling?b.parentNode.insertBefore(this.node,b.nextSibling):b.parentNode.appendChild(this.node);fb(this,a,this.paper);return this};ga[y].insertBefore=function(a){if(this.removed)return this;var b=a.node||a[0].node;b.parentNode.insertBefore(this.node,b);gb(this,a,this.paper);return this};ga[y].blur=function(a){if(+a!==0){var b=Z("filter"),c=Z("feGaussianBlur");this.attrs.blur=
a;b.id=B();Z(c,{stdDeviation:+a||1.5});b.appendChild(c);this.paper.defs.appendChild(b);this._blur=b;Z(this.node,{filter:"url(#"+b.id+")"})}else{if(this._blur){this._blur.parentNode.removeChild(this._blur);delete this._blur;delete this.attrs.blur}this.node.removeAttribute("filter")}};var jb=function(a,b,c,e){var g=Z("circle");a.canvas&&a.canvas.appendChild(g);a=new ga(g,a);a.attrs={cx:b,cy:c,r:e,fill:"none",stroke:"#000"};a.type="circle";Z(g,a.attrs);return a},kb=function(a,b,c,e,g,d){var j=Z("rect");
a.canvas&&a.canvas.appendChild(j);a=new ga(j,a);a.attrs={x:b,y:c,width:e,height:g,r:d||0,rx:d||0,ry:d||0,fill:"none",stroke:"#000"};a.type="rect";Z(j,a.attrs);return a},lb=function(a,b,c,e,g){var d=Z("ellipse");a.canvas&&a.canvas.appendChild(d);a=new ga(d,a);a.attrs={cx:b,cy:c,rx:e,ry:g,fill:"none",stroke:"#000"};a.type="ellipse";Z(d,a.attrs);return a},mb=function(a,b,c,e,g,d){var j=Z("image");Z(j,{x:c,y:e,width:g,height:d,preserveAspectRatio:"none"});j.setAttributeNS(a.xlink,"href",b);a.canvas&&
a.canvas.appendChild(j);a=new ga(j,a);a.attrs={x:c,y:e,width:g,height:d,src:b};a.type="image";return a},nb=function(a,b,c,e){var g=Z("text");Z(g,{x:b,y:c,"text-anchor":"middle"});a.canvas&&a.canvas.appendChild(g);a=new ga(g,a);a.attrs={x:b,y:c,"text-anchor":"middle",text:e,font:Da.font,stroke:"none",fill:"#000"};a.type="text";wa(a,a.attrs);return a},ob=function(a,b){this.width=a||this.width;this.height=b||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);
return this},Ma=function(){var a=cb[K](0,arguments),b=a&&a.container,c=a.x,e=a.y,g=a.width;a=a.height;if(!b)throw Error("SVG container not found.");var d=Z("svg");c=c||0;e=e||0;g=g||512;a=a||342;Z(d,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:g,height:a});if(b==1){d.style.cssText="position:absolute;left:"+c+"px;top:"+e+"px";G.body.appendChild(d)}else b.firstChild?b.insertBefore(d,b.firstChild):b.appendChild(d);b=new v;b.width=g;b.height=a;b.canvas=d;Qa.call(b,b,f.fn);b.clear();return b};
H.clear=function(){for(var a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);this.bottom=this.top=null;(this.desc=Z("desc")).appendChild(G.createTextNode("Created with Rapha\u00ebl"));a.appendChild(this.desc);a.appendChild(this.defs=Z("defs"))};H.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]=hb(a)}}if(f.vml){var pb={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},Db=/([clmz]),?([^clmz]*)/gi,Eb=/ progid:\S+Blur\([^\)]+\)/g,
Fb=/-?[^,\s-]+/g,Ba=1E3+ba+1E3,Ca={path:1,rect:1},Gb=function(a){var b=/[ahqstv]/ig,c=za;x(a).match(b)&&(c=Ga);b=/[clmz]/g;if(c==za&&!x(a).match(b))return a=x(a).replace(Db,function(n,o,F){var I=[],M=u.call(o)=="m",R=pb[o];F.replace(Fb,function($){if(M&&I[k]==2){R+=I+pb[o=="m"?"l":"L"];I=[]}I[X](Y($*10))});return R+I});b=c(a);var e;a=[];for(var g=0,d=b[k];g<d;g++){c=b[g];e=u.call(b[g][0]);e=="z"&&(e="x");for(var j=1,m=c[k];j<m;j++)e+=Y(c[j]*10)+(j!=m-1?",":"");a[X](e)}return a[A](ba)};f[W]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+
this.version};ib=function(a,b){var c=pa("group");c.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";c.coordsize=b.coordsize;c.coordorigin=b.coordorigin;var e=pa("shape"),g=e.style;g.width=b.width+"px";g.height=b.height+"px";e.coordsize=Ba;e.coordorigin=b.coordorigin;c.appendChild(e);e=new ga(e,c,b);g={fill:"none",stroke:"#000"};a&&(g.path=a);e.type="path";e.path=[];e.Path="";wa(e,g);b.canvas.appendChild(c);return e};wa=function(a,b){a.attrs=a.attrs||{};var c=
a.node,e=a.attrs,g=c.style,d;d=(b.x!=e.x||b.y!=e.y||b.width!=e.width||b.height!=e.height||b.r!=e.r)&&a.type=="rect";for(var j in b)b[p](j)&&(e[j]=b[j]);if(d){e.path=qb(e.x,e.y,e.width,e.height,e.r);a.X=e.x;a.Y=e.y;a.W=e.width;a.H=e.height}b.href&&(c.href=b.href);b.title&&(c.title=b.title);b.target&&(c.target=b.target);b.cursor&&(g.cursor=b.cursor);"blur"in b&&a.blur(b.blur);if(b.path&&a.type=="path"||d)c.path=Gb(e.path);b.rotation!=null&&a.rotate(b.rotation,true);if(b.translation){d=x(b.translation).split(S);
Ja.call(a,d[0],d[1]);if(a._.rt.cx!=null){a._.rt.cx+=+d[0];a._.rt.cy+=+d[1];a.setBox(a.attrs,d[0],d[1])}}if(b.scale){d=x(b.scale).split(S);a.scale(+d[0]||1,+d[1]||+d[0]||1,+d[2]||null,+d[3]||null)}if("clip-rect"in b){d=x(b["clip-rect"]).split(S);if(d[k]==4){d[2]=+d[2]+ +d[0];d[3]=+d[3]+ +d[1];j=c.clipRect||G.createElement("div");var m=j.style,n=c.parentNode;m.clip=f.format("rect({1}px {2}px {3}px {0}px)",d);if(!c.clipRect){m.position="absolute";m.top=0;m.left=0;m.width=a.paper.width+"px";m.height=
a.paper.height+"px";n.parentNode.insertBefore(j,n);j.appendChild(n);c.clipRect=j}}b["clip-rect"]||c.clipRect&&(c.clipRect.style.clip="")}a.type=="image"&&b.src&&(c.src=b.src);if(a.type=="image"&&b.opacity){c.filterOpacity=" progid:DXImageTransform.Microsoft.Alpha(opacity="+b.opacity*100+")";g.filter=(c.filterMatrix||"")+(c.filterOpacity||"")}b.font&&(g.font=b.font);b["font-family"]&&(g.fontFamily='"'+b["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"');b["font-size"]&&(g.fontSize=b["font-size"]);
b["font-weight"]&&(g.fontWeight=b["font-weight"]);b["font-style"]&&(g.fontStyle=b["font-style"]);if(b.opacity!=null||b["stroke-width"]!=null||b.fill!=null||b.stroke!=null||b["stroke-width"]!=null||b["stroke-opacity"]!=null||b["fill-opacity"]!=null||b["stroke-dasharray"]!=null||b["stroke-miterlimit"]!=null||b["stroke-linejoin"]!=null||b["stroke-linecap"]!=null){c=a.shape||c;d=c.getElementsByTagName("fill")&&c.getElementsByTagName("fill")[0];j=false;!d&&(j=d=pa("fill"));if("fill-opacity"in b||"opacity"in
b){g=((+e["fill-opacity"]+1||2)-1)*((+e.opacity+1||2)-1)*((+f.getRGB(b.fill).o+1||2)-1);g=h(E(g,0),1);d.opacity=g}b.fill&&(d.on=true);if(d.on==null||b.fill=="none")d.on=false;if(d.on&&b.fill)if(g=b.fill.match(ca)){d.src=g[1];d.type="tile"}else{d.color=f.getRGB(b.fill).hex;d.src="";d.type="solid";if(f.getRGB(b.fill).error&&(a.type in{circle:1,ellipse:1}||x(b.fill).charAt()!="r")&&Aa(a,b.fill)){e.fill="none";e.gradient=b.fill}}j&&c.appendChild(d);d=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0];
j=false;!d&&(j=d=pa("stroke"));if(b.stroke&&b.stroke!="none"||b["stroke-width"]||b["stroke-opacity"]!=null||b["stroke-dasharray"]||b["stroke-miterlimit"]||b["stroke-linejoin"]||b["stroke-linecap"])d.on=true;(b.stroke=="none"||d.on==null||b.stroke==0||b["stroke-width"]==0)&&(d.on=false);g=f.getRGB(b.stroke);d.on&&b.stroke&&(d.color=g.hex);g=((+e["stroke-opacity"]+1||2)-1)*((+e.opacity+1||2)-1)*((+g.o+1||2)-1);m=(U(b["stroke-width"])||1)*0.75;g=h(E(g,0),1);b["stroke-width"]==null&&(m=e["stroke-width"]);
b["stroke-width"]&&(d.weight=m);m&&m<1&&(g*=m)&&(d.weight=1);d.opacity=g;b["stroke-linejoin"]&&(d.joinstyle=b["stroke-linejoin"]||"miter");d.miterlimit=b["stroke-miterlimit"]||8;b["stroke-linecap"]&&(d.endcap=b["stroke-linecap"]=="butt"?"flat":b["stroke-linecap"]=="square"?"square":"round");if(b["stroke-dasharray"]){g={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};d.dashstyle=
g[p](b["stroke-dasharray"])?g[b["stroke-dasharray"]]:""}j&&c.appendChild(d)}if(a.type=="text"){g=a.paper.span.style;e.font&&(g.font=e.font);e["font-family"]&&(g.fontFamily=e["font-family"]);e["font-size"]&&(g.fontSize=e["font-size"]);e["font-weight"]&&(g.fontWeight=e["font-weight"]);e["font-style"]&&(g.fontStyle=e["font-style"]);a.node.string&&(a.paper.span.innerHTML=x(a.node.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));a.W=e.w=a.paper.span.offsetWidth;a.H=e.h=a.paper.span.offsetHeight;
a.X=e.x;a.Y=e.y+Y(a.H/2);switch(e["text-anchor"]){case "start":a.node.style["v-text-align"]="left";a.bbx=Y(a.W/2);break;case "end":a.node.style["v-text-align"]="right";a.bbx=-Y(a.W/2);break;default:a.node.style["v-text-align"]="center"}}};Aa=function(a,b){a.attrs=a.attrs||{};var c,e="linear",g=".5 .5";a.attrs.gradient=b;b=x(b).replace(Ya,function(F,I,M){e="radial";if(I&&M){I=U(I);M=U(M);q(I-0.5,2)+q(M-0.5,2)>0.25&&(M=D.sqrt(0.25-q(I-0.5,2))*((M>0.5)*2-1)+0.5);g=I+ba+M}return""});b=b.split(/\s*\-\s*/);
if(e=="linear"){var d=b.shift();d=-U(d);if(isNaN(d))return null}var j=bb(b);if(!j)return null;a=a.shape||a.node;c=a.getElementsByTagName("fill")[0]||pa("fill");!c.parentNode&&a.appendChild(c);if(j[k]){c.on=true;c.method="none";c.color=j[0].color;c.color2=j[j[k]-1].color;for(var m=[],n=0,o=j[k];n<o;n++)j[n].offset&&m[X](j[n].offset+ba+j[n].color);c.colors&&(c.colors.value=m[k]?m[A]():"0% "+c.color);if(e=="radial"){c.type="gradientradial";c.focus="100%";c.focussize=g;c.focusposition=g}else{c.type="gradient";
c.angle=(270-d)%360}}return 1};ga=function(a,b,c){this[0]=a;this.id=f._oid++;this.node=a;a.raphael=this;this.Y=this.X=0;this.attrs={};this.Group=b;this.paper=c;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!c.bottom&&(c.bottom=this);(this.prev=c.top)&&(c.top.next=this);c.top=this;this.next=null};ea=ga[y];ea.rotate=function(a,b,c){if(this.removed)return this;if(a==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][A](ba);return this._.rt.deg}a=x(a).split(S);if(a[k]-1){b=U(a[1]);c=U(a[2])}a=
U(a[0]);b!=null?this._.rt.deg=a:this._.rt.deg+=a;c==null&&(b=null);this._.rt.cx=b;this._.rt.cy=c;this.setBox(this.attrs,b,c);this.Group.style.rotation=this._.rt.deg;return this};ea.setBox=function(a,b,c){if(this.removed)return this;var e=this.Group.style,g=this.shape&&this.shape.style||this.node.style;a=a||{};for(var d in a)a[p](d)&&(this.attrs[d]=a[d]);b=b||this._.rt.cx;c=c||this._.rt.cy;var j=this.attrs,m;switch(this.type){case "circle":a=j.cx-j.r;d=j.cy-j.r;m=j=j.r*2;break;case "ellipse":a=j.cx-
j.rx;d=j.cy-j.ry;m=j.rx*2;j=j.ry*2;break;case "image":a=+j.x;d=+j.y;m=j.width||0;j=j.height||0;break;case "text":this.textpath.v=["m",Y(j.x),", ",Y(j.y-2),"l",Y(j.x)+1,", ",Y(j.y-2)][A]("");a=j.x-Y(this.W/2);d=j.y-this.H/2;m=this.W;j=this.H;break;case "rect":case "path":if(this.attrs.path){j=Ha(this.attrs.path);a=j.x;d=j.y;m=j.width;j=j.height}else{d=a=0;m=this.paper.width;j=this.paper.height}break;default:d=a=0;m=this.paper.width;j=this.paper.height}b=(b==null?a+m/2:b)-this.paper.width/2;c=(c==null?
d+j/2:c)-this.paper.height/2;var n;e.left!=(n=b+"px")&&(e.left=n);e.top!=(n=c+"px")&&(e.top=n);this.X=Ca[p](this.type)?-b:a;this.Y=Ca[p](this.type)?-c:d;this.W=m;this.H=j;if(Ca[p](this.type)){g.left!=(n=-b*10+"px")&&(g.left=n);g.top!=(n=-c*10+"px")&&(g.top=n)}else if(this.type=="text"){g.left!=(n=-b+"px")&&(g.left=n);g.top!=(n=-c+"px")&&(g.top=n)}else{e.width!=(n=this.paper.width+"px")&&(e.width=n);e.height!=(n=this.paper.height+"px")&&(e.height=n);g.left!=(n=a-b+"px")&&(g.left=n);g.top!=(n=d-c+"px")&&
(g.top=n);g.width!=(n=m+"px")&&(g.width=n);g.height!=(n=j+"px")&&(g.height=n)}};ea.hide=function(){!this.removed&&(this.Group.style.display="none");return this};ea.show=function(){!this.removed&&(this.Group.style.display="block");return this};ea.getBBox=function(){if(this.removed)return this;if(Ca[p](this.type))return Ha(this.attrs.path);return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};ea.remove=function(){if(!this.removed){ya(this,this.paper);this.node.parentNode.removeChild(this.node);
this.Group.parentNode.removeChild(this.Group);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)delete this[a];this.removed=true}};ea.attr=function(a,b){if(this.removed)return this;if(a==null){var c={},e;for(e in this.attrs)this.attrs[p](e)&&(c[e]=this.attrs[e]);this._.rt.deg&&(c.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(c.scale=this.scale());c.gradient&&c.fill=="none"&&(c.fill=c.gradient)&&delete c.gradient;return c}if(b==null&&f.is(a,"string")){if(a=="translation")return Ja.call(this);
if(a=="rotation")return this.rotate();if(a=="scale")return this.scale();if(a=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[a]}if(this.attrs&&b==null&&f.is(a,Q)){var g={};e=0;for(c=a[k];e<c;e++)g[a[e]]=this.attr(a[e]);return g}if(b!=null){c={};c[a]=b}b==null&&f.is(a,"object")&&(c=a);if(c){for(g in this.paper.customAttributes)if(this.paper.customAttributes[p](g)&&c[p](g)&&f.is(this.paper.customAttributes[g],"function")){e=this.paper.customAttributes[g].apply(this,
[].concat(c[g]));this.attrs[g]=c[g];for(var d in e)e[p](d)&&(c[d]=e[d])}c.text&&this.type=="text"&&(this.node.string=c.text);wa(this,c);c.gradient&&({circle:1,ellipse:1}[p](this.type)||x(c.gradient).charAt()!="r")&&Aa(this,c.gradient);(!Ca[p](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};ea.toFront=function(){!this.removed&&this.Group.parentNode.appendChild(this.Group);this.paper.top!=this&&db(this,this.paper);return this};ea.toBack=function(){if(this.removed)return this;if(this.Group.parentNode.firstChild!=
this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);eb(this,this.paper)}return this};ea.insertAfter=function(a){if(this.removed)return this;a.constructor==ra&&(a=a[a.length-1]);a.Group.nextSibling?a.Group.parentNode.insertBefore(this.Group,a.Group.nextSibling):a.Group.parentNode.appendChild(this.Group);fb(this,a,this.paper);return this};ea.insertBefore=function(a){if(this.removed)return this;a.constructor==ra&&(a=a[0]);a.Group.parentNode.insertBefore(this.Group,
a.Group);gb(this,a,this.paper);return this};ea.blur=function(a){var b=this.node.runtimeStyle,c=b.filter;c=c.replace(Eb,"");if(+a!==0){this.attrs.blur=a;b.filter=c+ba+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+a||1.5)+")";b.margin=f.format("-{0}px 0 0 -{0}px",Y(+a||1.5))}else{b.filter=c;b.margin=0;delete this.attrs.blur}};jb=function(a,b,c,e){var g=pa("group"),d=pa("oval");g.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";g.coordsize=Ba;g.coordorigin=
a.coordorigin;g.appendChild(d);d=new ga(d,g,a);d.type="circle";wa(d,{stroke:"#000",fill:"none"});d.attrs.cx=b;d.attrs.cy=c;d.attrs.r=e;d.setBox({x:b-e,y:c-e,width:e*2,height:e*2});a.canvas.appendChild(g);return d};var qb=function(a,b,c,e,g){return g?f.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",a+g,b,c-g*2,g,-g,e-g*2,g*2-c,g*2-e):f.format("M{0},{1}l{2},0,0,{3},{4},0z",a,b,c,e,-c)};kb=function(a,b,c,e,g,d){var j=
qb(b,c,e,g,d);a=a.path(j);var m=a.attrs;a.X=m.x=b;a.Y=m.y=c;a.W=m.width=e;a.H=m.height=g;m.r=d;m.path=j;a.type="rect";return a};lb=function(a,b,c,e,g){var d=pa("group"),j=pa("oval");d.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";d.coordsize=Ba;d.coordorigin=a.coordorigin;d.appendChild(j);j=new ga(j,d,a);j.type="ellipse";wa(j,{stroke:"#000"});j.attrs.cx=b;j.attrs.cy=c;j.attrs.rx=e;j.attrs.ry=g;j.setBox({x:b-e,y:c-g,width:e*2,height:g*2});a.canvas.appendChild(d);
return j};mb=function(a,b,c,e,g,d){var j=pa("group"),m=pa("image");j.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";j.coordsize=Ba;j.coordorigin=a.coordorigin;m.src=b;j.appendChild(m);m=new ga(m,j,a);m.type="image";m.attrs.src=b;m.attrs.x=c;m.attrs.y=e;m.attrs.w=g;m.attrs.h=d;m.setBox({x:c,y:e,width:g,height:d});a.canvas.appendChild(j);return m};nb=function(a,b,c,e){var g=pa("group"),d=pa("shape"),j=d.style,m=pa("path"),n=pa("textpath");g.style.cssText="position:absolute;left:0;top:0;width:"+
a.width+"px;height:"+a.height+"px";g.coordsize=Ba;g.coordorigin=a.coordorigin;m.v=f.format("m{0},{1}l{2},{1}",Y(b*10),Y(c*10),Y(b*10)+1);m.textpathok=true;j.width=a.width;j.height=a.height;n.string=x(e);n.on=true;d.appendChild(n);d.appendChild(m);g.appendChild(d);j=new ga(n,g,a);j.shape=d;j.textpath=m;j.type="text";j.attrs.text=e;j.attrs.x=b;j.attrs.y=c;j.attrs.w=1;j.attrs.h=1;wa(j,{font:Da.font,stroke:"none",fill:"#000"});j.setBox();a.canvas.appendChild(g);return j};ob=function(a,b){var c=this.canvas.style;
a==+a&&(a+="px");b==+b&&(b+="px");c.width=a;c.height=b;c.clip="rect(0 "+a+" "+b+" 0)";return this};var pa;G.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!G.namespaces.rvml&&G.namespaces.add("rvml","urn:schemas-microsoft-com:vml");pa=function(a){return G.createElement("<rvml:"+a+' class="rvml">')}}catch(Nb){pa=function(a){return G.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}Ma=function(){var a=cb[K](0,arguments),b=a.container,c=a.height,e=a.width,
g=a.x;a=a.y;if(!b)throw Error("VML container not found.");var d=new v,j=d.canvas=G.createElement("div"),m=j.style;g=g||0;a=a||0;e=e||512;c=c||342;e==+e&&(e+="px");c==+c&&(c+="px");d.width=1E3;d.height=1E3;d.coordsize=1E4+ba+1E4;d.coordorigin="0 0";d.span=G.createElement("span");d.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";j.appendChild(d.span);m.cssText=f.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",
e,c);if(b==1){G.body.appendChild(j);m.left=g+"px";m.top=a+"px";m.position="absolute"}else b.firstChild?b.insertBefore(j,b.firstChild):b.appendChild(j);Qa.call(d,d,f.fn);return d};H.clear=function(){this.canvas.innerHTML="";this.span=G.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};H.remove=function(){this.canvas.parentNode.removeChild(this.canvas);
for(var a in this)this[a]=hb(a);return true}}sa=navigator.userAgent.match(/Version\\x2f(.*?)\s/);navigator.vendor=="Apple Computer, Inc."&&(sa&&sa[1]<4||navigator.platform.slice(0,2)=="iP")?H.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});J.setTimeout(function(){a.remove()})}:H.safari=function(){};var Hb=function(){this.returnValue=false},Ib=function(){return this.originalEvent.preventDefault()},Jb=function(){this.cancelBubble=true},Kb=function(){return this.originalEvent.stopPropagation()},
Lb=function(){if(G.addEventListener)return function(a,b,c,e){var g=aa&&ha[b]?ha[b]:b,d=function(j){if(aa&&ha[p](b))for(var m=0,n=j.targetTouches&&j.targetTouches.length;m<n;m++)if(j.targetTouches[m].target==a){n=j;j=j.targetTouches[m];j.originalEvent=n;j.preventDefault=Ib;j.stopPropagation=Kb;break}return c.call(e,j)};a.addEventListener(g,d,false);return function(){a.removeEventListener(g,d,false);return true}};if(G.attachEvent)return function(a,b,c,e){var g=function(d){d=d||J.event;d.preventDefault=
d.preventDefault||Hb;d.stopPropagation=d.stopPropagation||Jb;return c.call(e,d)};a.attachEvent("on"+b,g);return function(){a.detachEvent("on"+b,g);return true}}}(),ta=[],Sa=function(a){for(var b=a.clientX,c=a.clientY,e=G.documentElement.scrollTop||G.body.scrollTop,g=G.documentElement.scrollLeft||G.body.scrollLeft,d,j=ta.length;j--;){d=ta[j];if(aa)for(var m=a.touches.length,n;m--;){n=a.touches[m];if(n.identifier==d.el._drag.id){b=n.clientX;c=n.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();
break}}else a.preventDefault();b+=g;c+=e;d.move&&d.move.call(d.move_scope||d.el,b-d.el._drag.x,c-d.el._drag.y,b,c,a)}},Ta=function(a){f.unmousemove(Sa).unmouseup(Ta);for(var b=ta.length,c;b--;){c=ta[b];c.el._drag={};c.end&&c.end.call(c.end_scope||c.start_scope||c.move_scope||c.el,a)}ta=[]};for(sa=fa[k];sa--;)(function(a){f[a]=ga[y][a]=function(b,c){if(f.is(b,"function")){this.events=this.events||[];this.events.push({name:a,f:b,unbind:Lb(this.shape||this.node||G,a,b,c||this)})}return this};f["un"+
a]=ga[y]["un"+a]=function(b){for(var c=this.events,e=c[k];e--;)if(c[e].name==a&&c[e].f==b){c[e].unbind();c.splice(e,1);!c.length&&delete this.events;break}return this}})(fa[sa]);ea.hover=function(a,b,c,e){return this.mouseover(a,c).mouseout(b,e||c)};ea.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};ea.drag=function(a,b,c,e,g,d){this._drag={};this.mousedown(function(j){(j.originalEvent||j).preventDefault();var m=G.documentElement.scrollTop||G.body.scrollTop,n=G.documentElement.scrollLeft||
G.body.scrollLeft;this._drag.x=j.clientX+n;this._drag.y=j.clientY+m;this._drag.id=j.identifier;b&&b.call(g||e||this,j.clientX+n,j.clientY+m,j);!ta.length&&f.mousemove(Sa).mouseup(Ta);ta.push({el:this,move:a,end:c,move_scope:e,start_scope:g,end_scope:d})});return this};ea.undrag=function(a,b,c){for(b=ta.length;b--;)ta[b].el==this&&ta[b].move==a&&ta[b].end==c&&ta.splice(b++,1);!ta.length&&f.unmousemove(Sa).unmouseup(Ta)};H.circle=function(a,b,c){return jb(this,a||0,b||0,c||0)};H.rect=function(a,b,c,
e,g){return kb(this,a||0,b||0,c||0,e||0,g||0)};H.ellipse=function(a,b,c,e){return lb(this,a||0,b||0,c||0,e||0)};H.path=function(a){a&&!f.is(a,"string")&&!f.is(a[0],Q)&&(a+="");return ib(f.format[K](f,arguments),this)};H.image=function(a,b,c,e,g){return mb(this,a||"about:blank",b||0,c||0,e||0,g||0)};H.text=function(a,b,c){return nb(this,a||0,b||0,x(c))};H.set=function(a){arguments[k]>1&&(a=Array[y].splice.call(arguments,0,arguments[k]));return new ra(a)};H.setSize=ob;H.top=H.bottom=null;H.raphael=
f;ea.resetScale=function(){if(this.removed)return this;this._.sx=1;this._.sy=1;this.attrs.scale="1 1"};ea.scale=function(a,b,c,e){if(this.removed)return this;if(a==null&&b==null)return{x:this._.sx,y:this._.sy,toString:w};b=b||a;!+b&&(b=a);var g,d,j=this.attrs;if(a!=0){var m=this.getBBox(),n=m.x+m.width/2,o=m.y+m.height/2;g=l(a/this._.sx);d=l(b/this._.sy);c=+c||c==0?c:n;e=+e||e==0?e:o;var F=this._.sx>0,I=this._.sy>0;m=~~(a/l(a));var M=~~(b/l(b)),R=g*m,$=d*M,T=this.node.style;n=c+l(n-c)*R*(n>c==F?1:
-1);o=e+l(o-e)*$*(o>e==I?1:-1);var P=a*m>b*M?d:g;switch(this.type){case "rect":case "image":var V=j.width*g,ia=j.height*d;this.attr({height:ia,r:j.r*P,width:V,x:n-V/2,y:o-ia/2});break;case "circle":case "ellipse":this.attr({rx:j.rx*g,ry:j.ry*d,r:j.r*P,cx:n,cy:o});break;case "text":this.attr({x:n,y:o});break;case "path":P=Pa(j.path);var na=true;F=F?R:g;I=I?$:d;$=0;for(R=P[k];$<R;$++){var oa=P[$],la=va.call(oa[0]);if(!(la=="M"&&na)){na=false;if(la=="A"){oa[P[$][k]-2]*=F;oa[P[$][k]-1]*=I;oa[1]*=g;oa[2]*=
d;oa[5]=+(m+M?!!+oa[5]:!+oa[5])}else if(la=="H"){la=1;for(var xa=oa[k];la<xa;la++)oa[la]*=F}else if(la=="V"){la=1;for(xa=oa[k];la<xa;la++)oa[la]*=I}else{la=1;for(xa=oa[k];la<xa;la++)oa[la]*=la%2?F:I}}}d=Ha(P);g=n-d.x-d.width/2;d=o-d.y-d.height/2;P[0][1]+=g;P[0][2]+=d;this.attr({path:P})}if(this.type in{text:1,image:1}&&(m!=1||M!=1))if(this.transformations){this.transformations[2]="scale(".concat(m,",",M,")");this.node.setAttribute("transform",this.transformations[A](ba));g=m==-1?-j.x-(V||0):j.x;d=
M==-1?-j.y-(ia||0):j.y;this.attr({x:g,y:d});j.fx=m-1;j.fy=M-1}else{this.node.filterMatrix=" progid:DXImageTransform.Microsoft"+".Matrix(M11=".concat(m,", M12=0, M21=0, M22=",M,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')");T.filter=(this.node.filterMatrix||"")+(this.node.filterOpacity||"")}else if(this.transformations){this.transformations[2]="";this.node.setAttribute("transform",this.transformations[A](ba));j.fx=0;j.fy=0}else{this.node.filterMatrix="";T.filter=(this.node.filterMatrix||
"")+(this.node.filterOpacity||"")}j.scale=[a,b,c,e][A](ba);this._.sx=a;this._.sy=b}return this};ea.clone=function(){if(this.removed)return null;var a=this.attr();delete a.scale;delete a.translation;return this.paper[this.type]().attr(a)};var Ua={},Ka=function(a,b,c,e,g,d,j,m,n){var o=0,F=100,I=[a,b,c,e,g,d,j,m].join(),M=Ua[I],R,$;!M&&(Ua[I]=M={data:[]});M.timer&&clearTimeout(M.timer);M.timer=setTimeout(function(){delete Ua[I]},2E3);if(n!=null)F=~~Ka(a,b,c,e,g,d,j,m)*10;for(var T=0;T<F+1;T++){if(M.data[n]>
T)$=M.data[T*F];else{$=f.findDotsAtSegment(a,b,c,e,g,d,j,m,T/F);M.data[T]=$}T&&(o+=q(q(R.x-$.x,2)+q(R.y-$.y,2),0.5));if(n!=null&&o>=n)return $;R=$}if(n==null)return o};fa=function(a,b){return function(c,e,g){c=Ga(c);for(var d,j,m,n,o="",F={},I=0,M=0,R=c.length;M<R;M++){m=c[M];if(m[0]=="M"){d=+m[1];j=+m[2]}else{n=Ka(d,j,m[1],m[2],m[3],m[4],m[5],m[6]);if(I+n>e){if(b&&!F.start){d=Ka(d,j,m[1],m[2],m[3],m[4],m[5],m[6],e-I);o+=["C",d.start.x,d.start.y,d.m.x,d.m.y,d.x,d.y];if(g)return o;F.start=o;o=["M",
d.x,d.y+"C",d.n.x,d.n.y,d.end.x,d.end.y,m[5],m[6]][A]();I+=n;d=+m[5];j=+m[6];continue}if(!a&&!b){d=Ka(d,j,m[1],m[2],m[3],m[4],m[5],m[6],e-I);return{x:d.x,y:d.y,alpha:d.alpha}}}I+=n;d=+m[5];j=+m[6]}o+=m}F.end=o;d=a?I:b?F:f.findDotsAtSegment(d,j,m[1],m[2],m[3],m[4],m[5],m[6],1);d.alpha&&(d={x:d.x,y:d.y,alpha:d.alpha});return d}};var rb=fa(1),La=fa(),Va=fa(0,1);ea.getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return rb(this.attrs.path)}};
ea.getPointAtLength=function(a){if(this.type=="path")return La(this.attrs.path,a)};ea.getSubpath=function(a,b){if(this.type=="path"){if(l(this.getTotalLength()-b)<"1e-6")return Va(this.attrs.path,a).end;var c=Va(this.attrs.path,b,1);return a?Va(c,a).end:c}};f.easing_formulas={linear:function(a){return a},"<":function(a){return q(a,3)},">":function(a){return q(a-1,3)+1},"<>":function(a){a*=2;if(a<1)return q(a,3)/2;a-=2;return(q(a,3)+2)/2},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=
1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){if(a==0||a==1)return a;return q(2,-10*a)*D.sin((a-0.075)*2*z/0.3)+1},bounce:function(a){if(a<1/2.75)a*=7.5625*a;else if(a<2/2.75){a-=1.5/2.75;a=7.5625*a*a+0.75}else if(a<2.5/2.75){a-=2.25/2.75;a=7.5625*a*a+0.9375}else{a-=2.625/2.75;a=7.5625*a*a+0.984375}return a}};var ua=[],sb=function(){for(var a=+new Date,b=0;b<ua[k];b++){var c=ua[b];if(!(c.stop||c.el.removed)){var e=a-c.start,g=c.ms,d=c.easing,j=c.from,m=c.diff,n=c.to,o=c.t,F=c.el;c={};var I;
if(e<g){e=d(e/g);for(var M in j)if(j[p](M)){switch(Na[M]){case "along":I=e*g*m[M];n.back&&(I=n.len-I);d=La(n[M],I);F.translate(m.sx-m.x||0,m.sy-m.y||0);m.x=d.x;m.y=d.y;F.translate(d.x-m.sx,d.y-m.sy);n.rot&&F.rotate(m.r+d.alpha,d.x,d.y);break;case O:I=+j[M]+e*g*m[M];break;case "colour":I="rgb("+[Wa(Y(j[M].r+e*g*m[M].r)),Wa(Y(j[M].g+e*g*m[M].g)),Wa(Y(j[M].b+e*g*m[M].b))][A](",")+")";break;case "path":I=[];d=0;for(var R=j[M][k];d<R;d++){I[d]=[j[M][d][0]];for(var $=1,T=j[M][d][k];$<T;$++)I[d][$]=+j[M][d][$]+
e*g*m[M][d][$];I[d]=I[d][A](ba)}I=I[A](ba);break;case "csv":switch(M){case "translation":I=e*g*m[M][0]-o.x;d=e*g*m[M][1]-o.y;o.x+=I;o.y+=d;I=I+ba+d;break;case "rotation":I=+j[M][0]+e*g*m[M][0];j[M][1]&&(I+=","+j[M][1]+","+j[M][2]);break;case "scale":I=[+j[M][0]+e*g*m[M][0],+j[M][1]+e*g*m[M][1],2 in n[M]?n[M][2]:"",3 in n[M]?n[M][3]:""][A](ba);break;case "clip-rect":I=[];for(d=4;d--;)I[d]=+j[M][d]+e*g*m[M][d]}break;default:R=[].concat(j[M]);I=[];for(d=F.paper.customAttributes[M].length;d--;)I[d]=+R[d]+
e*g*m[M][d]}c[M]=I}F.attr(c);F._run&&F._run.call(F)}else{if(n.along){d=La(n.along,n.len*!n.back);F.translate(m.sx-(m.x||0)+d.x-m.sx,m.sy-(m.y||0)+d.y-m.sy);n.rot&&F.rotate(m.r+d.alpha,d.x,d.y)}(o.x||o.y)&&F.translate(-o.x,-o.y);n.scale&&(n.scale+="");F.attr(n);ua.splice(b--,1)}}}f.svg&&F&&F.paper&&F.paper.safari();ua[k]&&setTimeout(sb)},Mb=function(a,b,c,e,g){var d=c-e;b.timeouts.push(setTimeout(function(){f.is(g,"function")&&g.call(b);b.animate(a,d,a.easing)},e))},Wa=function(a){return E(h(a,255),
0)},Ja=function(a,b){if(a==null)return{x:this._.tx,y:this._.ty,toString:w};this._.tx+=+a;this._.ty+=+b;switch(this.type){case "circle":case "ellipse":this.attr({cx:+a+this.attrs.cx,cy:+b+this.attrs.cy});break;case "rect":case "image":case "text":this.attr({x:+a+this.attrs.x,y:+b+this.attrs.y});break;case "path":var c=Pa(this.attrs.path);c[0][1]+=+a;c[0][2]+=+b;this.attr({path:c})}return this};ea.animateWith=function(a,b,c,e,g){for(var d=0,j=ua.length;d<j;d++)ua[d].el.id==a.id&&(b.start=ua[d].start);
return this.animate(b,c,e,g)};ea.animateAlong=L();ea.animateAlongBack=L(1);ea.onAnimation=function(a){this._run=a||0;return this};ea.animate=function(a,b,c,e){var g=this;g.timeouts=g.timeouts||[];if(f.is(c,"function")||!c)e=c||null;if(g.removed){e&&e.call(g);return g}var d={},j={},m=false,n={},o;for(o in a)if(a[p](o))if(Na[p](o)||g.paper.customAttributes[p](o)){m=true;d[o]=g.attr(o);d[o]==null&&(d[o]=Da[o]);j[o]=a[o];switch(Na[o]){case "along":var F=rb(a[o]),I=La(a[o],F*!!a.back),M=g.getBBox();n[o]=
F/b;n.tx=M.x;n.ty=M.y;n.sx=I.x;n.sy=I.y;j.rot=a.rot;j.back=a.back;j.len=F;a.rot&&(n.r=U(g.rotate())||0);break;case O:n[o]=(j[o]-d[o])/b;break;case "colour":d[o]=f.getRGB(d[o]);F=f.getRGB(j[o]);n[o]={r:(F.r-d[o].r)/b,g:(F.g-d[o].g)/b,b:(F.b-d[o].b)/b};break;case "path":F=Ga(d[o],j[o]);d[o]=F[0];M=F[1];n[o]=[];F=0;for(I=d[o][k];F<I;F++){n[o][F]=[0];for(var R=1,$=d[o][F][k];R<$;R++)n[o][F][R]=(M[F][R]-d[o][F][R])/b}break;case "csv":I=x(a[o]).split(S);M=x(d[o]).split(S);switch(o){case "translation":d[o]=
[0,0];n[o]=[I[0]/b,I[1]/b];break;case "rotation":d[o]=M[1]==I[1]&&M[2]==I[2]?M:[0,I[1],I[2]];n[o]=[(I[0]-d[o][0])/b,0,0];break;case "scale":a[o]=I;d[o]=x(d[o]).split(S);n[o]=[(I[0]-d[o][0])/b,(I[1]-d[o][1])/b,0,0];break;case "clip-rect":d[o]=x(d[o]).split(S);n[o]=[];for(F=4;F--;)n[o][F]=(I[F]-d[o][F])/b}j[o]=I;break;default:I=[].concat(a[o]);M=[].concat(d[o]);n[o]=[];for(F=g.paper.customAttributes[o][k];F--;)n[o][F]=((I[F]||0)-(M[F]||0))/b}}if(m){o=f.easing_formulas[c];if(!o)if((o=x(c).match(qa))&&
o[k]==5){var T=o;o=function(ia){return s(ia,+T[1],+T[2],+T[3],+T[4],b)}}else o=function(ia){return ia};ua.push({start:a.start||+new Date,ms:b,easing:o,from:d,diff:n,to:j,el:g,t:{x:0,y:0}});f.is(e,"function")&&(g._ac=setTimeout(function(){e.call(g)},b));ua[k]==1&&setTimeout(sb)}else{c=[];var P,V;for(V in a)if(a[p](V)&&tb.test(V)){o={value:a[V]};V=="from"&&(V=0);V=="to"&&(V=100);o.key=ma(V,10);c.push(o)}c.sort(yb);c[0].key&&c.unshift({key:0,value:g.attrs});F=0;for(I=c[k];F<I;F++)Mb(c[F].value,g,b/100*
c[F].key,b/100*(c[F-1]&&c[F-1].key||0),c[F-1]&&c[F-1].value.callback);(P=c[c[k]-1].value.callback)&&g.timeouts.push(setTimeout(function(){P.call(g)},b))}return this};ea.stop=function(){for(var a=0;a<ua.length;a++)ua[a].el.id==this.id&&ua.splice(a--,1);a=0;for(ii=this.timeouts&&this.timeouts.length;a<ii;a++)clearTimeout(this.timeouts[a]);this.timeouts=[];clearTimeout(this._ac);delete this._ac;return this};ea.translate=function(a,b){return this.attr({translation:a+" "+b})};ea[W]=function(){return"Rapha\u00ebl\u2019s object"};
f.ae=ua;var ra=function(a){this.items=[];this[k]=0;this.type="set";if(a)for(var b=0,c=a[k];b<c;b++)if(a[b]&&(a[b].constructor==ga||a[b].constructor==ra)){this[this.items[k]]=this.items[this.items[k]]=a[b];this[k]++}};ra[y][X]=function(){for(var a,b,c=0,e=arguments[k];c<e;c++)if((a=arguments[c])&&(a.constructor==ga||a.constructor==ra)){b=this.items[k];this[b]=this.items[b]=a;this[k]++}return this};ra[y].pop=function(){delete this[this[k]--];return this.items.pop()};for(var Xa in ea)ea[p](Xa)&&(ra[y][Xa]=
function(a){return function(){for(var b=0,c=this.items[k];b<c;b++)this.items[b][a][K](this.items[b],arguments);return this}}(Xa));ra[y].attr=function(a,b){if(a&&f.is(a,Q)&&f.is(a[0],"object"))for(var c=0,e=a[k];c<e;c++)this.items[c].attr(a[c]);else{c=0;for(e=this.items[k];c<e;c++)this.items[c].attr(a,b)}return this};ra[y].animate=function(a,b,c,e){(f.is(c,"function")||!c)&&(e=c||null);var g=this.items[k],d=g,j,m=this,n;e&&(n=function(){!--g&&e.call(m)});c=f.is(c,"string")?c:n;for(j=this.items[--d].animate(a,
b,c,n);d--;)this.items[d]&&!this.items[d].removed&&this.items[d].animateWith(j,a,b,c,n);return this};ra[y].insertAfter=function(a){for(var b=this.items[k];b--;)this.items[b].insertAfter(a);return this};ra[y].getBBox=function(){for(var a=[],b=[],c=[],e=[],g=this.items[k];g--;){var d=this.items[g].getBBox();a[X](d.x);b[X](d.y);c[X](d.x+d.width);e[X](d.y+d.height)}a=h[K](0,a);b=h[K](0,b);return{x:a,y:b,width:E[K](0,c)-a,height:E[K](0,e)-b}};ra[y].clone=function(a){a=new ra;for(var b=0,c=this.items[k];b<
c;b++)a[X](this.items[b].clone());return a};f.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"],e;for(e in a.face)a.face[p](e)&&(b.face[e]=a.face[e]);this.fonts[c]?this.fonts[c][X](b):this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=ma(a.face["units-per-em"],10);for(var g in a.glyphs)if(a.glyphs[p](g)){c=a.glyphs[g];b.glyphs[g]={w:c.w,k:{},d:c.d&&"M"+c.d.replace(/[mlcxtrv]/g,function(j){return{l:"L",c:"C",x:"z",t:"m",
r:"l",v:"c"}[j]||"M"})+"z"};if(c.k)for(var d in c.k)c[p](d)&&(b.glyphs[g].k[d]=c.k[d])}}return a};H.getFont=function(a,b,c,e){e=e||"normal";c=c||"normal";b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400;if(f.fonts){var g=f.fonts[a];if(!g){a=RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i");for(var d in f.fonts)if(f.fonts[p](d))if(a.test(d)){g=f.fonts[d];break}}var j;if(g){d=0;for(a=g[k];d<a;d++){j=g[d];if(j.face["font-weight"]==b&&(j.face["font-style"]==c||!j.face["font-style"])&&
j.face["font-stretch"]==e)break}}return j}};H.print=function(a,b,c,e,g,d,j){d=d||"middle";j=E(h(j||0,1),-1);var m=this.set(),n=x(c).split(""),o=0;f.is(e,c)&&(e=this.getFont(e));if(e){c=(g||16)/e.face["units-per-em"];var F=e.face.bbox.split(S);g=+F[0];d=+F[1]+(d=="baseline"?F[3]-F[1]+ +e.face.descent:(F[3]-F[1])/2);F=0;for(var I=n[k];F<I;F++){var M=F&&e.glyphs[n[F-1]]||{},R=e.glyphs[n[F]];o+=F?(M.w||e.w)+(M.k&&M.k[n[F]]||0)+e.w*j:0;R&&R.d&&m[X](this.path(R.d).attr({fill:"#000",stroke:"none",translation:[o,
0]}))}m.scale(c,c,g,d).translate(a-g,b-d)}return m};f.format=function(a,b){var c=f.is(b,Q)?[0].concat(b):arguments;a&&f.is(a,"string")&&c[k]-1&&(a=a.replace(r,function(e,g){return c[++g]==null?"":c[g]}));return a||""};f.ninja=function(){i.was?J.Raphael=i.is:delete Raphael;return f};f.el=ea;f.st=ra[y];i.was?J.Raphael=f:Raphael=f})();(function(){function f(A){return(A+"").replace(aa,"")}function B(A,k,u){for(var D=A.length;D<k;D++)A=u?"0"+A:A+"0";return A}function C(A){return ha.call(A)==="[object Array]"}function w(A,k){if(A.indexOf)return A.indexOf(k);for(var u=0,D=A.length;u<D;u++)if(A[u]===k)return u;return-1}function L(A,k,u){var D=k["-"];k=k["+"];var E;switch(u){case "n -":D=" "+D;k=" "+k;case "n-":if(A.substr(A.length-D.length)===D)E=["-",A.substr(0,A.length-D.length)];else if(A.substr(A.length-k.length)===k)E=["+",A.substr(0,
A.length-k.length)];break;case "- n":D+=" ";k+=" ";case "-n":if(A.indexOf(D)===0)E=["-",A.substr(D.length)];else if(A.indexOf(k)===0)E=["+",A.substr(k.length)];break;case "(n)":if(A.indexOf("(")===0&&A.substr(A.length-1)===")")E=["-",A.substr(1,A.length-2)]}return E||["",A]}function s(A,k){if(!k)return 0;for(var u,D=A.getTime(),E=0,h=k.length;E<h;E++){u=k[E].start;if(u===null||D>=u)return E}return 0}function S(A){return A.split("\u00a0").join(" ").toUpperCase()}function N(A){for(var k=[],u=0,D=A.length;u<
D;u++)k[u]=S(A[u]);return k}function r(A,k,u,D){A=A.getFullYear();if(!D&&k.eras)A-=k.eras[u].offset;return A}function y(A,k){for(var u=0,D=false,E=0,h=A.length;E<h;E++){var l=A.charAt(E);switch(l){case "'":if(D)k.push("'");else u++;D=false;break;case "\\":D&&k.push("\\");D=!D;break;default:k.push(l);D=false}}return u}function p(A,k){k=k||"F";var u;u=A.patterns;var D=k.length;if(D===1){u=u[k];if(!u)throw"Invalid date format string '"+k+"'.";k=u}else if(D===2&&k.charAt(0)==="%")k=k.charAt(1);return k}
function G(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g}function J(A,k,u){A=f(A);u=u.calendar;a:{var D=u._parseRegExp;if(D){var E=D[k];if(E){k=E;break a}}else u._parseRegExp=D={};E=p(u,k).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");for(var h=["^"],l=[],q=0,z=0,O=G(),Q;(Q=O.exec(E))!==null;){var W=E.slice(q,Q.index);q=O.lastIndex;z+=y(W,h);if(z%2)h.push(Q[0]);else{W=Q[0];var ja=W.length;switch(W){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":W=
"(\\D+)";break;case "tt":case "t":W="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":W="(\\d{"+ja+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":W="(\\d\\d?)";break;case "zzz":W="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":W="([+-]?\\d\\d?)";break;case "/":W="(\\"+u["/"]+")";break;default:throw"Invalid date format pattern '"+W+"'.";}W&&h.push(W);l.push(Q[0])}}y(E.slice(q),h);h.push("$");E=
{regExp:h.join("").replace(/\s+/g,"\\s+"),groups:l};k=D[k]=E}z=RegExp(k.regExp).exec(A);if(z===null)return null;O=k.groups;var X=A=null,ca=null,ka=k=null;l=h=E=D=0;Q=null;q=false;W=0;for(ja=O.length;W<ja;W++){var da=z[W+1];if(da){var qa=O[W],Y=qa.length,U=parseInt(da,10);switch(qa){case "dd":case "d":k=U;if(k<1||k>31)return null;break;case "MMM":case "MMMM":ca=u;Y=Y===3;qa=ca.months;var ma=ca.monthsGenitive||ca.months,va=ca._upperMonths;U=ca._upperMonthsGen;if(!va){ca._upperMonths=va=[N(qa.names),
N(qa.namesAbbr)];ca._upperMonthsGen=U=[N(ma.names),N(ma.namesAbbr)]}da=S(da);ca=w(Y?va[1]:va[0],da);if(ca<0)ca=w(Y?U[1]:U[0],da);if(ca<0||ca>11)return null;break;case "M":case "MM":ca=U-1;if(ca<0||ca>11)return null;break;case "y":case "yy":case "yyyy":if(Y<4){X=u;da=U;U=new Date;qa=s(U);if(da<100){Y=X.twoDigitYearMax;Y=typeof Y==="string"?(new Date).getFullYear()%100+parseInt(Y,10):Y;X=r(U,X,qa);da+=X-X%100;if(da>Y)da-=100}X=da}else X=U;if(X<0||X>9999)return null;break;case "h":case "hh":D=U;if(D===
12)D=0;if(D<0||D>11)return null;break;case "H":case "HH":D=U;if(D<0||D>23)return null;break;case "m":case "mm":E=U;if(E<0||E>59)return null;break;case "s":case "ss":h=U;if(h<0||h>59)return null;break;case "tt":case "t":q=u.PM&&(da===u.PM[0]||da===u.PM[1]||da===u.PM[2]);if(!q&&(!u.AM||da!==u.AM[0]&&da!==u.AM[1]&&da!==u.AM[2]))return null;break;case "f":case "ff":case "fff":l=U*Math.pow(10,3-Y);if(l<0||l>999)return null;break;case "ddd":case "dddd":ka=da;da=Y===3;U=void 0;U=u.days;Y=u._upperDays;if(!Y)u._upperDays=
Y=[N(U.names),N(U.namesAbbr),N(U.namesShort)];ka=S(ka);if(da){U=w(Y[1],ka);if(U===-1)U=w(Y[2],ka)}else U=w(Y[0],ka);ka=U;if(ka<0||ka>6)return null;break;case "zzz":Y=da.split(/:/);if(Y.length!==2)return null;Q=parseInt(Y[0],10);if(Q<-12||Q>13)return null;Y=parseInt(Y[1],10);if(Y<0||Y>59)return null;Q=Q*60+(da.indexOf("-")===0?-Y:Y);break;case "z":case "zz":Q=U;if(Q<-12||Q>13)return null;Q*=60;break;case "g":case "gg":if(!da||!u.eras)return null;da=f(da.toLowerCase());Y=0;for(U=u.eras.length;Y<U;Y++)if(da===
u.eras[Y].name.toLowerCase()){A=Y;break}if(A===null)return null}}}z=new Date;O=(W=u.convert)?W.fromGregorian(z)[0]:z.getFullYear();if(X===null)X=O;else if(u.eras)X+=u.eras[A||0].offset;if(ca===null)ca=0;if(k===null)k=1;if(W){z=W.toGregorian(X,ca,k);if(z===null)return null}else{z.setFullYear(X,ca,k);if(z.getDate()!==k)return null;if(ka!==null&&z.getDay()!==ka)return null}if(q&&D<12)D+=12;z.setHours(D,E,h,l);if(Q!==null){u=z.getMinutes()-(Q+z.getTimezoneOffset());z.setHours(z.getHours()+parseInt(u/
60,10),u%60)}return z}function i(A,k,u){function D(Y,U){var ma;ma=Y+"";if(U>1&&ma.length<U){ma=W[U-2]+ma;return ma.substr(ma.length-U,U)}return ma}function E(){if(ja||X)return ja;ja=ca.test(k);X=true;return ja}function h(Y,U){if(qa)return qa[U];switch(U){case 0:return Y.getFullYear();case 1:return Y.getMonth();case 2:return Y.getDate()}}var l=u.calendar,q=l.convert;if(!k||!k.length||k==="i"){if(u&&u.name.length)if(q)u=i(A,l.patterns.F,u);else{u=new Date(A.getTime());var z=s(A,l.eras);u.setFullYear(r(A,
l,z));u=u.toLocaleString()}else u=A.toString();return u}z=l.eras;var O=k==="s";k=p(l,k);u=[];var Q,W=["0","00","000"],ja,X,ca=/([^d]|^)(d|dd)([^d]|$)/g,ka=0,da=G(),qa;if(!O&&q)qa=q.fromGregorian(A);for(;;){Q=da.lastIndex;q=da.exec(k);Q=k.slice(Q,q?q.index:k.length);ka+=y(Q,u);if(!q)break;if(ka%2)u.push(q[0]);else{Q=q[0];q=Q.length;switch(Q){case "ddd":case "dddd":names=q===3?l.days.namesAbbr:l.days.names;u.push(names[A.getDay()]);break;case "d":case "dd":ja=true;u.push(D(h(A,2),q));break;case "MMM":case "MMMM":Q=
h(A,1);u.push(l.monthsGenitive&&E()?l.monthsGenitive[q===3?"namesAbbr":"names"][Q]:l.months[q===3?"namesAbbr":"names"][Q]);break;case "M":case "MM":u.push(D(h(A,1)+1,q));break;case "y":case "yy":case "yyyy":Q=qa?qa[0]:r(A,l,s(A,z),O);if(q<4)Q%=100;u.push(D(Q,q));break;case "h":case "hh":Q=A.getHours()%12;if(Q===0)Q=12;u.push(D(Q,q));break;case "H":case "HH":u.push(D(A.getHours(),q));break;case "m":case "mm":u.push(D(A.getMinutes(),q));break;case "s":case "ss":u.push(D(A.getSeconds(),q));break;case "t":case "tt":Q=
A.getHours()<12?l.AM?l.AM[0]:" ":l.PM?l.PM[0]:" ";u.push(q===1?Q.charAt(0):Q);break;case "f":case "ff":case "fff":u.push(D(A.getMilliseconds(),3).substr(0,q));break;case "z":case "zz":Q=A.getTimezoneOffset()/60;u.push((Q<=0?"+":"-")+D(Math.floor(Math.abs(Q)),q));break;case "zzz":Q=A.getTimezoneOffset()/60;u.push((Q<=0?"+":"-")+D(Math.floor(Math.abs(Q)),2)+":"+D(Math.abs(A.getTimezoneOffset()%60),2));break;case "g":case "gg":l.eras&&u.push(l.eras[s(A,z)].name);break;case "/":u.push(l["/"]);break;default:throw"Invalid date format pattern '"+
Q+"'.";}}}return u.join("")}var v={},H={en:{}};H["default"]=H.en;v.extend=function(A){for(var k=arguments[1]||{},u=2,D=arguments.length;u<D;u++){var E=arguments[u];if(E)for(var h in E){var l=E[h];if(typeof l!=="undefined")if(A&&(ha.call(l)==="[object Object]"||C(l))){var q=k[h];q=q&&(ha.call(q)==="[object Object]"||C(q))?q:C(l)?[]:{};k[h]=this.extend(true,q,l)}else k[h]=l}}return k};v.findClosestCulture=function(A){var k;if(!A)return this.culture||this.cultures["default"];if(ha.call(A)==="[object String]")A=
A.split(",");if(C(A)){for(var u,D=this.cultures,E=A,h=E.length,l=[],q=0;q<h;q++){A=f(E[q]);A=A.split(";");u=f(A[0]);if(A.length===1)A=1;else{A=f(A[1]);if(A.indexOf("q=")===0){A=A.substr(2);A=parseFloat(A,10);A=isNaN(A)?0:A}else A=1}l.push({lang:u,pri:A})}l.sort(function(z,O){return z.pri<O.pri?1:-1});for(q=0;q<h;q++){u=l[q].lang;if(k=D[u])return k}for(q=0;q<h;q++){u=l[q].lang;do{E=u.lastIndexOf("-");if(E===-1)break;u=u.substr(0,E);if(k=D[u])return k}while(1)}}else if(typeof A==="object")return A;
return k||null};v.preferCulture=function(A){this.culture=this.findClosestCulture(A)||this.cultures["default"]};v.localize=function(A,k,u){if(typeof k==="string"){k=k||"default";k=this.cultures[k]||{name:k}}var D=H[k.name];if(arguments.length===3){D||(D=H[k.name]={});D[A]=u}else{if(D)u=D[A];if(typeof u==="undefined"){if(D=H[k.language])u=D[A];if(typeof u==="undefined")u=H["default"][A]}}return typeof u==="undefined"?null:u};v.format=function(A,k,u){u=this.findClosestCulture(u);if(typeof A==="number"){var D=
A;if(!k||k==="i")A=u.name.length?D.toLocaleString():D.toString();else{k=k||"D";u=u.numberFormat;A=Math.abs(D);var E=-1;if(k.length>1)E=parseInt(k.slice(1),10);var h=k.charAt(0).toUpperCase(),l;switch(h){case "D":k="n";if(E!==-1)A=B(""+A,E,true);if(D<0)A=-A;break;case "N":l=u;case "C":l=l||u.currency;case "P":l=l||u.percent;k=D<0?l.pattern[0]:l.pattern[1]||"n";if(E===-1)E=l.decimals;b:{var q=A*(h==="P"?100:1);h=l;l=h.groupSizes;A=l[0];D=1;var z=Math.pow(10,E),O=Math.round(q*z)/z;isFinite(O)||(O=q);
z="";z=(O+"").split(/e/i);O=z.length>1?parseInt(z[1],10):0;q=z[0];z=q.split(".");q=z[0];z=z.length>1?z[1]:"";if(O>0){z=B(z,O,false);q+=z.slice(0,O);z=z.substr(O)}else if(O<0){O=-O;q=B(q,O+1);z=q.slice(-O,q.length)+z;q=q.slice(0,-O)}z=E>0?h["."]+(z.length>E?z.slice(0,E):B(z,E)):"";E=q.length-1;h=h[","];for(O="";E>=0;){if(A===0||A>E){A=q.slice(0,E+1)+(O.length?h+O+z:z);break b}O=q.slice(E-A+1,E+1)+(O.length?h+O:"");E-=A;if(D<l.length){A=l[D];D++}}A=q.slice(0,E+1)+h+O+z}break;default:throw"Bad number format specifier: "+
h;}l=/n|\$|-|%/g;for(D="";;){E=l.lastIndex;h=l.exec(k);D+=k.slice(E,h?h.index:k.length);if(!h)break;switch(h[0]){case "n":D+=A;break;case "$":D+=u.currency.symbol;break;case "-":if(/[1-9]/.test(A))D+=u["-"];break;case "%":D+=u.percent.symbol}}A=D}}else if(A instanceof Date)A=i(A,k,u);return A};v.parseInt=function(A,k,u){return Math.floor(this.parseFloat(A,k,u))};v.parseFloat=function(A,k,u){u=this.findClosestCulture(u);var D=NaN;u=u.numberFormat;A=f(A);if(ba.test(A))D=parseFloat(A,k);else if(!k&&
x.test(A))D=parseInt(A,16);else{var E=L(A,u,u.pattern[0]);k=E[0];E=E[1];if(k===""&&u.pattern[0]!=="-n"){E=L(A,u,"-n");k=E[0];E=E[1]}k=k||"+";var h;A=E.indexOf("e");if(A<0)A=E.indexOf("E");if(A<0){h=E;A=null}else{h=E.substr(0,A);A=E.substr(A+1)}var l=u["."],q=h.indexOf(l);if(q<0){E=h;h=null}else{E=h.substr(0,q);h=h.substr(q+l.length)}l=u[","];E=E.split(l).join("");q=l.replace(/\u00A0/g," ");if(l!==q)E=E.split(q).join("");k+=E;if(h!==null)k+="."+h;if(A!==null){u=L(A,u,"-n");k+="e"+(u[0]||"+")+u[1]}if(fa.test(k))D=
parseFloat(k)}return D};v.parseDate=function(A,k,u){u=this.findClosestCulture(u);var D,E;if(k){if(typeof k==="string")k=[k];if(k.length){E=0;for(var h=k.length;E<h;E++){var l=k[E];if(l)if(D=J(A,l,u))break}}}else{k=u.calendar.patterns;for(E in k)if(D=J(A,k[E],u))break}return D||null};var K=v.cultures=v.cultures||{};K=K["default"]=K.en=v.extend(true,{name:"en",englishName:"English",nativeName:"English",isRTL:false,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],
"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April",
"May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},K.en);K.calendar=K.calendar||
K.calendars.standard;var aa=/^\s+|\s+$/g,ba=/^[+-]?infinity$/i,x=/^0x[a-f0-9]+$/i,fa=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,ha=Object.prototype.toString;jQuery.findClosestCulture=v.findClosestCulture;jQuery.culture=v.culture;jQuery.cultures=v.cultures;jQuery.preferCulture=v.preferCulture;jQuery.localize=v.localize;jQuery.format=v.format;jQuery.parseInt=v.parseInt;jQuery.parseFloat=v.parseFloat;jQuery.parseDate=v.parseDate})();(function(f){var B=f({});f.subscribe=function(){B.bind.apply(B,arguments)};f.unsubscribe=function(){B.unbind.apply(B,arguments)};f.publish=function(){B.trigger.apply(B,arguments)}})(jQuery);var timeglider={version:"0.0.2"};
timeglider.TGDate={monthNamesFull:["","January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesAbbr:["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsDayNums:[0,31,28,31,30,31,30,31,31,30,31,30,31,29],monthNamesLet:["","J","F","M","A","M","J","J","A","S","O","N","D"],dayNamesFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri",
"Sat"],dayNamesLet:["S","M","T","W","T","F","S"],units:["da","mo","ye","de","ce","thou"],isLeapYear:function(f){return f%400==0?true:f%100==0?false:f%4==0?true:false},boil:function(f){return parseInt(f,10)},getTimeUnitSerial:function(f,B){switch(B){case "ye":return f.ye;case "mo":return this.getMonthNum(f);case "da":return this.getRataDie(f);case "de":return Math.ceil(f.ye/10);case "ce":return Math.ceil(f.ye/100);case "thou":return Math.ceil(f.ye/1E3);case "tenthou":return Math.ceil(f.ye/1E4);case "hundredthou":return Math.ceil(f.ye/
1E5);case "mill":return Math.ceil(f.ye/1E6);case "tenmill":return Math.ceil(f.ye/1E7);case "hundredmill":return Math.ceil(f.ye/1E8);case "bill":return Math.ceil(f.ye/1E9)}},validateEventDates:function(f,B){var C,w;if(RegExp(/[0-9-: ]/).test(f))C=this.makeDateObject(f);else{trace("start:"+f);C="false"}w=this.makeDateObject(B);return{s:C,e:w}},makeDateObject:function(f){f=jQuery.trim(f);f=f.replace(",","");var B;f.substr(0,1)=="-"?B=1:B=0;B==1&&(f=f.substr(1));f=f.replace(/[^0-9]/g,"-");f=f.split("-");
B={ye:this.boil(f[0]),mo:this.boil(f[1]),da:this.boil(f[2]),ho:this.boil(f[3]),mi:this.boil(f[4]),se:this.boil(f[5]),bce:B};B.rd=this.getRataDie(B);B.sec=this.getSec(B);return B},getMonthDays:function(f,B){return this.isLeapYear(B)==true&&f==2?29:this.monthsDayNums[f]},isValidDate:function(f,B,C){var w=this.getMonthDays(B,f);if(C>w||C<=0)return false;if(B>12||B<0)return false;if(f==0)return false;if(typeof f!="number"||String(f).match(/([0-9]+)/)==false)return false;return true},formatFocusDate:function(f){return f.ye+
"-"+f.mo+"-"+f.da+" "+f.ho+":"+f.mi+":00"},getSec:function(f){var B=Math.abs(f.rd)*86400,C=f.ho*3600,w=(f.mi-1)*60,L=1;if(f.rd<0)L=-1;return L*(B+C+w)},twentyFourToTwelve:function(f){var B={};B.ye=f.ye;B.mo=f.mo;B.da=f.da;B.ho=f.ho;B.mi=f.mi;B.ampm="am";if(f.ho)if(f.ho>=12){B.ampm="pm";B.ho=f.ho>12?f.ho-12:12}else if(f.ho==0){B.ho=12;B.ampm="am"}else B.ho=f.ho;else{B.ho=12;B.mi=0;B.ampm="am"}return B},getMonthNum:function(f){return f.ye>0?(f.ye-1)*12+f.mo:this.getBCMonthNum(f)},getMonthAdj:function(f,
B){var C=this.getDateFromMonthNum(f);switch(C.mo){case 1:case 3:case 5:case 7:case 8:case 10:case 12:C=Math.floor(B+B/28*3);return{width:C,days:31};case 2:if(this.isLeapYear(C.ye)==true){C=Math.floor(B+B/28);return{width:C,days:29}}else return{width:B,days:28};default:C=Math.floor(B+B/28*2);return{width:C,days:30}}},getBCMonthNum:function(f){return-1*((Math.abs(f.ye)-1)*12+(12-(f.mo-1)))},getDateFromMonthNum:function(f){var B=0;if(f>0){B=f%12;if(B==0)B=12;f=Math.ceil(f/12)}else{B=Math.abs(f)%12;B=
12-B+1;if(B==13)B=1;f=-1*Math.ceil(Math.abs(f)/12)}return{ye:f,mo:B}},getMonthWidth:function(f,B,C){B=t/28;var w;switch(f){case 1:case 3:case 5:case 7:case 8:case 10:case 12:w=3;break;case 4:case 6:case 9:case 11:w=2;break;case 2:w=this.isLeapYear(yr)==true?1:0}return{width:Math.floor(C+B*w),numDays:28+w}},getRataDie:function(f){var B=f.ye,C=f.mo;f=f.da;var w=0;if(B>=0){if(B==0)B=1;w=Math.floor(B/400)*146097;var L=parseInt(this.getDaysInYearSpan(B-B%400,B));B=parseInt(this.getDaysSoFar(C,B));w=w+
L+B+f-366}else if(B<0)w=this.getBCRataDie({ye:B,mo:C,da:f});return w},getBCRataDie:function(f){var B=f.ye,C=f.mo;f=f.da;if(C==0)C=1;if(f==0)f=1;return-1*((Math.abs(B)-1)*366+[0,335,306,275,245,214,184,153,122,92,61,31,0][C]+(this.monthsDayNums[C]-f+1))},getDateFromRD:function(f){for(var B=Math.floor(f),C=Math.floor(B/146097)*400,w=B-Math.floor(B/146097)*146097,L=1,s=C+1,S=s+400;s<=S;s++)if(w>365){w-=365;if(this.isLeapYear(s))w-=1;L++}else s=S;C+=L;if(w==0)w=1;w=this.getMonthFromRemDays(w,C);B=(f-
B)*1440;f=Math.floor(B%60);B=Math.floor(B/60);if(this.isLeapYear(C)&&w.mo==2)w.da+=1;return{ye:C,mo:w.mo,da:w.da,ho:B,mi:f}},getDateFromSec:function(f){return this.getDateFromRD(f/86400)},getMonthFromRemDays:function(f,B){var C=0;var w=C=0;C=this.isLeapYear(B)?1:0;if(f<=31){w=1;C=f}else if(f>31&&f<=59+C){w=2;C=f-(31+C)}else if(f>59+C&&f<=90+C){w=3;C=f-(59+C)}else if(f>90+C&&f<=120+C){w=4;C=f-(90+C)}else if(f>120+C&&f<=151+C){w=5;C=f-(120+C)}else if(f>151+C&&f<=181+C){w=6;C=f-(151+C)}else if(f>181+
C&&f<=212+C){w=7;C=f-(181+C)}else if(f>212+C&&f<=243+C){w=8;C=f-(212+C)}else if(f>243+C&&f<=273+C){w=9;C=f-(243+C)}else if(f>273+C&&f<=304+C){w=10;C=f-(273+C)}else if(f>304+C&&f<=334+C){w=11;C=f-(304+C)}else{w=12;C=f-(334+C)}return{mo:w,da:C}},getDaysInYearSpan:function(f,B){for(var C=0,w=f;w<B;w++)C+=this.isLeapYear(w)?366:365;return C},getDaysSoFar:function(f,B){var C;switch(f){case 1:C=0;break;case 2:C=31;break;case 3:C=59;break;case 4:C=90;break;case 5:C=120;break;case 6:C=151;break;case 7:C=
181;break;case 8:C=212;break;case 9:C=243;break;case 10:C=273;break;case 11:C=304;break;case 12:C=334}if(f>2&&this.isLeapYear(B))C+=1;return C},getToday:function(){var f=jQuery.format(new Date,"S");return f=f.replace("T"," ")}};(function(f){var B=f.levelHeight=8;f.TGOrg=function(){this.blocks=[];this.ids=[];this.vis=[];this.tree=[];var C=this;this.addBlock=function(s,S){s.right=s.left+s.width;s.bottom=s.top+s.height;s.tickScope=S;C.blocks.push(s)};this.getBorg=function(){return this};this.getBlocks=function(){return this.blocks};this.getHTML=function(s){if(s=="sweep"){C.tree=[];for(var S=0;S<300;S++)C.tree[S]=[];this.vis=[]}this.blocks.sort(w);for(var N,r="",y="",p={},G=this.blocks.length,J=0,i=0;i<G;i++){p=this.blocks[i];
if(p.tickScope==s)if(jQuery.inArray(p.id,this.vis)==-1){this.vis.push(p.id);J=0;if(p.image){if(p.image_class=="layout")J=p.image_size.height+4;r="<div class='timeglider-event-image-"+p.image_class+"'><img src='"+p.image+"'></div>"}else r="";L(p,0);p.fontsize<10?p.opacity=p.fontsize/10:p.opacity=1;if(p.span==true){S="timeglider-event-spanning";N="<div class='timeglider-event-spanner' style='height:"+p.fontsize+"px;width:"+p.spanwidth+"px'></div>"}else N=S="";if(p.y_position>0){debug.log("y positon > 0:"+
p.y_position);p.top=-1*p.y_position}y+="<div class='timeglider-timeline-event "+S+"' id='ev_"+p.id+"' style='width:"+p.width+"px;height:"+p.height+"px;left:"+p.left+"px;opacity:"+p.opacity+";top:"+p.top+"px;font-size:"+p.fontsize+"px;'><img class='timeglider-event-icon' src='"+p.icon+"' style='height:"+p.fontsize+"px;left:-"+(p.fontsize+2)+"px; top:"+J+"px'>"+r+N+"<div class='timeglider-event-title' style='top:"+J+"px'>"+p.title+"</div></div>"}}return y};var w=function(s,S){var N=S.importance,r=s.importance;
return N<r?-1:N>r?1:0},L=function(s,S){var N=false,r=C.tree,y=r[S],p=S+1,G=false,J=2;bump_ht=B;if(y!=undefined){for(J=0;J<y.length;J++){a:{N=y[J];if(!(s.left>N.right||s.right<N.left))if(s.left>=N.left&&s.left<=N.right||s.right>=N.left&&s.right<=N.right||s.right>=N.right&&s.left<=N.left||s.right<=N.right&&s.left>=N.left)if(s.bottom<=N.bottom&&s.bottom>=N.top||s.top<=N.bottom&&s.top>=N.top||s.top==N.bottom&&s.top==N.top){N=true;break a}N=false}if(N==true){s.top-=bump_ht;s.bottom-=bump_ht;L(s,p);G=true;
break}}if(G==false){s.top-=s.fontsize;y.push(s);J=Math.ceil(s.height/B);y=0;for(y=1;y<=J;y++){p=S+y;r[p].push(s)}}}}}})(timeglider);(function(f){var B=f.TGDate,C=jQuery;f.Timeline=Backbone.Model.extend({defaults:{title:"Untitled",events:[]},_chewTimeline:function(w){var L=w.mediator,s={da:[],mo:[],ye:[],de:[],ce:[],thou:[],tenthou:[],hundredthou:[],mill:[],tenmill:[],hundredmill:[],bill:[]},S=B.units;w.startSeconds=[];w.endSeconds=[];w.spans=[];if(!w.color)w.color="#333333";if(w.events){for(var N,r,y,p,G=w.events.length,J=0;J<G;J++){N=w.events[J];if(N.id)r=N.id;else N.id=r="anon"+this.anonEventId++;y=B.validateEventDates(N.startdate,
N.enddate);N.startdateObj=y.s;N.enddateObj=y.e;N.icon=L.options.icon_folder+(N.icon||"triangle_orange.png");N.titleWidth=f.getStringWidth(N.title);if(N.image)if(!N.image_class){N.image_class="layout";N.image_size=f.getImageSize(N.image)}N.y_position&&debug.log("TG_Timeline YPOS:"+N.y_position);w.startSeconds.push(N.startdateObj.sec);w.endSeconds.push(N.enddateObj.sec);if(N.enddateObj.sec>N.startdateObj.sec){N.span=true;w.spans.push({id:N.id,start:N.startdateObj.sec,end:N.enddateObj.sec})}else N.span=
false;for(var i=S.length,v=0;v<i;v++){y=S[v];p=B.getTimeUnitSerial(N.startdateObj,y);if(s[y][p]!==undefined)s[y][p].push(r);else s[y][p]=[r]}L.eventPool["ev_"+r]=N}L=C.merge(w.startSeconds,w.endSeconds);L=timeglider.getLowHigh(L);w.bounds={first:L.low,last:L.high}}w.display="expanded";w.dateHash=s;delete w.events;return w},initialize:function(w){this.set(this._chewTimeline(w))},validate:function(){}})})(timeglider);(function(f){var B=f.TGDate,C="",w="",L={},s=jQuery,S={},N="";debug.trace=function(r,y){s("#"+y).text(r)};f.TimegliderTimelineView=function(r,y){w=y;L=w.options;C="#"+r._id;N=r._id;var p=this;this._views={PLACE:C,CONTAINER:C+" .timeglider-container",TIMELINE_MENU:C+" .timeglider-timeline-menu",TIMELINE_MENU_UL:C+" .timeglider-timeline-menu ul",TIMELINE_LIST_BT:C+" .timeglider-list-bt",SLIDER_CONTAINER:C+" .timeglider-slider-container",SLIDER:C+" .timeglider-slider",ZOOM_DISPLAY:C+" .timeglider-zoomlevel-display",
TRUCK:C+" .timeglider-truck",CENTERLINE:C+" .timeglider-centerline",TICKS:C+" .timeglider-ticks",HANDLE:C+" .timeglider-handle",FOOTER:C+" .timeglider-footer",FILTER_BT:C+" .timeglider-filter-bt",FILTER_BOX:C+" .timeglider-filter-box",TOOLS_BT:C+" .timeglider-tools-bt"};this._templates={event_modal:s.template(null,"<div class='tg-modal timeglider-ev-modal ui-widget-content' id='ev_${id}_modal'><div class='close-button-remove'><img src='img/close.png'></div><div class='startdate'>${startdate}</div><h4 id='title'>${title}</h4><p>{{html description}}</p><ul class='timeglider-ev-modal-links'><li><a target='_blank' href='${link}'>link</a></li></ul></div>"),
event_modal_video:s.template(null,"<div class='tg-modal timeglider-ev-video-modal ui-widget-content' id='${id}_modal'><div class='close-button-remove'><img src='img/close.png'></div><iframe width = '100%' height='300' src='${video}'></iframe></div>"),timeline_modal:s.template(null,"<div class='tg-modal timeglider-timeline-modal ui-widget-content' id='tl_${id}_modal'><div class='close-button-remove'><img src='img/close.png'></div><h4 id='title'>${title}</h4><p>{{html description}}</p></div>"),filter_modal:s.template(null,
"<div class='tg-modal timeglider-menu-modal timeglider-filter-box timeglider-menu-hidden'><div class='close-button'><img src='img/close.png'></div><h3>filter</h3><div class='timeglider-menu-modal-content'><div class='timeglider-formline'>show: <input type='text' class='timeglider-filter-include'></div><div class='timeglider-formline'>hide: <input type='text' class='timeglider-filter-exclude'></div><ul><li class='timeglider-filter-clear'>clear</li><li class='timeglider-filter-apply'>apply</li></ul></div><div class='timeglider-menu-modal-point-right'></div>"),
timeline_list_modal:s.template(null,"<div class='timeglider-menu-modal timeglider-timeline-menu timeglider-menu-hidden'><div class='close-button'><img src='img/close.png'></div><h3>timelines</h3><div class='timeglider-menu-modal-content'><ul></ul></div><div class='timeglider-menu-modal-point-right'></div>")};s(this._views.CONTAINER).css("height",s(C).height());this.basicFontSize=L.basic_fontsize;L.show_footer==false&&s(this._views.FOOTER).css("display","none");this.dragSpeed=0;this.dimensions=this.getWidgetDimensions();
this.ticksHandleOffset=this.rightside=this.leftside=this.tickNum=0;this.timeoout_id=1;this.sliderActive=false;this.ztop=1E3;this.filterBoxActivated=false;this.buildSlider();this.setupFilter();s.subscribe("mediator.timelineDataLoaded",function(){w.setInitialTimelines();s(".timeglider-loading").fadeOut(500)});s.subscribe("mediator.ticksOffsetChange",function(){p.tickHangies();p.registerTitles();p.registerDragging()});s.subscribe("mediator.zoomLevelChange",function(){p.tickNum=0;p.leftside=0;var J=w.getZoomLevel();
s(p._views.SLIDER).slider("value",p.invSliderVal(J));p.displayZoomLevel(J);p.castTicks("zoomLevelChange")});s.subscribe("mediator.ticksReadySignal",function(){w.ticksReady===true&&p.freshTimelines()});s.subscribe("mediator.refreshSignal",function(){p.castTicks("refreshSignal")});s.subscribe("mediator.ticksArrayChange",function(){});s.subscribe("mediator.focusDateChange",function(){});s.subscribe("mediator.timelineListChangeSignal",function(){p.buildTimelineMenu()});s.subscribe("mediator.activeTimelinesChange",
function(){s(p._views.TIMELINE_MENU_UL+" li").each(function(){var J=s(this).attr("id");s.inArray(J,w.activeTimelines)!=-1?s(this).addClass("activeTimeline"):s(this).removeClass("activeTimeline")})});s.subscribe("mediator.filterObjectChange",function(){});s(".timeglider-pan-buttons div").mousedown(function(){var J=s(this).attr("class")=="timeglider-pan-right"?-30:30;p.intervalMachine("pan",{type:"set",fn:p.pan,args:[J],intvl:30})}).mouseup(function(){p.intervalMachine("pan",{type:"clear",fn:p.pan,
callback:"resetTicksHandle"})}).mouseout(function(){p.intervalMachine("pan",{type:"clear",fn:p.pan,callback:"resetTicksHandle"})});s(this._views.TRUCK).dblclick(function(J){var i=J.pageX-p.dimensions.container.offset.left-p.dimensions.container.width/2,v=w.getZoomInfo().spp;J=w.getFocusDate().sec;i=B.getDateFromSec(Math.floor(J+i*v));J=B.getDateFromSec(J);debug.trace("DBLCLICK:"+J.mo+"-"+J.ye+" dblclick:"+i.mo+"-"+i.ye,"note")}).bind("mousewheel",function(J,i){var v=Math.ceil(-1*i*3),H=w.getZoomLevel();
w.setZoomLevel(H+v);return false});s(this._views.TICKS).draggable({axis:"x",drag:function(){w.setTicksOffset(s(this).position().left)},stop:function(){p.resetTicksHandle();p.easeOutTicks();p.registerDragging()}}).delegate(".timeglider-timeline-event","click",function(){var J=s(this).attr("id");p.eventModal(J)}).delegate(".timeglider-timeline-event","hover",function(){var J=s(this).attr("id");debug.trace("hover, title:"+w.eventPool[J].title,"note")}).delegate(".timeglider-event-collapsed","hover",
function(){var J=s(this).attr("id");debug.trace("collapsed, title:"+w.eventPool[J].title,"note")});s(".close-button-remove").live("click",function(){s(this).parent().remove()});s.tmpl(p._templates.timeline_list_modal,{}).appendTo(this._views.CONTAINER);s(p._views.TIMELINE_LIST_BT).click(function(){s(p._views.TIMELINE_MENU).toggleClass("timeglider-menu-hidden").position({my:"right bottom",at:"right top",of:s(p._views.TIMELINE_LIST_BT),offset:"-8, -12"})});s(this._views.TIMELINE_MENU+" .close-button").live("click",
function(){s(p._views.TIMELINE_MENU).toggleClass("timeglider-menu-hidden")});s(this._views.TOOLS_BT).click(function(){alert("I'm just a stand-in for the tools... ")});w.options.show_centerline===true?s(this._views.CENTERLINE).css({height:p.dimensions.container.height,left:p.dimensions.container.centerx}):s(this._views.CENTERLINE).css({display:"none"});if(s.support.touch){s("#"+N).addTouch();var G=document.getElementById(N);G.addEventListener("gesturestart",function(J){J.preventDefault();debug.trace("gesture zoom:"+
w.getZoomLevel(),"note")},false);G.addEventListener("gesturechange",function(J){J.preventDefault();debug.trace("gesture change!!!!","note")},false)}};f.TimegliderTimelineView.prototype={getWidgetDimensions:function(){var r=s(this._views.CONTAINER),y=r.width(),p=Math.floor(y/2)+1,G=r.height(),J=Math.floor(G/2),i=r.position().left;r=r.offset();var v=L.show_footer==true?s(this._views.FOOTER).height():0;return{container:{width:y,height:G,centerx:p,centery:J,left:i,offset:r},tick:{top:G-v-30},footer:{height:v}}},
scaleToImportance:function(r,y){return r/y},displayZoomLevel:function(r){debug.log("displayZoomLevel zl:"+r);r>0&&L.display_zoom_level==true&&s(this._views.ZOOM_DISPLAY).text(r)},getPublicMethods:function(){return"FOO"},intervalMachine:function(r,y){var p=this;if(y.type==="clear"){clearInterval(S[r]);if(y.callback)p[y.callback]()}else S[r]=setInterval(function(){y.fn.apply(p,y.args)},y.intvl)},invSliderVal:function(r){return Math.abs(r-101)},pan:function(r){r=r||20;$t=s(this._views.TICKS);newPos=
$t.position().left+r;$t.css({left:newPos});w.setTicksOffset(newPos)},registerTitles:function(){var r,y,p,G,J,i,v,H,K,aa,ba,x=s(this._views.CONTAINER).offset().left;s(".timeglider-event-spanning").each(function(){r=s(this).offset().left-x;y=s(this).outerWidth();v=s(".timeglider-event-title",this);p=v.outerWidth()+5;G=v.siblings(".timeglider-event-spanner").outerWidth();G>p&&r<0&&Math.abs(r)<y-p&&v.css({marginLeft:-1*r+5})});s(".tg-timeline-envelope").each(function(){H=s(this).offset().left-x;K=s(".titleBar",
this);aa=s(".titleBar .timeline-title",this);J=K.position().left;ba=J+H;K.outerWidth();p=K.outerWidth();i=-1*ba;ba<0&&aa.css({marginLeft:i+5})})},registerDragging:function(){var r=w.startSec,y=s(this._views.TICKS).position().left,p=w.getZoomInfo().spp;r=B.getDateFromSec(r-y*p);debug.trace("ticks x:"+y,"tickpos");debug.trace("FD: "+B.formatFocusDate(r),"focusdate");w.setFocusDate(r)},buildTimelineMenu:function(){var r,y=w.timelinePool,p=0;s(this._views.TIMELINE_MENU_UL+" li").remove();for(r in y){if(y.hasOwnProperty(r)){var G=
y[r];s(this._views.TIMELINE_MENU_UL).append("<li class = 'timelineList' id='"+r+"'>"+G.title+"</li>");s("li#"+r).click(function(){w.toggleTimeline(s(this).attr("id"))})}p++}},buildSlider:function(){var r=w.getZoomLevel();if(L.min_zoom==L.max_zoom){s(this._views.SLIDER_CONTAINER).css("display","none");debug.log("buildSlider")}else{L.display_zoom_level==true&&s("<div>").appendTo(this._views.SLIDER_CONTAINER).addClass("timeglider-zoomlevel-display").html("&nbsp;");var y=this;r=y.invSliderVal(r);var p=
w.max_zoom,G=w.min_zoom;s(this._views.SLIDER).css("height",(1+p-G)*3).slider({steps:100,handle:s(".knob"),animate:300,orientation:"vertical",min:y.invSliderVal(p),max:y.invSliderVal(G),value:r,start:function(){y.sliderActive=true},stop:function(){y.sliderActive=false},change:function(){},slide:function(J,i){w.setZoomLevel(y.invSliderVal(i.value))}})}},setupFilter:function(){var r=this;s.tmpl(r._templates.filter_modal,{}).appendTo(r._views.CONTAINER);s(r._views.FILTER_BT).click(function(){var y=s(this),
p=r._views.FILTER_BOX;if(r.filterBoxActivated==false){r.filterBoxActivated=true;var G=s(p+" .timeglider-filter-apply"),J=s(".timeglider-filter-box .close-button"),i=s(p+" .timeglider-filter-clear"),v="",H="";G.click(function(){v=s(p+" .timeglider-filter-include").val();H=s(p+" .timeglider-filter-exclude").val();w.setFilterObject({include:v,exclude:H});s(p).toggleClass("timeglider-menu-shown")});J.click(function(){s(p).toggleClass("timeglider-menu-hidden")});i.click(function(){w.setFilterObject({include:"",
exclude:""});s(p+" .timeglider-filter-include").val("");s(p+" .timeglider-filter-exclude").val("");s(p).toggleClass("timeglider-menu-shown")})}s(p).toggleClass("timeglider-menu-hidden").css("z-index",r.ztop++).position({my:"right bottom",at:"right top",of:y,offset:"-8, -12"})})},clearTicks:function(){this.tickNum=0;s(this._views.TICKS).css("left",0).html("<div class='timeglider-handle'></div>")},castTicks:function(){w.getZoomLevel();var r=w.getFocusDate(),y=w.getZoomInfo().width;y=Math.ceil(this.dimensions.container.width/
y)+4;var p="l";this.clearTicks();w.setTicksReady(false);this.addTick({type:"init",focus_date:r});for(r=1;r<=y;r+=1){this.addTick({type:p});p=p=="l"?"r":"l"}w.setTicksReady(true)},addTick:function(r){var y=0,p=0,G=p=0,J=0,i=0,v="";i={};G={};var H={},K={};i={};H=w.getZoomInfo().unit;K=w.getZoomInfo().width;J=w.getFocusDate();G=parseInt(this.dimensions.tick.top);J=w.addToTicksArray({type:r.type,unit:H},J);if(H=="mo"){i=B.getMonthAdj(J,K);K=i.width;y=i.days}this.tickNum++;if(r.type=="init"){i=this.tickOffsetFromDate(w.getZoomInfo(),
w.getFocusDate(),K);this.leftside=p=Math.ceil(this.dimensions.container.centerx+i);this.rightside=p+K}else if(r.type=="l")this.leftside=p=Math.floor(this.leftside-K);else if(r.type=="r"){p=Math.floor(this.rightside);this.rightside+=K}w.getTickBySerial(J).width=K;w.getTickBySerial(J).left=p;v=this._views.PLACE+"_"+H+"_"+J+"-"+this.tickNum;i=s("<div class='timeglider-tick' id='"+v+"'><div class='timeglider-tick-label' id='label'></div></div>").appendTo(this._views.TICKS);i.css({width:K,left:p,top:G});
G=this.getTickMarksInfo({unit:H,width:K});G=y>0?y:G.tperu;p=K/G;if(p>5){r=Raphael(v,K,30);var aa="";for(y=0;y<G;++y){v=y*p;aa+="M"+v+" 20 L"+v+" 30"}r.path(aa).attr({stroke:"#333","stroke-width":1})}H={unit:H,width:K,serial:J};K=this.getDateLabelForTick(H);i.children("#label").text(K);return H},getTickMarksInfo:function(r){switch(r.unit){case "da":r=24;break;case "mo":r=30;break;case "ye":r=12;break;default:r=10}return{tperu:r}},getDateLabelForTick:function(r){switch(r.unit){case "bill":if(r.serial==
1)return"1";return r.serial-1+" bya";case "hundredmill":if(r.serial==1)return"1";return(r.serial-1)*100+" mya";case "tenmill":if(r.serial==1)return"1";return(r.serial-1)*10+" mya";case "mill":if(r.serial==1)return"1";return r.serial-1+" mya";case "hundredthou":if(r.serial==1)return"1";return r.serial-1+"00,000";case "tenthou":if(r.serial==1)return"1";return r.serial-1+"0000";case "thou":if(r.serial==1)return"1";return r.serial-1+"000";case "ce":if(r.serial==1)return"1";return r.serial-1+"00";case "de":return(r.serial-
1)*10+"s";case "ye":return r.serial;case "mo":r=B.getDateFromMonthNum(r.serial);return B.monthNamesFull[r.mo]+", "+r.ye;case "da":r=B.getDateFromRD(r.serial);return B.monthNamesAbbr[r.mo]+" "+r.da+", "+r.ye;default:return r.unit+":"+r.serial+":"+r.width}},tickHangies:function(){var r=s(this._views.TICKS).position().left,y=this.rightside+r-this.dimensions.container.width;if(this.leftside+r>-100){r=this.addTick({type:"l"});this.appendTimelines(r)}else if(y<100){r=this.addTick({type:"r"});this.appendTimelines(r)}},
tickOffsetFromDate:function(r,y,p){switch(r.unit){case "da":y=y.ho/24+y.mi/1440;p*=y;break;case "mo":r=B.getMonthDays(y.mo,y.ye);y=(y.da-1)/r+y.ho/(24*r)+y.mi/(1440*r);p*=y;break;case "ye":y=((y.mo-1)*30+y.da)/365;p*=y;break;case "de":y=y.ye%10/10+y.mo/120;p*=y;break;case "ce":y=y.ye%100/100+y.mo/1200;p*=y;break;case "thou":y=y.ye%1E3/1E3;p*=y;break;case "tenthou":y=y.ye%1E4/1E4;p*=y;break;case "hundredthou":y=y.ye%1E5/1E5;p*=y;break;default:p=0}return-1*p},resetTicksHandle:function(){debug.log("resetTicksHandle");
s(this._views.HANDLE).offset({left:s(this._views.CONTAINER).offset().left})},easeOutTicks:function(){Math.abs(this.dragSpeed)>5&&debug.trace("ticks stopped!","note")},getTimelineEventsByTick:function(r){var y=r.tick.unit,p=r.tick.serial;r=r.timeline.dateHash;return r[y][p]&&r[y][p].length>0?r[y][p]:0},setTimelineProp:function(r,y,p){w.timelinePool[r][y]=p},passesFilters:function(r,y){var p=true,G="",J=[],i;G="";J=[];if(y<r.low_threshold||y>r.high_threshold)return false;if(G=w.filterObject.include){J=
G.split(",");p=false;for(i=0;i<J.length;i++){G=RegExp(s.trim(J[i]),"i");if(r.title.match(G))p=true}}if(G=w.filterObject.exclude){J=G.split(",");for(i=0;i<J.length;i++){G=RegExp(s.trim(J[i]),"i");if(r.title.match(G))p=false}}return p},freshTimelines:function(){var r,y,p,G,J=w.activeTimelines,i=w.ticksArray,v="",H,K=this;y="";var aa=K.dimensions.container.centerx,ba=K.dimensions.container.width,x=w.getFocusDate().sec,fa=w.getZoomInfo().spp;w.getZoomInfo();y=[];var ha=[];ba=x-Math.floor(fa*(ba/2));var A;
y=0;for(var k=K.dimensions.container.height,u=0;u<J.length;u++){r=w.timelinePool[J[u]];A=r.display;y=r.top||k-120;$tl=s("<div class='tg-timeline-envelope' id='"+r.id+"'><div class='titleBar'><div class='timeline-title'>"+r.title+"<div class='tg-timeline-env-buttons'><span class='timeline-info'>info</span><span class='expand-collapse'>expand/collapse</span></div></div></div></div>").appendTo(this._views.TICKS);$tl.draggable({axis:"y",handle:".titleBar",stop:function(){K.setTimelineProp(r.id,"top",
s(this).css("top"))}}).css("top",y);y=$tl.height();s(".tg-timeline-envelope#"+r.id+" .titleBar .expand-collapse").click(function(){K.expandCollapseTimeline(r.id)});s(".tg-timeline-envelope#"+r.id+" .titleBar .timeline-info").click(function(){K.timelineModal(r.id)});H=$tl.children(".titleBar");p=aa+(r.bounds.first-x)/fa;G=aa+(r.bounds.last-x)/fa;H.css({top:y,left:p,width:G-p});if(A=="expanded")v=r.borg=new timeglider.TGOrg;for(p=0;p<i.length;p++){y=this.getTimelineEventsByTick({tick:i[p],timeline:r});
s.merge(ha,y)}for(p=0;p<r.spans.length;p++){y=r.spans[p];y.start<ba&&y.end>ba&&s.inArray(y.id,ha)==-1&&ha.unshift(y.id)}y=this.compileTickEventsAsHtml(r,ha,0,"sweep");if(A=="expanded"){y=v.getHTML("sweep");r.borg=v.getBorg()}y!="undefined"&&$tl.append(y);this.registerEventImages($tl)}K.registerTitles()},appendTimelines:function(r){for(var y=w.activeTimelines,p,G="",J=0;J<y.length;J++){p=w.timelinePool[y[J]];idArr=this.getTimelineEventsByTick({tick:r,timeline:p});G=this.compileTickEventsAsHtml(p,idArr,
r.serial,"append");if(p.display=="expanded")G=p.borg.getHTML(r.serial);p=s(".tg-timeline-envelope#"+p.id).append(G);this.registerEventImages(p)}},compileTickEventsAsHtml:function(r,y,p,G){var J;J=0;var i=this.dimensions.container.centerx,v=r.display,H=$tl.height();stuff="";foSec=w.startSec;spp=w.getZoomInfo().spp;zl=w.getZoomInfo().level;buffer=20;borg=r.borg;block_arg="sweep";if(G=="append")block_arg=p;for(p=0;p<y.length;p++){ev=w.eventPool["ev_"+y[p]];if(this.passesFilters(ev,zl)===true){J=i+(ev.startdateObj.sec-
foSec)/spp;if(v=="expanded"){impq=r.size_importance!==false?this.scaleToImportance(ev.importance,zl):1;ev.width=ev.titleWidth*impq+buffer;ev.fontsize=this.basicFontSize*impq;ev.left=J;ev.spanwidth=0;if(ev.span==true){ev.spanwidth=(ev.enddateObj.sec-ev.startdateObj.sec)/spp;if(ev.spanwidth>ev.width)ev.width=ev.spanwidth}J=0;if(ev.image&&ev.image_class==="layout"){J=ev.image_size.height+2;ev.width=ev.image_size.width+2}ev.height=Math.ceil(ev.fontsize)+J;ev.top=H-ev.height;borg.addBlock(ev,block_arg)}else if(v==
"collapsed")stuff+="<div id='ev_"+ev.id+"' class='timeglider-event-collapsed' style='top:"+(H-2)+"px;left:"+J+"px'></div>"}}return v=="collapsed"?stuff:""},registerEventImages:function(r){s(".timeglider-event-image-bar").each(function(){s(this).position({my:"top",at:"bottom",of:r,offset:"0, 0"}).css("left",0)})},expandCollapseTimeline:function(r){r=w.timelinePool[r];r.display=r.display=="expanded"?"collapsed":"expanded";w.refresh()},timelineModal:function(r){s("#tl_"+r+"_modal").remove();var y=w.timelinePool[r];
templ_obj={title:y.title,description:y.description,id:r};s.tmpl(this._templates.timeline_modal,templ_obj).appendTo(this._views.CONTAINER).css("z-index",this.ztop++).position({my:"left top",at:"left top",of:this._views.CONTAINER,offset:"32, 32",collision:"fit fit"}).draggable({stack:".timeglider-modal"})},eventModal:function(r){s("#ev_"+r+"_modal").remove();var y=s("#"+r),p=this._templates.event_modal;ev=w.eventPool[r];ev_img=ev.image?"<img src='"+ev.image+"'>":"";templ_obj={title:ev.title,description:ev_img+
ev.description,id:r,startdate:ev.startdate,link:ev.link,video:ev.video};if(ev.video){p=this._templates.event_modal_video;templ_obj.video=ev.video}s.tmpl(p,templ_obj).appendTo(this._views.TICKS).css("z-index",this.ztop++).position({my:"right center",at:"left top",of:y,offset:"0, -12",collision:"fit fit"}).draggable({stack:".timeglider-modal"})},parseHTMLTable:function(r){var y={},p=+new Date,G=[];s("#"+r).find("tr").each(function(J){var i=s(this).children(),v;if(J===0)G=i.map(function(){return s(this).attr("class").replace(/^.*?\btg-(\S+)\b.*?$/,
"$1")}).get();else{v={};i.each(function(H){v[G[H]]=s(this).text()});y["prefix"+p++]=v}});return y}};f.zoomTree=[{},{unit:"da",width:35E3,level:1,label:"5 hours"},{unit:"da",width:17600,level:2,label:"7 hours"},{unit:"da",width:8800,level:3,label:"10 hours"},{unit:"da",width:4400,level:4,label:"12 hours"},{unit:"da",width:2200,level:5,label:"14 hours"},{unit:"da",width:1100,level:6,label:"17 hours"},{unit:"da",width:550,level:7,label:"22 hours"},{unit:"da",width:432,level:8,label:"1 DAY"},{unit:"da",
width:343,level:9,label:"1.5 days"},{unit:"da",width:272,level:10,label:"2 days"},{unit:"da",width:216,level:11,label:"2.5 days"},{unit:"da",width:171,level:12,label:"3 days"},{unit:"da",width:136,level:13,label:"3.5 days"},{unit:"da",width:108,level:14,label:"4 days"},{unit:"mo",width:2509,level:15,label:"6 days"},{unit:"mo",width:1945,level:16,label:"1 WEEK"},{unit:"mo",width:1508,level:17,label:"10 days"},{unit:"mo",width:1169,level:18,label:"2 weeks"},{unit:"mo",width:913,level:19,label:"2.5 weeks"},
{unit:"mo",width:719,level:20,label:"3 weeks"},{unit:"mo",width:566,level:21,label:"3.5 weeks"},{unit:"mo",width:453,level:22,label:"1 MONTH"},{unit:"mo",width:362,level:23,label:"5.5 weeks"},{unit:"mo",width:290,level:24,label:"7 weeks"},{unit:"mo",width:232,level:25,label:"2 months"},{unit:"mo",width:186,level:26,label:"2.5 months"},{unit:"mo",width:148,level:27,label:"3 months"},{unit:"mo",width:119,level:28,label:"4 months"},{unit:"mo",width:95,level:29,label:"5 months"},{unit:"mo",width:76,level:30,
label:"6 months"},{unit:"ye",width:723,level:31,label:"9 months"},{unit:"ye",width:573,level:32,label:"1 YEAR"},{unit:"ye",width:455,level:33,label:"1.25 years"},{unit:"ye",width:361,level:34,label:"1.5 years"},{unit:"ye",width:286,level:35,label:"2 years"},{unit:"ye",width:227,level:36,label:"2.5 years"},{unit:"ye",width:179,level:37,label:"3 years"},{unit:"ye",width:142,level:38,label:"4 years"},{unit:"ye",width:113,level:39,label:"5 years"},{unit:"ye",width:89,level:40,label:"6 years"},{unit:"de",
width:705,level:41,label:"8 years"},{unit:"de",width:559,level:42,label:"10 years"},{unit:"de",width:443,level:43,label:"13 years"},{unit:"de",width:302,level:44,label:"16 years"},{unit:"de",width:240,level:45,label:"20 years"},{unit:"de",width:190,level:46,label:"25 years"},{unit:"de",width:150,level:47,label:"30 years"},{unit:"de",width:120,level:48,label:"40 years"},{unit:"de",width:95,level:49,label:"50 years"},{unit:"de",width:76,level:50,label:"65 years"},{unit:"ce",width:600,level:51,label:"80 years"},
{unit:"ce",width:480,level:52,label:"100 years"},{unit:"ce",width:381,level:53,label:"130 years"},{unit:"ce",width:302,level:54,label:"160 years"},{unit:"ce",width:240,level:55,label:"200 years"},{unit:"ce",width:190,level:56,label:"250 years"},{unit:"ce",width:150,level:57,label:"300 years"},{unit:"ce",width:120,level:58,label:"400 years"},{unit:"ce",width:95,level:59,label:"500 years"},{unit:"ce",width:76,level:60,label:"600 years"},{unit:"thou",width:603,level:61,label:"1000 years"},{unit:"thou",
width:478,level:62,label:"1200 years"},{unit:"thou",width:379,level:63,label:"1800 years"},{unit:"thou",width:301,level:64,label:"160 years"},{unit:"thou",width:239,level:65,label:"xxx years"},{unit:"thou",width:190,level:66,label:"xxx years"},{unit:"thou",width:150,level:67,label:"xxx years"},{unit:"thou",width:120,level:68,label:"xxx years"},{unit:"thou",width:95,level:69,label:"8,000 years"},{unit:"thou",width:76,level:70,label:"10,000 years"},{unit:"tenthou",width:603,level:71,label:"15,000 years"},
{unit:"tenthou",width:358,level:72,label:"20,000 years"},{unit:"tenthou",width:213,level:73,label:"30,000 years"},{unit:"tenthou",width:126,level:74,label:"60,000 years"},{unit:"tenthou",width:76,level:75,label:"100,000 years"},{unit:"hundredthou",width:603,level:76,label:"180,000 years"},{unit:"hundredthou",width:358,level:77,label:"300,000 years"},{unit:"hundredthou",width:213,level:78,label:"500,000 years"},{unit:"hundredthou",width:126,level:79,label:"800,000 years"},{unit:"hundredthou",width:76,
level:80,label:"1 million years"},{unit:"mill",width:603,level:81,label:"1.2 million years"},{unit:"mill",width:358,level:82,label:"2 million years"},{unit:"mill",width:213,level:83,label:"3 million years"},{unit:"mill",width:126,level:84,label:"5 million years"},{unit:"mill",width:76,level:85,label:"10 million years"},{unit:"tenmill",width:603,level:86,label:"15 million years"},{unit:"tenmill",width:358,level:87,label:"30 million years"},{unit:"tenmill",width:213,level:88,label:"50 million years"},
{unit:"tenmill",width:126,level:89,label:"80 million years"},{unit:"tenmill",width:76,level:90,label:"100 million years"},{unit:"hundredmill",width:603,level:91,label:"120 million years"},{unit:"hundredmill",width:358,level:92,label:"200 million years"},{unit:"hundredmill",width:213,level:93,label:"300 million years"},{unit:"hundredmill",width:126,level:94,label:"500 million years"},{unit:"hundredmill",width:76,level:95,label:"1 billion years"},{unit:"bill",width:603,level:96,label:"15 million years"},
{unit:"bill",width:358,level:97,label:"30 million years"},{unit:"bill",width:213,level:98,label:"50 million years"},{unit:"bill",width:126,level:99,label:"80 million years"},{unit:"bill",width:76,level:100,label:"100 billion years"}];f.calculateSecPerPx=function(r){for(var y=1;y<r.length;y++){var p=r[y],G=0;switch(p.unit){case "da":G=86400;break;case "mo":G=2419200;break;case "ye":G=31536E3;break;case "de":G=31536E4;break;case "ce":G=31536E5;break;case "thou":G=31536E6;break;case "tenthou":G=31536E7;
break;case "hundredthou":G=31536E8;break;case "mill":G=31536E9;break;case "tenmill":G=31536E10;break;case "hundredmill":G=31536E11;break;case "bill":G=31536E12}p.spp=G/parseInt(p.width)}}(f.zoomTree)})(timeglider);(function(f){var B=f.TGDate,C={},w=jQuery;f.TimelineCollection=Backbone.Collection.extend({model:timeglider.Timeline});f.TimegliderMediator=function(L){this.options=C=L;this._focusDate={};this._zoomInfo={};this._zoomLevel=1;this.ticksReady=false;this.ticksArray=[];this.startSec=0;this.activeTimelines=[];this.max_zoom=C.max_zoom;this.min_zoom=C.min_zoom;this.fixed_zoom=this.max_zoom==this.min_zoom?true:false;this.gesturing=false;this.gestureStartZoom=0;this.filterObject={};this.eventPool=[];this.timelinePool=
{};this.initial_timeline_id=C.initial_timeline_id;if(C.max_zoom===C.min_zoom)this.fixed_zoom=C.min_zoom};f.TimegliderMediator.prototype={gotoDate:function(L){this.setFocusDate(B.makeDateObject(L));this.refresh();return true},gotoDateZoom:function(L,s){this.setFocusDate(B.makeDateObject(L));this.setZoomLevel(s);return true},loadTimelineData:function(L){var s=this;typeof L==="object"?s.parseData(L):w.getJSON(L,function(S){s.parseData(S)})},parseData:function(L){debug.log("parseData");var s=0,S=L.length,
N={};N={};for(var r=0;r<S;r++){N=L[r];N.mediator=this;N=(new timeglider.Timeline(N)).toJSON();N.id.length>0&&s++;this.swallowTimeline(N)}s===0?alert("ERROR loading data: Check JSON with jsonLint"):w.publish("mediator.timelineDataLoaded")},swallowTimeline:function(L){this.timelinePool[L.id]=L;w.publish("mediator.timelineListChangeSignal")},setInitialTimelines:function(){var L=this,s=this.initial_timeline_id;s&&setTimeout(function(){L.toggleTimeline(s)},1E3)},refresh:function(){w.publish("mediator.refreshSignal")},
setTicksReady:function(L){this.ticksReady=L;L===true&&w.publish("mediator.ticksReadySignal")},getFocusDate:function(){return this._focusDate},setFocusDate:function(L){if(L!=this._focusDate){L.mo_num=B.getMonthNum(L);L.rd=B.getRataDie(L);L.sec=B.getSec(L);this._focusDate=L}},getZoomLevel:function(){return Number(this._zoomLevel)},setZoomLevel:function(L){if(L<=this.max_zoom&&L>=this.min_zoom){this.startSec=this._focusDate.sec;if(L!=this._zoomLevel){this._zoomLevel=L;this._zoomInfo=timeglider.zoomTree[L];
w.publish("mediator.zoomLevelChange")}}else return false},getZoomInfo:function(){return this._zoomInfo},setFilterObject:function(L){this.filterObject={include:L.include,exclude:L.exclude};w.publish("mediator.filterObjectChange");this.refresh()},setGestureStart:function(){this.gestureStartZoom=this.getZoomLevel()},getTicksOffset:function(){return this._ticksOffset},setTicksOffset:function(L){this._ticksOffset=L;w.publish("mediator.ticksOffsetChange")},getTickBySerial:function(L){for(var s=this.ticksArray,
S=s.length,N=0;N<S;N++){var r=s[N];if(r.serial==L)return r}return false},addToTicksArray:function(L,s){if(L.type=="init"){L.serial=B.getTimeUnitSerial(s,L.unit);this.ticksArray=[L]}else if(L.type=="l"){L.serial=this.ticksArray[0].serial-1;this.ticksArray.unshift(L)}else{L.serial=this.ticksArray[this.ticksArray.length-1].serial+1;this.ticksArray.push(L)}w.publish("mediator.ticksArrayChange");return L.serial},toggleTimeline:function(L){var s=this.timelinePool[L],S=w.inArray(L,this.activeTimelines);
if(S==-1){this.activeTimelines.push(L);this.setFocusDate(B.makeDateObject(s.focus_date));this.setZoomLevel(s.initial_zoom)}else this.activeTimelines.splice(S,1);this.refresh();w.publish("mediator.activeTimelinesChange")}};f.getLowHigh=function(L){var s,S,N=parseFloat(L[0]),r=N;for(s=0;s<L.length;s++){S=parseFloat(L[s]);if(S<r)r=S;if(S>N)N=S}return{high:N,low:r}};f.getStringWidth=function(L){return w("#timeglider-measure-span").html(L).width()+20};f.getImageSize=function(L){var s=w("#timeglider-measure-span").html("");
s.append("<img id='test_img' src='"+L+"'>");L=w("#test_img").width();var S=w("#test_img").height();s.html("");return{width:L,height:S}};f.validateOptions=function(L){this.optionsMaster={initial_focus:{type:"date"},editor:{type:"string"},backgroundColor:{type:"color"},backgroundImage:{type:"color"},min_zoom:{type:"number",min:1,max:100},max_zoom:{type:"number",min:1,max:100},initial_zoom:{type:"number",min:1,max:100},show_centerline:{type:"boolean"},display_zoom_level:{type:"boolean"},data_source:{type:"url"},
basic_fontsize:{type:"number",min:9,max:100},mouse_wheel:{type:"string",possible:["zoom","pan"]},initial_timeline_id:{type:"string"},icon_folder:{type:"string"},show_footer:{type:"boolean"},display_zoom_level:{type:"boolean"}};var s=this,S="";w.each(L,function(N,r){if(s.optionsMaster[N])switch(s.optionsMaster[N].type){case "string":if(typeof r!="string")S+=N+" needs to be a string.\n";if(s.optionsMaster[N].possible)if(w.inArray(r,s.optionsMaster[N].possible)==-1)S+=N+" must be: "+s.optionsMaster[N].possible.join(" or ");
break;case "number":if(typeof r!="number")S+=r+" needs to be a number.\n";if(s.optionsMaster[N].min)if(r<s.optionsMaster[N].min)S+=N+" must be greater than or equal to "+s.optionsMaster[N].min+"\n";if(s.optionsMaster[N].max)if(r>s.optionsMaster[N].max)S+=N+" must be less than or equal to "+s.optionsMaster[N].max+"\n";break;case "boolean":if(typeof r!="boolean")S+=r+" needs to be a number.\n"}});return S}})(timeglider);(function(f){var B;f.widget("timeglider.timeline",{_tg:this,_element:this.element,options:{initial_focus:timeglider.TGDate.getToday(),editor:"none",min_zoom:1,max_zoom:100,show_centerline:true,data_source:"",basic_fontsize:12,mouse_wheel:"zoom",initial_timeline_id:"",icon_folder:"js/timeglider/icons/",show_footer:true,display_zoom_level:true},_create:function(){this._id=f(this.element).attr("id");this.element.html("<div class='timeglider-container'><div class='timeglider-loading'>loading</div><div class='timeglider-centerline'></div><div class='timeglider-truck' id='tg-truck'><div class='timeglider-ticks'><div class='timeglider-handle'></div></div></div><div class='timeglider-slider-container'><div class='timeglider-slider'></div><div class='timeglider-pan-buttons'><div class='timeglider-pan-left'></div><div class='timeglider-pan-right'></div></div></div><div class='timeglider-footer'><div class='timeglider-logo'></div><img class='timeglider-filter-bt' title='filter' src='js/timeglider/buttons/filter.png'><img class='timeglider-tools-bt' title='settings' src='js/timeglider/buttons/tools.png'><img class='timeglider-list-bt' title='timelines' src='js/timeglider/buttons/list.png'></div></div><span id='timeglider-measure-span'></span>")},
_init:function(){var C=timeglider.validateOptions(this.options);if(C==""){B=new timeglider.TimegliderMediator(this.options);new timeglider.TimegliderTimelineView(this,B);B.setFocusDate(timeglider.TGDate.makeDateObject(this.options.initial_focus));B.loadTimelineData(this.options.data_source)}else alert("Rats. There's a problem with your widget settings:"+C)},gotoDate:function(C){debug.log("d:"+C);B.gotoDate(C)},gotoDateZoom:function(C,w){debug.log("d:"+w);B.gotoDateZoom(C,w)},destroy:function(){f.Widget.prototype.destroy.apply(this,
arguments);f(this.element).html("")}})})(jQuery);
